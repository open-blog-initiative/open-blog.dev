<!DOCTYPE html><html lang="fr" amp><head><script async src="https://cdn.ampproject.org/v0.js"></script><style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="generator" content="Gatsby 2.8.2"><title data-react-helmet="true">Transcript de ma conf&#xE9;rence &#xAB; Migration de 6play vers Le Cloud, retour d&#x2019;exp&#xE9;rience &#xBB; &#xE0; MixIT 2019 |  Open blog</title><link data-react-helmet="true" rel="canonical" href="https://blog.pascal-martin.fr/post/mixit-2019-lyon-transcript-conference-retour-experience-migration-cloud-6play/"><link data-react-helmet="true" rel="amphtml" href="https://open-blog.dev/amp/posts/pmartin/mixit-2019-lyon-transcript-conference-retour-experience-migration-cloud-6play/"><meta data-react-helmet="true" name="description" content="Le transcript de ma pr&#xE9;sentation &#xAB; Migration de 6play vers Le Cloud, retour d&#x2019;exp&#xE9;rience &#xBB; &#xE0; MixIT 2019"><meta data-react-helmet="true" property="og:title" content="Transcript de ma conf&#xE9;rence &#xAB; Migration de 6play vers Le Cloud, retour d&#x2019;exp&#xE9;rience &#xBB; &#xE0; MixIT 2019"><meta data-react-helmet="true" property="og:description" content="Le transcript de ma pr&#xE9;sentation &#xAB; Migration de 6play vers Le Cloud, retour d&#x2019;exp&#xE9;rience &#xBB; &#xE0; MixIT 2019"><meta data-react-helmet="true" property="og:type" content="website"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="twitter:creator" content="Pascal MARTIN"><meta data-react-helmet="true" name="twitter:title" content="Transcript de ma conf&#xE9;rence &#xAB; Migration de 6play vers Le Cloud, retour d&#x2019;exp&#xE9;rience &#xBB; &#xE0; MixIT 2019"><meta data-react-helmet="true" name="twitter:description" content="Le transcript de ma pr&#xE9;sentation &#xAB; Migration de 6play vers Le Cloud, retour d&#x2019;exp&#xE9;rience &#xBB; &#xE0; MixIT 2019"><meta data-react-helmet="true" property="og:image" content="https://open-blog.dev/static/c6e74bbcd156094cb135e96f56e514a6/647de/slide-001.png"><script data-react-helmet="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://open-blog.dev//posts/pmartin/mixit-2019-lyon-transcript-conference-retour-experience-migration-cloud-6play/"},"headline":"Transcript de ma conférence « Migration de 6play vers Le Cloud, retour d’expérience » à MixIT 2019","image":"https://open-blog.dev/static/c6e74bbcd156094cb135e96f56e514a6/647de/slide-001.png","author":"Pascal MARTIN","keywords":"mixit, conference, cloud","publisher":{"@type":"Organization","name":"Open Blog","logo":{"@type":"ImageObject","url":"https://open-blog.dev/icons/icon-144x144.png"}},"datePublished":"01 July, 2019","dateCreated":"01 July, 2019","dateModified":"01 July, 2019","description":"Le transcript de ma présentation « Migration de 6play vers Le Cloud, retour d’expérience » à MixIT 2019"}</script><link rel="shortcut icon" href="/icons/icon-48x48.png?v=48fdfc2a19f4008982a971a4393fc87b"><link rel="manifest" href="/manifest.webmanifest"><meta name="theme-color" content="#3f51b5"><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=48fdfc2a19f4008982a971a4393fc87b"><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=48fdfc2a19f4008982a971a4393fc87b"><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=48fdfc2a19f4008982a971a4393fc87b"><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=48fdfc2a19f4008982a971a4393fc87b"><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=48fdfc2a19f4008982a971a4393fc87b"><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=48fdfc2a19f4008982a971a4393fc87b"><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=48fdfc2a19f4008982a971a4393fc87b"><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=48fdfc2a19f4008982a971a4393fc87b"><link rel="sitemap" type="application/xml" href="/sitemap.xml"><link rel="alternate" type="application/rss+xml" title="Open blog" href="/rss.xml"><link as="script" rel="preload" href="/component---src-templates-blog-post-js-fe4b5ce51088862f1e8b.js"><link as="script" rel="preload" href="/1-176213520d534cda9cb6.js"><link as="script" rel="preload" href="/app-596e68a8093cbd5c6bb9.js"><link as="script" rel="preload" href="/styles-359065255d63fd2c3f9a.js"><link as="script" rel="preload" href="/webpack-runtime-05e33b1c885dfe67aed9.js"><link as="fetch" rel="preload" href="/static/d/552/path---posts-pmartin-mixit-2019-lyon-transcript-conference-retour-experience-migration-cloud-6-play-1-e-7-45e-y9ClcE56stCP7KAq4rWv9UiPE.json" crossorigin="use-credentials"><style amp-custom>pre::-webkit-scrollbar{width:14px}pre::-webkit-scrollbar-track{background-color:#6272a4;border-radius:0}pre::-webkit-scrollbar-thumb{background-color:#bd93f9;border-radius:0}code[class*=language-],pre[class*=language-]{color:#ccc;background:#282936;text-shadow:none;font-family:PT Mono,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection{text-shadow:none;background-color:#5a5f80}code[class*=language-] ::selection,code[class*=language-]::selection,pre[class*=language-] ::selection,pre[class*=language-]::selection{text-shadow:none;background-color:#5a5f80}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{background:#282936;border-radius:.5em;padding:1em;margin:.5em 0;overflow:auto;height:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#282936}:not(pre)>code[class*=language-]{padding:4px 7px;border-radius:.3em;white-space:normal}.limit-300{height:300px}.limit-400{height:400px}.limit-500{height:500px}.limit-600{height:600px}.limit-700{height:700px}.limit-800{height:800px}.token.comment{color:#6272a4}.token.prolog{color:#cfcfc2}.token.tag{color:#dc68aa}.token.entity{color:#8be9fd}.token.atrule{color:#62ef75}.token.url{color:#66d9ef}.token.selector{color:#cfcfc2}.token.string{color:#f1fa8c}.token.property{color:#ffb86c}.token.important{color:#ff79c6;font-weight:700}.token.punctuation{color:#e6db74}.token.number{color:#bd93f9}.token.function{color:#50fa7b}.token.class-name{color:#ffb86c}.token.keyword{color:#ff79c6}.token.boolean{color:#ffb86c}.token.operator{color:#8be9fd}.token.char{color:#ff879d}.token.regex,.token.variable{color:#50fa7b}.token.constant,.token.symbol{color:#ffb86c}.token.builtin{color:#ff79c6}.token.attr-value{color:#7ec699}.token.deleted,.token.namespace{color:#e2777a}.token.bold{font-weight:700}.token.italic{font-style:italic}.token{color:#ff79c6}.langague-c .token.string,.langague-cpp .token.string{color:#8be9fd}.language-css .token.selector{color:#50fa7b}.language-css .token.property{color:#ffb86c}.language-java .token.class-name,.language-java span.token.class-name{color:#8be9fd}.language-markup .token.attr-value{color:#66d9ef}.language-markup .token.tag{color:#50fa7b}.language-objectivec .token.property{color:#66d9ef}.language-objectivec .token.string{color:#50fa7b}.language-php .token.boolean{color:#8be9fd}.language-php .token.function{color:#ff79c6}.language-php .token.keyword{color:#66d9ef}.language-ruby .token.symbol{color:#8be9fd}.language-ruby .token.class-name{color:#cfcfc2}pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}pre.line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}div.code-toolbar{position:relative}div.code-toolbar>.toolbar{position:absolute;top:.3em;right:.2em;-webkit-transition:opacity .3s ease-in-out;transition:opacity .3s ease-in-out;opacity:0}div.code-toolbar:hover>.toolbar{opacity:1}div.code-toolbar>.toolbar .toolbar-item{display:inline-block;padding-right:20px}div.code-toolbar>.toolbar a{cursor:pointer}div.code-toolbar>.toolbar button{background:0 0;border:0;color:inherit;font:inherit;line-height:normal;overflow:visible;padding:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none}div.code-toolbar>.toolbar a,div.code-toolbar>.toolbar button,div.code-toolbar>.toolbar span{color:#ccc;font-size:.8em;padding:.5em;background:#6272a4;border-radius:.5em}div.code-toolbar>.toolbar a:focus,div.code-toolbar>.toolbar a:hover,div.code-toolbar>.toolbar button:focus,div.code-toolbar>.toolbar button:hover,div.code-toolbar>.toolbar span:focus,div.code-toolbar>.toolbar span:hover{color:inherit;text-decoration:none;background-color:var(--verde)}span.token>a{color:#f1fa8c}:not(pre)>code[class*=language-text],pre[class*=language-text]{background-color:#efefef;color:#282936}html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.45em georgia,serif;box-sizing:border-box;overflow-y:scroll}*,:after,:before{box-sizing:inherit}body{color:rgba(0,0,0,.8);font-family:georgia,serif;font-weight:400;word-wrap:break-word;-webkit-font-kerning:normal;font-kerning:normal;-ms-font-feature-settings:"kern","liga","clig","calt";-webkit-font-feature-settings:"kern","liga","clig","calt";font-feature-settings:"kern","liga","clig","calt"}img{max-width:100%;padding:0;margin:0 0 1.45rem}h1{font-size:2.25rem}h1,h2{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h2{font-size:1.62671rem}h3{font-size:1.38316rem}h3,h4{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h4{font-size:1rem}h5{font-size:.85028rem}h5,h6{padding:0;margin:0 0 1.45rem;color:inherit;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;font-weight:700;text-rendering:optimizeLegibility;line-height:1.1}h6{font-size:.78405rem}hgroup{padding:0;margin:0 0 1.45rem}ol,ul{padding:0;margin:0 0 1.45rem 1.45rem;list-style-position:outside;list-style-image:none}dd,dl,figure,p{padding:0;margin:0 0 1.45rem}pre{margin:0 0 1.45rem;font-size:.85rem;line-height:1.42;background:rgba(0,0,0,.04);border-radius:3px;overflow:auto;word-wrap:normal;padding:1.45rem}table{font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%}fieldset,table{padding:0;margin:0 0 1.45rem}blockquote{font-style:italic;padding:.5rem 1.45rem;margin:0 0 1.45rem;border-left:3px solid #3f51b5}form,iframe,noscript{padding:0;margin:0 0 1.45rem}hr{padding:0;margin:0 0 calc(1.45rem - 1px);background:rgba(0,0,0,.2);border:none;height:1px}address{padding:0;margin:0 0 1.45rem}b,dt,strong,th{font-weight:700}li{margin-bottom:.725rem}ol li,ul li{padding-left:0}li>ol,li>ul{margin-left:1.45rem;margin-bottom:.725rem;margin-top:.725rem}blockquote :last-child,li :last-child,p :last-child{margin-bottom:0}li>p{margin-bottom:.725rem}code,kbd,samp{font-size:.85rem;line-height:1.45rem}abbr,abbr[title],acronym{border-bottom:1px dotted rgba(0,0,0,.5);cursor:help}abbr[title]{text-decoration:none}td,th,thead{text-align:left}td,th{border-bottom:1px solid rgba(0,0,0,.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding:.725rem .96667rem calc(.725rem - 1px)}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}code,tt{background-color:rgba(0,0,0,.04);border-radius:3px;font-family:SFMono-Regular,Consolas,Roboto Mono,Droid Sans Mono,Liberation Mono,Menlo,Courier,monospace;padding:.2em 0}pre code{background:0 0;line-height:1.42}code:after,code:before,tt:after,tt:before{letter-spacing:-.2em;content:" "}pre code:after,pre code:before,pre tt:after,pre tt:before{content:""}@media only screen and (max-width:480px){html{font-size:100%}}.article-item{display:flex}.article-item>header{margin-right:.5rem}.article-item>picture{align-self:center;flex-grow:0;max-width:200px;height:100%;width:100%}.article-item__title:hover{color:#3f51b5}@media screen and (max-width:640px){.article-item>picture{display:none}}.author{display:flex;margin-bottom:2rem}.author>.author__description{padding-left:16px}.author__profile{width:100px;height:auto;border-radius:50%}.author__name{margin:0}.author__bio{margin:8px 0}.comment-item{display:flex;padding:.8rem;border:2px dotted #3f51b5;border-radius:4px}.comment-item__profile{width:40px;height:40px;border-radius:50%}.comment-item__name{font-size:1rem;font-weight:400;font-style:italic}.comment-item__description{margin-left:1rem}.comment-list{display:flex;flex-direction:column}.comment-list__action{align-self:center;display:block;padding:.8rem;background-color:#3f51b5;color:#fff;text-decoration:none;border-radius:4px;font-weight:700}.presentation{display:flex;flex-direction:column;font-size:1.2rem}.presentation img{-o-object-fit:contain;object-fit:contain;height:144px}.presentation h1{text-align:center}</style><meta charset="utf-8"><meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><header style="background:#3f51b5;margin-bottom:1.45rem"><nav style="display:flex;align-items:baseline;justify-content:space-between;margin:0 auto;max-width:960px;padding:1rem 1.0875rem"><h1 style="margin:0"><a style="color:white;text-decoration:none" href="https://blog.pascal-martin.fr/">Open Blog</a></h1><h2 style="margin:0"><a style="color:white;text-decoration:none" href="https://blog.pascal-martin.fr/contributing">Contribute</a></h2></nav></header><div style="margin:0 auto;max-width:960px;padding:0px 1.0875rem 1.45rem;padding-top:0"><main><amp-img src="/static/c6e74bbcd156094cb135e96f56e514a6/4e245/slide-001.webp" alt="hero" width="175" height="109" layout="responsive" srcset="/static/c6e74bbcd156094cb135e96f56e514a6/4e245/slide-001.webp 175w,
/static/c6e74bbcd156094cb135e96f56e514a6/e09c6/slide-001.webp 350w,
/static/c6e74bbcd156094cb135e96f56e514a6/5c04a/slide-001.webp 700w,
/static/c6e74bbcd156094cb135e96f56e514a6/80349/slide-001.webp 1000w" sizes="(max-width: 600px) 100vw, 600px" type="image/webp"><amp-img src="/static/c6e74bbcd156094cb135e96f56e514a6/16256/slide-001.png" alt="hero" width="175" height="109" layout="responsive" srcset="/static/c6e74bbcd156094cb135e96f56e514a6/16256/slide-001.png 175w,
/static/c6e74bbcd156094cb135e96f56e514a6/73897/slide-001.png 350w,
/static/c6e74bbcd156094cb135e96f56e514a6/54c56/slide-001.png 700w,
/static/c6e74bbcd156094cb135e96f56e514a6/e9c7b/slide-001.png 1000w" sizes="(max-width: 600px) 100vw, 600px" type="image/png"></amp-img><amp-img src="/static/c6e74bbcd156094cb135e96f56e514a6/54c56/slide-001.png" alt="hero" width="700" height="438" layout="responsive" fallback style="width:100vw;max-height:50vh;object-fit:cover"></amp-img></amp-img><div><h1>Transcript de ma conf&#xE9;rence &#xAB; Migration de 6play vers Le Cloud, retour d&#x2019;exp&#xE9;rience &#xBB; &#xE0; MixIT 2019</h1><div><p>Les 23 et 24 mai, j&apos;&#xE9;tais pr&#xE9;sent &#xE0; <a href="https://mixitconf.org/2019/">MixIT 2019</a>, pour une pr&#xE9;sentation intitul&#xE9;e <strong>&#xAB; Migration de 6play vers Le Cloud, retour d&#x2019;exp&#xE9;rience &#xBB;</strong>. Puisque ma conf&#xE9;rence n&apos;a pas &#xE9;t&#xE9; enregistr&#xE9;e, voici une tentative de <em>transcript</em>, en esp&#xE9;rant qu&apos;il vous sera utile.</p>
<p><em>Cet article est re-publi&#xE9; depuis <a href="https://blog.pascal-martin.fr/">mon blog</a>.</em></p>
<p>Vous trouverez en-dessous de chaque <em>slide</em> le texte correspondant, &#xE9;ventuellement enrichi de quelques informations que je n&apos;ai pas donn&#xE9;es lors de la pr&#xE9;sentation, puisque celle-ci ne durait que 50 minutes questions incluses. Le style est volontairement assez proche de l&apos;oral.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/c6e74bbcd156094cb135e96f56e514a6/e11df/slide-001.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACeElEQVQoz02SWW/aQBRGx/Z4POMNr2w2BBoIWW2DCYQlgRgHswSyINKmitQmUdo+5aWv/fG1SbpIR6N5uEf3zp0PQCQKfN7Udq2Mo6klXtSLuy0tv8PLpln2JNnksZBJqRlZZZEg8hIhEsvyLCKQJUC26wfey1n35/jstWgNBcVuTF5K3hgipezPdKOMGFJO5y1ZYzlZ5FOinCGCjjgJSxkgZWpYTi+Wq4eHL8/PLxdh9PXp+2r9sFp9dI7c+Xx5ubjunw7Xd/fL5fXj84/9oyZEcXNMpDRI2Q7H65Xqnt/sPD59azRa3f4oiG4GwaywtT0YnDuOl05nR6OLVuskGk8dpw4AQIgnggFy276k5gCFKIrzj7tRNJ/Mbo87o2G4iOn1g+ls4br1MByXSuVYo2mGAjTDEiymAeIEQc5woiHK5uB8MgwmDb/jNXu9s1G1dlCp7gfBRRCMo2i6VSwlLg03MsaCDjCJd2Cqui0r2ZSWXd99DkbRdH7leseu1zw89MIwGkez+eUSUDRFMW/QDIp3BgyzKEg6ETQaEsSJ48nV9ep+Or+9uvkUTm6aJ+eO22y3+wduGwD4R6Y3sgwYyFM0BIDhsFipufZWrVje9/ye3x4cep3qrm8Vd3QzZ9vFXM5KzHjsvzKVDEOziGexbBg5q1A5DWaL5e3padA6GcSb73QHllUwzKyiGn86U+9yHBQICQMxAwmv5AFgc8W99dOvYPW654eGaWnpAsdrFI0pGjFJMY7r45AlModTGxSEFUErENGAULA/1Hf8maSXiFomKSsOAkfUBKy8gbjU5s0M907SHMcBjs94rvhLIZaRoP8rYPB/94TfOThbkhx6Q7YAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/c6e74bbcd156094cb135e96f56e514a6/50512/slide-001.webp" alt="Slide n&#xB0;001" width="163" height="102" layout="responsive" srcset="/static/c6e74bbcd156094cb135e96f56e514a6/50512/slide-001.webp 163w,
/static/c6e74bbcd156094cb135e96f56e514a6/aeba0/slide-001.webp 325w,
/static/c6e74bbcd156094cb135e96f56e514a6/001d9/slide-001.webp 650w,
/static/c6e74bbcd156094cb135e96f56e514a6/97fd0/slide-001.webp 975w,
/static/c6e74bbcd156094cb135e96f56e514a6/3cea3/slide-001.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/c6e74bbcd156094cb135e96f56e514a6/19bd1/slide-001.png" alt="Slide n&#xB0;001" width="163" height="102" layout="responsive" srcset="/static/c6e74bbcd156094cb135e96f56e514a6/19bd1/slide-001.png 163w,
/static/c6e74bbcd156094cb135e96f56e514a6/d3bcb/slide-001.png 325w,
/static/c6e74bbcd156094cb135e96f56e514a6/dbb61/slide-001.png 650w,
/static/c6e74bbcd156094cb135e96f56e514a6/6b691/slide-001.png 975w,
/static/c6e74bbcd156094cb135e96f56e514a6/e11df/slide-001.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/c6e74bbcd156094cb135e96f56e514a6/dbb61/slide-001.png" alt="Slide n&#xB0;001" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Bonjour &#xE0; toutes, bonjour &#xE0; tous.</p>
<p>Je m&apos;appelle Pascal MARTIN, je suis Lead DevOps chez M6 &#xE0; Lyon. J&apos;ai la chance d&apos;&#xEA;tre ici aujourd&apos;hui pour parler de la migration de notre plateforme 6play vers <em>Le Cloud</em>.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/6a2799254cb131ac304b996763a96046/e11df/slide-002.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAADJElEQVQozwEZA+b8AB8eHyYlJyoqLCwuLy8zNDE2ODI2ODM4OjQ6OzU8PjQ7PTU8Pjc+QTc+QTY+QTY+QDY9QDY8PzM6PTQ5PACQoKeYqbGer7agsbmgrrWktr+qws6sx9OsyNWnxNGuytasxtKlv8ujvcihusSft8GcsruYrrabrLKRjZAApq62nJuhh3h7gm9xc1xdZUxNd2RmfXBzjIWJgYKIWmRtanR7hIuOgIaIfoSGfICDe4CDhoaKhHR2Y0xMAIyLjn1ra00sKjwXFDcVEiACASMBAC8ODEEeG0QgHSUTFk9cZqO0vJamrpiosJipsY+NkXxnaFQ7OD8pJwBdUVJ0amxiUFE7IiJjWVx+g4l6f4Y6NjonJCk1OkArLTRwhJDB4/C01OG42+mfpq9yV1ZRNTM0Hx4oGBgAQCwqUkFBcGZnmaSrvt7qyOr3fJKcTVxld5Gfg6GxdZGfTV9smbbCvNrmnZ+lcFVUQyYjLhsaJRcXJRYWADMiITomJUo2NWZWVnt0djU2OykzPYektIqqunuWpJCxwW2Jmm99h5OMjnBTUkwvLSkWFiMVFiUWFxkLDAAxISEqGxsyIB89JyVUPT1EPUBATlmGp7eNrLyEpLSCorJTZ3VCOjxRMC1DJyYuGhkoGhonFxcXAwQXCgwAMSAgJBcXJxkZLh4dNCAeWUJBcWhqaHV/ZX6NW3OBOENNMTQ6jqCqZ2JlSkFDGgsLIRITHAcHPjU4XlxgAC4dHRwTFRsTFCYZGSYYGCsWFU40MmNNTGBdYjczOBANEnKAibzd6sDk8nd7ghIAABUBAV5eY6a+ykY2NgAZEhMJCAwJCQwQDA8bERMiExMuGhpELi1SOzlLOjslHyJ+hY6z0eCuytmdsr5KQURgYmiwzdyrxtVSTVEAAgIEBAQGBAQGBAQGEwsNHBESHxQVJBgZKRoZLCYpe4qTpcHPqsjYqsfXsM7fsM7dsc/fqsfWqcfVm7TAAAICAwICAwECAwMCAwQCAwcFBgYFBgEBAgAAABMWGT9MUzlESzlESztGTTpFTDtGTTtFSzlESjhDSDpFStN+FU/gPYT5AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/6a2799254cb131ac304b996763a96046/50512/slide-002.webp" alt="Slide n&#xB0;002" width="163" height="102" layout="responsive" srcset="/static/6a2799254cb131ac304b996763a96046/50512/slide-002.webp 163w,
/static/6a2799254cb131ac304b996763a96046/aeba0/slide-002.webp 325w,
/static/6a2799254cb131ac304b996763a96046/001d9/slide-002.webp 650w,
/static/6a2799254cb131ac304b996763a96046/97fd0/slide-002.webp 975w,
/static/6a2799254cb131ac304b996763a96046/3cea3/slide-002.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/6a2799254cb131ac304b996763a96046/19bd1/slide-002.png" alt="Slide n&#xB0;002" width="163" height="102" layout="responsive" srcset="/static/6a2799254cb131ac304b996763a96046/19bd1/slide-002.png 163w,
/static/6a2799254cb131ac304b996763a96046/d3bcb/slide-002.png 325w,
/static/6a2799254cb131ac304b996763a96046/dbb61/slide-002.png 650w,
/static/6a2799254cb131ac304b996763a96046/6b691/slide-002.png 975w,
/static/6a2799254cb131ac304b996763a96046/e11df/slide-002.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/6a2799254cb131ac304b996763a96046/dbb61/slide-002.png" alt="Slide n&#xB0;002" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p><em>Imaginez</em>. Un beau jour, peut-&#xEA;tre au d&#xE9;but des soldes ou lors d&apos;un &#xE9;v&#xE9;nement exceptionnel : un <strong>pic de trafic</strong> sur votre application. Le nombre de requ&#xEA;tes s&apos;envole ! Les CPU chauffent ! Les serveurs s&apos;&#xE9;croulent&#x2026; L&apos;application rame ou tombe. Vos utilisateurs ne sont pas satisfaits. Ils s&apos;en vont. Ils partent chez votre concurrent. Vous avez d&#xE9;j&#xE0; v&#xE9;cu cette situation ? Elle n&apos;est pas agr&#xE9;able :-/</p>
<p>Pour r&#xE9;pondre &#xE0; ce pic de charge, vous avez besoin de plus de serveurs. Vous allez sur le site de votre fournisseur, vous passez du temps &#xE0; choisir la machine qui r&#xE9;pondra le mieux &#xE0; vos besoins. Apr&#xE8;s tout, un serveur, &#xE7;a co&#xFB;te cher, vous allez l&apos;acheter et l&apos;amortir sur trois ans&#x2026; Vous ne devez pas vous tromper. Vous obtenez un devis. <strong>Une semaine est pass&#xE9;e</strong>.</p>
<p>Vous allez voir votre chef pour qu&apos;il valide ce devis. Il a d&apos;autres urgences &#xE0; traiter. Il pose votre devis sur une pile sur son bureau. Apr&#xE8;s quelques jours, il revient enfin vers vous avec un &quot;OK&quot;. Une <strong>seconde semaine</strong> est pass&#xE9;e.</p>
<p>Vous retournez sur le site de votre fournisseur pour passer commande. Manque de chance, rupture de stock&#x2026; Vu le temps qu&apos;il faut pour valider un devis et puisque vous aviez soigneusement choisi la machine r&#xE9;pondant au mieux &#xE0; vos besoins, vous attendez quelques jours. Enfin, vous pouvez commander. Une <strong>troisi&#xE8;me semaine</strong> s&apos;est &#xE9;coul&#xE9;e.</p>
<p>Le serveur est exp&#xE9;di&#xE9;. Manque de chance, gr&#xE8;ve des livreurs ou colis qui s&apos;&#xE9;gare&#x2026; Finalement, le carton arrive ! Une <strong>quatri&#xE8;me semaine</strong> vient de passer.</p>
<p>Un de vos coll&#xE8;gues met le carton contenant le serveur dans le coffre de sa voiture, va jusqu&apos;&#xE0; votre datacentre, sort le serveur, l&apos;installe, effectue les branchements &#xE9;lectrique/r&#xE9;seau, installe l&apos;OS, l&apos;ajoute &#xE0; votre hyperviseur de virtualisation&#x2026; Une <strong>cinqui&#xE8;me semaine</strong> s&apos;est &#xE9;coul&#xE9;e, mais, &#xE7;a y est, enfin, vous avez un serveur de plus !</p>
<p>Cinq semaines pour ajouter de la capacit&#xE9; &#xE0; votre h&#xE9;bergement ? J&apos;exag&#xE8;re peut-&#xEA;tre un peu&#x2026; Mais pas tant que &#xE7;a&#x2026; Que s&apos;est-il pass&#xE9; pendant ces cinq semaines pour les utilisateurs de votre application ? Ils ont &#xE9;t&#xE9; voir ailleurs. Combien de clients avez-vous perdu ? Et combien de chiffre d&apos;affaire ?</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/5ae9d2f8cec4ec1fbf563bfc33a9aa28/e11df/slide-003.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAADJElEQVQozwEZA+b8ABwcHR8fIR4eHxkaHBkaGxYXGSAhIiAgIRkZGR4eISAgIyEiJCEjJSIjJSIjJSIiJSIjJiEiJCIjJSUmKQA8Ozc/PTA1NS00NCthV0R9b1t1bViCe2SsqaHd3uDc29zc3ODZ2t3Z2t3X2NzV19rd3d/FysyutbrP0cgAiYaCZWNXISEWMS0cgGdLwqWIjH5fnpJ2l5aS5Ofq8/Lw5ubk/f39+vr6/Pv79/f3/f3+9ff29fX4zdi2AGlpaE9ORCopGyooGYhsT6KIa4R6XU9NQgcKD4iAd1dQRI97Y/n39vz+/3l9g4OCgvv6+f3+/v///9PaygAyMSkoJhY2NSptdoKdkpCei3V/eWJZVUNDMR+Uc1FEOCWjgVz8+PPc3+IcHiSFblP16t/////+/v3+/v8AODcvLSweeYKVscDfs7zRvcLPtbzIfIKIeGlecV9KQDIfmXpYwLy4jY+SHh4ghWRB5tvR9vb25eDY6uroADQxJDIzLJKhwIiVtrvC0tve5MrV6Y+iwYyfuouXrpyCbN/HrYOGlElMUDEuK2ZPNn1/gcbEwJmEbOjk3wBBPiwtLiWgnaOWn7mjq73FydDBytyGl7GFmrauxeaVlKu5sryYobhHTFVAQkGWnpynq67Jy9C0qpnv6+YAREAuODMlrpJ3iJCnlZ6vo6m0vb3FkZSffJrEnbTOZ2h+X2OEbHGHT01Od4KGnre3vL/Do56Jc4ZcjZ95AC0sHzQwIaWNdo6Xr5CXqJKYo6yuu5mSkHydyIiiwURGVUhKWYaBh0w9LHV7hLK5vsPAwI18WD1WM0JgMgAsLCQdHxqTfGOdobKEjaOYm6KgpLSwpqCIpc2EnL48QlRUVWRhXWFbSTZyd4Kusre/w8y1raWtsqpQX0cAPTo7KCsxZVdHvra4lqbHg5Kui5e0vKeZorTKmq/JPERcJjliVVJdUEZAMEFlQ1FzUGiYjo+Jz9mXvM6ZABMSDgsMChoWEUdBPTM7SyArPisyQEc+OEE7MkA/OB0fJRMaKx8dIBYWGRIZKxAWJR4oPR4jJkZHOmJiXyrggC+sbtifAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/5ae9d2f8cec4ec1fbf563bfc33a9aa28/50512/slide-003.webp" alt="Slide n&#xB0;003" width="163" height="102" layout="responsive" srcset="/static/5ae9d2f8cec4ec1fbf563bfc33a9aa28/50512/slide-003.webp 163w,
/static/5ae9d2f8cec4ec1fbf563bfc33a9aa28/aeba0/slide-003.webp 325w,
/static/5ae9d2f8cec4ec1fbf563bfc33a9aa28/001d9/slide-003.webp 650w,
/static/5ae9d2f8cec4ec1fbf563bfc33a9aa28/97fd0/slide-003.webp 975w,
/static/5ae9d2f8cec4ec1fbf563bfc33a9aa28/3cea3/slide-003.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/5ae9d2f8cec4ec1fbf563bfc33a9aa28/19bd1/slide-003.png" alt="Slide n&#xB0;003" width="163" height="102" layout="responsive" srcset="/static/5ae9d2f8cec4ec1fbf563bfc33a9aa28/19bd1/slide-003.png 163w,
/static/5ae9d2f8cec4ec1fbf563bfc33a9aa28/d3bcb/slide-003.png 325w,
/static/5ae9d2f8cec4ec1fbf563bfc33a9aa28/dbb61/slide-003.png 650w,
/static/5ae9d2f8cec4ec1fbf563bfc33a9aa28/6b691/slide-003.png 975w,
/static/5ae9d2f8cec4ec1fbf563bfc33a9aa28/e11df/slide-003.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/5ae9d2f8cec4ec1fbf563bfc33a9aa28/dbb61/slide-003.png" alt="Slide n&#xB0;003" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Je travaille sur 6play : la plateforme de VOD et de Replay du groupe M6. Sur le Web, &#xE7;a ressemble &#xE0; ceci. Pour faire simple, notre plateforme h&#xE9;berge des vid&#xE9;os et permet de les visualiser.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/6a5d7aa32ecc422d55130e14f10cce15/e11df/slide-004.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAADD0lEQVQozx2S21MScRzFNy+gsOuy7O2ngpDcTJNguIObXFxIkKhMKKWMxIBARFBEFEpB0XrqrjFll6mmy0w9NNVM01TTQ/9WO505c+bz8P2+nDkQAgsRBEYQkUAoauHBAPQcVyvpHgAA3Q0okhCLxVg3oAkOMBECC7jjjg6+UNgJw0II0CSgCISQ8zFVmwAftZhmQ/7VbPr5s+ajh3dKxSW3k6lurO4/ulfbqtitRsZhCQV9pwNjHEMWk0GjVvTB1DFUwue1XxhS3/Mw79Pzf//8/PXr+8vnzfNng69fPfvz+8eHd282yisri6lEbOacn11Oz0NDgwOyvl6A9kpRiaCDf0yt0GsHq+urXz5/PHyy/+Lw8WJm/t3bF9++fjp8elC7sV5bz2czMa/TdrdWhnAcQ7uEfFTWhmr4AuyovFevH04l55bzC1evzCTnr+zUVyrVTLmSup6Ongn6i8WFQikWiQRurC5BJIHjYhTBlQiuIEhaLpfYrCYf6/Gxzvhs2GwYdjLm3OLlcj2R35wOT5/KpBIut9PnPtlYy0G4GOMqlciUJEX3SbsN+uEx18iIzeD3npwJB7nUqOTj447semRpKzyXC7As4/WxS6n4we0a1zaBi0W93YAgMIokx71Ov29U2S816gfHXA7WbbeatFbDiclz7OZ2/sH+7lQ4FDo9cXuvXtkoQQCQJC7ql0loQNE06XHaI5N+h81ksxhcjNlq1I86zHaLbiE7vdMobNWWdXrt7OXo/sO76VQcwlCEe6bEopYWiJPZcDzgY1yjlmDAHRhnXC4z67GfYkcmz7BrK3O39oos68mkk82D+7OXpiFM1IV2wZwRRMhrbzeYBi7NTURigamoJ56eSOVCheWLpWI0l5+q1xKl4rW1YuFmpdSoVwu5DAQoisBJkRiXSaU9NBgc0sSuJ6P58uRUsLGbqDfi9d1rO3vJ6mas2dzOLsYHVAqvy+pmTNohDdTB5/F4bZzb21pbW4/QAFNrpCq1RKtVGo0DWp1Cq+vX6VXD/0HaR8BCQWcnt22BVNLzD8/4z+H51tioAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/6a5d7aa32ecc422d55130e14f10cce15/50512/slide-004.webp" alt="Slide n&#xB0;004" width="163" height="102" layout="responsive" srcset="/static/6a5d7aa32ecc422d55130e14f10cce15/50512/slide-004.webp 163w,
/static/6a5d7aa32ecc422d55130e14f10cce15/aeba0/slide-004.webp 325w,
/static/6a5d7aa32ecc422d55130e14f10cce15/001d9/slide-004.webp 650w,
/static/6a5d7aa32ecc422d55130e14f10cce15/97fd0/slide-004.webp 975w,
/static/6a5d7aa32ecc422d55130e14f10cce15/3cea3/slide-004.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/6a5d7aa32ecc422d55130e14f10cce15/19bd1/slide-004.png" alt="Slide n&#xB0;004" width="163" height="102" layout="responsive" srcset="/static/6a5d7aa32ecc422d55130e14f10cce15/19bd1/slide-004.png 163w,
/static/6a5d7aa32ecc422d55130e14f10cce15/d3bcb/slide-004.png 325w,
/static/6a5d7aa32ecc422d55130e14f10cce15/dbb61/slide-004.png 650w,
/static/6a5d7aa32ecc422d55130e14f10cce15/6b691/slide-004.png 975w,
/static/6a5d7aa32ecc422d55130e14f10cce15/e11df/slide-004.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/6a5d7aa32ecc422d55130e14f10cce15/dbb61/slide-004.png" alt="Slide n&#xB0;004" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>En 2017-2018, nous avons commenc&#xE9; &#xE0; vendre notre plateforme, en marque blanche, dans plusieurs pays d&apos;Europe. En Belgique (contenus diff&#xE9;rents, gestion &#xE9;ditiorale diff&#xE9;rente, m&#xEA;me langue). En Hongrie (contenus diff&#xE9;rents, gestion &#xE9;ditoriale diff&#xE9;rente, langue diff&#xE9;rente -- &#xE7;a a l&apos;air simple, mais passer &#xE0; plusieurs langues, &#xE7;a a demand&#xE9; un peu de boulot ^^).</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/8c5df0633f6a140a1a2d2f95b82091c8/e11df/slide-005.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAClklEQVQoz02S2W7TQBiFp3HieB2P7fGMx0vsbHbjpFmcpW1SlaRpSFHVCqImoiuiSAjBA4C45JprLpF4Dl4OB4TUT6PR0Uj/nP9IByiKrGxBgojyRU2WoaFBURQlRYNhC9OAuRUDewZ2mRNi4qsa1k1CiIMMAmxq2RSrOCxodQnavsPqgZ+2m4PRsZcsanuL7uEqSc+zczC7TSevIDIFSVWgrqgI7A8HcVQNNNIwfEUWI6wfuWy+W7+7e/v5y7f16w+V5CTuLJPBZf/4Nu7MdwCoMhxSI8flQJI0gpLLkOvrviqLpqGZBuq1W6vV5ubh08X6Y2e87k02/eOb8fKxM7maNKPvN7N3s9S3DGCaCEFZgAEHY1ExdaSYpt5sRM291HJ2W6OL0fS6vX+Z9Jfjxf3g9OF6uv/768uft+O+7wHLMjM31axDo0oIyzSxsJ9Fd0uVqF9vHtpezQsTHbN68yDuPotd+uv98sfmcD2fbp0xNtxShC0ahp7vu8wmNjVdLxtOLVoCAPC8yHF5vsCLEpQl8TQJVgft+aAFbDtzRq7Dsl8Ys2u1iuvQLAhUlQIvgP/oul4uh2FQ2mu1kmZSLwdisQgYs4iJqoFHKHFcu1z2y6HLGFFVBTyBUjIajRbz2dnz05PZtBL6JS8ECKmWiYih7fyFWIbvUc+hGOtPhzHGaa83HA07nU6mhWJRgRjoCGqaimBWMlkUBULMWi2sR2WbEUlWsEVESQZgh1I62NIfDoeSJHNcrlqpbPexsKXrRuB5PnOwhaO4sdvs+aUwHYzv3zzGjS7PC1lhnax8tdqLs/NuOpwcnVytNqBY5PlCvlDI5/NcnstJkgChrGmKqsi5XC4LwnFcdv9bPhPZkyCqFvU0nf4B9H1dRyPmfbsAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/8c5df0633f6a140a1a2d2f95b82091c8/50512/slide-005.webp" alt="Slide n&#xB0;005" width="163" height="102" layout="responsive" srcset="/static/8c5df0633f6a140a1a2d2f95b82091c8/50512/slide-005.webp 163w,
/static/8c5df0633f6a140a1a2d2f95b82091c8/aeba0/slide-005.webp 325w,
/static/8c5df0633f6a140a1a2d2f95b82091c8/001d9/slide-005.webp 650w,
/static/8c5df0633f6a140a1a2d2f95b82091c8/97fd0/slide-005.webp 975w,
/static/8c5df0633f6a140a1a2d2f95b82091c8/3cea3/slide-005.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/8c5df0633f6a140a1a2d2f95b82091c8/19bd1/slide-005.png" alt="Slide n&#xB0;005" width="163" height="102" layout="responsive" srcset="/static/8c5df0633f6a140a1a2d2f95b82091c8/19bd1/slide-005.png 163w,
/static/8c5df0633f6a140a1a2d2f95b82091c8/d3bcb/slide-005.png 325w,
/static/8c5df0633f6a140a1a2d2f95b82091c8/dbb61/slide-005.png 650w,
/static/8c5df0633f6a140a1a2d2f95b82091c8/6b691/slide-005.png 975w,
/static/8c5df0633f6a140a1a2d2f95b82091c8/e11df/slide-005.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/8c5df0633f6a140a1a2d2f95b82091c8/dbb61/slide-005.png" alt="Slide n&#xB0;005" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>On a continu&#xE9;, avec la Croatie. L&#xE0; encore, contenus diff&#xE9;rents, gestion &#xE9;ditoriale diff&#xE9;rente et encore une autre langue.</p>
<p>Passer d&apos;une plateforme qui diffuse des vid&#xE9;os dans un seul pays &#xE0; la m&#xEA;me plateforme vendue en marque blanche dans trois autres pays europ&#xE9;ens, &#xE7;a signifie plus de contenus &#xE0; h&#xE9;berger et diffuser, plus d&apos;utilisateurs &#xE0; servir, plus de trafic sur l&apos;ensemble de nos APIs et, donc, plus de charge !</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/5fcef88778c8c8e3dbef5e1160ca8f79/e11df/slide-006.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACu0lEQVQozz3Q+09SYRgH8POf5C/F5dw5Fy6BxP0inBtYszX/CLeWW6XJMrW1mU4OIGbN1WxprVkmXqYSKgxFEEScTkVg+W/0HnO9++zd93n2vs+5QGqrqLKKd9oVquusvqa9p4BtCsQuYnYRBxxKgG2S1ibBdhHqWWg9/tHsW2oMpBpPfzWB/qVmf6rVv9waWG4NrjSH15qxdGN2uz6fvfieu5jLXsxsXU5lmslMExpaaYyl/8xsNxf3Llf366vF+tp+fb1YBzlVUDqgTJfq+cPzcu2sUjsrK853S8dbuxUoOpvqHZYHRpNDo4mxiZgsK6JybCIaB6KyQpbjsVh8Mh5PJuKTCVBG1zc2y9Ua1PPkWVvbLRTDtAisgREtisEK9B8Ew5CbjN3A8Nsq9WhsOl+9hHr7XoKbDpfbZDZbrFaK1RMUraOZ/xiaVjaGYViGBUvPEgQRT74vHZ1DkVcjVovF7/MHg0FRFE1GPUNTNEXqdCSO4yo1TBIETekMLKUjCdAzshRFYPMf3zVOqpD89o3X4+aDQUngJUFwO2x+ryckCZLIcxzP8YLL7TEYTBiKqjWwFkHBCI1GMyWP1w8L0GAkwnGcJIWlUJgXxPud4bAkdj96yAc6XE6nz+vt8Hm8LqfFbMFIljWYPE6H/V77p+lE/Wgfej34QqtW4TiBICiB4wiGg5ckcILAMRxDAFpHgBrsCIJoNDB4Mopop2PjV6cVaCTynCYxo0FPU5TJAL6XUgahGEmQepax3DVYzUazyQiCgWUQFPwHZe6H+HijWoAOcpnsxmp1b7uSzxwXdk6KO7W9rWo+U9zeKGc3y7k0CL9XUgfZ9NVJ6fQgt7a48PPb1y+f59ZTKcjjcgnBDs7vk7hAp8iF+ECYByEYFoISHwj4vELA57DbvS53V1js7up8EOLBMR1rQgnmL+hIRX+aeX4zAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/5fcef88778c8c8e3dbef5e1160ca8f79/50512/slide-006.webp" alt="Slide n&#xB0;006" width="163" height="102" layout="responsive" srcset="/static/5fcef88778c8c8e3dbef5e1160ca8f79/50512/slide-006.webp 163w,
/static/5fcef88778c8c8e3dbef5e1160ca8f79/aeba0/slide-006.webp 325w,
/static/5fcef88778c8c8e3dbef5e1160ca8f79/001d9/slide-006.webp 650w,
/static/5fcef88778c8c8e3dbef5e1160ca8f79/97fd0/slide-006.webp 975w,
/static/5fcef88778c8c8e3dbef5e1160ca8f79/3cea3/slide-006.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/5fcef88778c8c8e3dbef5e1160ca8f79/19bd1/slide-006.png" alt="Slide n&#xB0;006" width="163" height="102" layout="responsive" srcset="/static/5fcef88778c8c8e3dbef5e1160ca8f79/19bd1/slide-006.png 163w,
/static/5fcef88778c8c8e3dbef5e1160ca8f79/d3bcb/slide-006.png 325w,
/static/5fcef88778c8c8e3dbef5e1160ca8f79/dbb61/slide-006.png 650w,
/static/5fcef88778c8c8e3dbef5e1160ca8f79/6b691/slide-006.png 975w,
/static/5fcef88778c8c8e3dbef5e1160ca8f79/e11df/slide-006.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/5fcef88778c8c8e3dbef5e1160ca8f79/dbb61/slide-006.png" alt="Slide n&#xB0;006" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Revenons-en au sujet de cette pr&#xE9;sentation : pourquoi et comment avons-nous migr&#xE9; cette plateforme dans <em>Le Cloud</em> ?</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/8e7de78699aca708543a2840fd90d2cf/e11df/slide-007.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACj0lEQVQozyVSWW/TQBC2ypEmcRx7fay9PtZOnCaO7fiI7cRNQh1oU9pSiQohWkCUIoFUhIAXHnhBSAihPkF/AP+VSZFmtbMz+o4ZLeN7vmU5MtZVzWDbqN7iW4KMVV0QMdSJbjU41OAEWdUhOCRDF15QvN1oMYtqFSX5wI+j0bjT84jVlQjVqUtot7sFzLFMbKSakgbFHnQV3UHYzMrq7MUbJgpT3w/CMBqFUeDDFRsmFZBsUqfT7Q2HYafjKjJmWe5Orb4Bp9m6u9kot6vLdx+YZTYBKc2wnZ6nGrZBO6YNCgDpd92B3dny/agsyjTJt4vtJM4UYvGyprtBdzRlvCgrimmWTUZROpnOoijt9YdbAz8IIqzpMtZgfkJMXbdMk1LLsUyKsTYIMy+dMV6QToo10vdHSTxusu3NOsu1hTaPuJv4n4iiLElYQBISZQGJq93D09PXzCBIpsU0TfPpdDYe52EYu25flBQIHsm8IImiAhgBEkkBFkg4Xgziyd7BCYN1WyNmmmRxnFLq9N2+YVhgDBTw2jMBTRDnBbHVRs0WeFAQktJ8dn//MYMtVyPGYr4zmy1s6gAxj6Q2L4KOoqgIgVtFkVWuvcZDCyhgqH44Pjh+yhzlBcvDFIqmklu1eq3RagsS+ASHKiYYE8gBA0Q6MYDdNCyeF08enVz/uGK+rh5sNNjaZpPlBLTWRIAGAKznRgRpmu5Qh1o2IA3dcu2OS+3nT56dnb5i3h4eW146Lavlcr8od6rl6uLlxfX3X3+vfv/59nNZPdzdO/p8+fHL+0/nZ+fDKA8gktKLy1G2YCRMdINC8KJCDFrmk8k4r8r57nxnda8qkgw2Egfh/vzePJ/A5+ORAt+bXS8F/wMyT28c2gmVOwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/8e7de78699aca708543a2840fd90d2cf/50512/slide-007.webp" alt="Slide n&#xB0;007" width="163" height="102" layout="responsive" srcset="/static/8e7de78699aca708543a2840fd90d2cf/50512/slide-007.webp 163w,
/static/8e7de78699aca708543a2840fd90d2cf/aeba0/slide-007.webp 325w,
/static/8e7de78699aca708543a2840fd90d2cf/001d9/slide-007.webp 650w,
/static/8e7de78699aca708543a2840fd90d2cf/97fd0/slide-007.webp 975w,
/static/8e7de78699aca708543a2840fd90d2cf/3cea3/slide-007.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/8e7de78699aca708543a2840fd90d2cf/19bd1/slide-007.png" alt="Slide n&#xB0;007" width="163" height="102" layout="responsive" srcset="/static/8e7de78699aca708543a2840fd90d2cf/19bd1/slide-007.png 163w,
/static/8e7de78699aca708543a2840fd90d2cf/d3bcb/slide-007.png 325w,
/static/8e7de78699aca708543a2840fd90d2cf/dbb61/slide-007.png 650w,
/static/8e7de78699aca708543a2840fd90d2cf/6b691/slide-007.png 975w,
/static/8e7de78699aca708543a2840fd90d2cf/e11df/slide-007.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/8e7de78699aca708543a2840fd90d2cf/dbb61/slide-007.png" alt="Slide n&#xB0;007" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Historiquement, notre plateforme &#xE9;tait h&#xE9;berg&#xE9;e <em>on-prem</em> : nous louions une salle dans un datacentre parisien. Dans cette salle, nous avions des serveurs, que nous avions achet&#xE9;s et que nous amortissions sur trois ans (d&apos;o&#xF9; l&apos;importance de choisir les bonnes machines). Nous avions aussi du mat&#xE9;riel r&#xE9;seau pour les connecter. Et des frais suppl&#xE9;mentaires, pour l&apos;&#xE9;lectricit&#xE9;, la climatisation ou le personnel qui allait racker un nouveau serveur ou changer un disque dur ou installer et configurer des serveurs et des services.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/fa0922df2eb320fe596a7821c693efcb/e11df/slide-008.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACrUlEQVQozzWRy08TURTGZyNInbbzuvO6c+fV6UynLdN3p52hpQ+aRkBEhUpbIIBY1IqoxKiJutCY6IKQuCBuTNy78U/0VuO9v8W5i/N937mH4NyAS4e0G1JOQKdm4AITd+ox+/8zFTCpkE2HXHpJWGyKXpPPhMCtE7nRu2RrYHVHVndstEZ6e2h1RlZnmOnvZfu7weahv3FQWN1zertme2i0d+yVsbuy03x60f7wi8hvHFtJ28nmcsXyUhj61cpSrVIt5peDarNe9kuFWqXUqFeDmm+Ypmnorm2Zqnx09vbTj99EsP/GDlaTy/fWtsYvp5O90aDT6ZhONul6ZmpRdzzDzae8SrYc5qoNP1hebnX8oHE0ffX18ooYPjoPWr3+rbuDwf390U6/161WKrbjqJoOFVVRVKTqcIYpIwMiHWkmVI31rf3nrz8S08cnmbQb+OVKKV8q5ExDi0RIkoyRZJym2X9QNMdxvCSKEEIsJ8nK2en06tsl8eTkAVJkO2EYKhR5ADget83NL8QpBtcYHgg8ECVRRgpSZ0fDApPJw89fLnDzsYaUlJ3QEVQVqEA5HqfIaFyWZRVHxiCEFEWWoCjKgiBiOBa0ujdHh8+Ig/E2gthZ1xDUFKhrSjxOMwyHbTTd0IyEYSaMRFI3Ld2c1fhiuTtbw5MX74nhZl8WeUtHCEqSICiyDDjA88LMB4MNJQiEWaHqJlbBe9V1Y3J6fvn9J7G20uQ5Fo8t4UR4QAAoionGZskjN2KRSBTPf21uYf56hIxS+OdYINKckCv76/0GsX17tddqtBtBM6wFfqVaKhRznpfNOLadSFhWwsKrUjRDUs2knfI8r5j3ilkzb4OyKxA4LZ4ZSuJfBFkUJBEHYAHHcCzNMjRDU4ClAWAkgUUyy1AkSy1IHMnR5B+amIamj6TYTgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/fa0922df2eb320fe596a7821c693efcb/50512/slide-008.webp" alt="Slide n&#xB0;008" width="163" height="102" layout="responsive" srcset="/static/fa0922df2eb320fe596a7821c693efcb/50512/slide-008.webp 163w,
/static/fa0922df2eb320fe596a7821c693efcb/aeba0/slide-008.webp 325w,
/static/fa0922df2eb320fe596a7821c693efcb/001d9/slide-008.webp 650w,
/static/fa0922df2eb320fe596a7821c693efcb/97fd0/slide-008.webp 975w,
/static/fa0922df2eb320fe596a7821c693efcb/3cea3/slide-008.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/fa0922df2eb320fe596a7821c693efcb/19bd1/slide-008.png" alt="Slide n&#xB0;008" width="163" height="102" layout="responsive" srcset="/static/fa0922df2eb320fe596a7821c693efcb/19bd1/slide-008.png 163w,
/static/fa0922df2eb320fe596a7821c693efcb/d3bcb/slide-008.png 325w,
/static/fa0922df2eb320fe596a7821c693efcb/dbb61/slide-008.png 650w,
/static/fa0922df2eb320fe596a7821c693efcb/6b691/slide-008.png 975w,
/static/fa0922df2eb320fe596a7821c693efcb/e11df/slide-008.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/fa0922df2eb320fe596a7821c693efcb/dbb61/slide-008.png" alt="Slide n&#xB0;008" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Le d&#xE9;ploiement de notre projet &#xE0; l&apos;international a eu un bon impact sur notre h&#xE9;bergement. Nous stockons de l&apos;ordre de deux tera-octets de vid&#xE9;os suppl&#xE9;mentaires, <strong>tous les jours</strong>. Vous imaginez racker deux disques dur chaque jour ? Vous allez vite d&#xE9;border de votre salle serveurs ! Et je ne parle m&#xEA;me pas des sauvegardes&#x2026;</p>
<p>Au niveau du trafic et de la charge sur nos machines, nous avons en gros fait <strong>fois deux</strong>. Deux fois plus de requ&#xEA;tes sur nos APIs. Deux fois plus de consommation CPU.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/62634cc7d03b1634f2f016f733b15ad7/e11df/slide-009.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAB8ElEQVQoz6WSbWvTUBTH00qxss6+aT+Ae9OPZNukq0J91a6tOJjvxQ3BWREtgt1DNwQdTmVuDdZ1LTZDmtJU7LZkwgQfmK51bbM8Jze9u4ngC0VR9uPP4Zz/uYfLfcCwk+Byudxu9xkbt81pmx8O6p76Aw6HwxoeHj7r9Xr9fj+KQ0Me5Hg8Hp/Ph0qn0/m3nScmro6NJZPJFCKdSltJMpVOX47H47HYpUQikfoN1L8yPh4IBDAIoWEY8H8AgoRiNBq1hvsfWKCqmix137OoVPkeUBRr1QACAEwITUMfQKh8+6rLsjkYdOgaaoZxHOvQ9eq1zPee8Cb7aOc5edju16bnDzhub5t9V6rrAOw+W+7vbvV7SuXew87Hz/Xl0tsHi9ZwOISxT8qrk7nC7dm1yXny7uPy9fvkrXwxM7s6PbdyM09lZwo3crWFJSq7uDKVK92ZIafy65m5T682cCKM8fvt5gbFkBWu3mgVq62XVbbWaBapbYre2aSbT9c5mmHWKkzhNUc3mi/KW5s0U6L2W3tEJGKdmT8SRUUTRVVQVFHVBFGWFFWQFBFJ062oaJLty7re7vJfDg6PNDMYDFnDigE0E6I7sfQz+UW2j16Fl9ROV9QBxHECi16MhYlRPBL9R4Vw4nwQJ0YvnBsZOdHXPgYRTpbYA24YQwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/62634cc7d03b1634f2f016f733b15ad7/50512/slide-009.webp" alt="Slide n&#xB0;009" width="163" height="102" layout="responsive" srcset="/static/62634cc7d03b1634f2f016f733b15ad7/50512/slide-009.webp 163w,
/static/62634cc7d03b1634f2f016f733b15ad7/aeba0/slide-009.webp 325w,
/static/62634cc7d03b1634f2f016f733b15ad7/001d9/slide-009.webp 650w,
/static/62634cc7d03b1634f2f016f733b15ad7/97fd0/slide-009.webp 975w,
/static/62634cc7d03b1634f2f016f733b15ad7/3cea3/slide-009.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/62634cc7d03b1634f2f016f733b15ad7/19bd1/slide-009.png" alt="Slide n&#xB0;009" width="163" height="102" layout="responsive" srcset="/static/62634cc7d03b1634f2f016f733b15ad7/19bd1/slide-009.png 163w,
/static/62634cc7d03b1634f2f016f733b15ad7/d3bcb/slide-009.png 325w,
/static/62634cc7d03b1634f2f016f733b15ad7/dbb61/slide-009.png 650w,
/static/62634cc7d03b1634f2f016f733b15ad7/6b691/slide-009.png 975w,
/static/62634cc7d03b1634f2f016f733b15ad7/e11df/slide-009.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/62634cc7d03b1634f2f016f733b15ad7/dbb61/slide-009.png" alt="Slide n&#xB0;009" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Deux fois plus de consommation CPU, m&#xEA;me si nous avions beaucoup de marge avant de vendre notre plateforme dans plusieurs pays, &#xE7;a commen&#xE7;ait &#xE0; devenir difficile. Certains soirs, nous touchions la limite de capacit&#xE9; de nos machines !</p>
<p>Le graphe reproduit ici montre la consommation CPU de notre hyperviseur de production <em>on-prem</em> : &#xE0; droite, une soir&#xE9;e o&#xF9; nous sommes mont&#xE9;s &#xE0; <strong>97% de CPU consomm&#xE9;</strong>. &#xC7;a ne laisse pas beaucoup de marge !</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/25bcdcd26b01bf29334d82730c974297/e11df/slide-010.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAB7UlEQVQoz6WSO0/bUBSAE8d1p7BmSaQwJBlae2JrBlRoy0OhaWmH/IP2N3ToCFX/ATbg0KRpshQQ4mVR52EiVXZearDJ89rXjziFKQNS1SE1CSWCoUP5hnvPubqfzrlXx2a7C3a7/d4ADMMuNxRFHQ4Hig5PEAT5lzzmHBv3jnu9Xr/fb61ut9vlcnk8Hp/PZ6VOp/O6xpCblW32O3UeDAa3tjYTic+pVIqmNyhqjSSp1dX1lRWSpqPR6AZFkrFYLJlMWhfi8bjV17CXSzkSifT7/VOpKlaLjRrfbPDSCd9qfN/frW5/rYEWXxCK5WK5Uqr8qJTNjk4QhGVdfUcoFOr1eocHx9H1by9ftN++EZeXeIrk5mYVgujSaznmkGGP9tmjvd2dg1JRxPGHI/nV4uvfvy4+LLWfz5tTwe7ko+6z6bPZp2dzj42ZSWNh3vy4XE18Er7EhPfvpO1NbWLiwUheDC/IYglqeqvV1NW6CusyaKgq0GBdhzVFAZIon1TBqaTWa1CWFRzHR3I4HC4IhU6nAwCAUIWqCiHUNL3ZbANZMU3z/PynrquapgDQMgzjxpunnkzvMHsCL6TT6Uwmw3FcLpfLZrMMw7Ase8xx+Xw+OyA9IBAIjGQHgtzHrhgOFnYr/TuCw/D2qPwffwAv5/qCIlZqoAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/25bcdcd26b01bf29334d82730c974297/50512/slide-010.webp" alt="Slide n&#xB0;010" width="163" height="102" layout="responsive" srcset="/static/25bcdcd26b01bf29334d82730c974297/50512/slide-010.webp 163w,
/static/25bcdcd26b01bf29334d82730c974297/aeba0/slide-010.webp 325w,
/static/25bcdcd26b01bf29334d82730c974297/001d9/slide-010.webp 650w,
/static/25bcdcd26b01bf29334d82730c974297/97fd0/slide-010.webp 975w,
/static/25bcdcd26b01bf29334d82730c974297/3cea3/slide-010.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/25bcdcd26b01bf29334d82730c974297/19bd1/slide-010.png" alt="Slide n&#xB0;010" width="163" height="102" layout="responsive" srcset="/static/25bcdcd26b01bf29334d82730c974297/19bd1/slide-010.png 163w,
/static/25bcdcd26b01bf29334d82730c974297/d3bcb/slide-010.png 325w,
/static/25bcdcd26b01bf29334d82730c974297/dbb61/slide-010.png 650w,
/static/25bcdcd26b01bf29334d82730c974297/6b691/slide-010.png 975w,
/static/25bcdcd26b01bf29334d82730c974297/e11df/slide-010.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/25bcdcd26b01bf29334d82730c974297/dbb61/slide-010.png" alt="Slide n&#xB0;010" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Sur certaines applications, m&#xEA;me, il nous est arriv&#xE9; de plafonner &#xE0; <strong>100% de consommation CPU</strong> pendant quelques dizaines de minutes. Pendant ce temps, vous vous en doutez, l&apos;exp&#xE9;rience utilisateur n&apos;&#xE9;tait pas au top :-(</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/2170cd8d3652352a1409fc3a5be065b9/e11df/slide-011.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAB2ElEQVQoz6WSzWsTQRjGNxFW3Ry6Hpqe7SX/kDabNnYVrJeEbMDSgIV2U02LFL0VjwrehELxEks+2u2GxFQhaV0jFvsB1gQlH23W/ZqZ3elMikep0ofnffnNCw/vwAzDXEYsy16juk6K4zgCLHs1EAiQud/vv/J3+Xw+hoSGh4M8f4Mf4gfAc1wgGBwh/eLNqVQqIUlSMklM4Q/HYvGpqQexeFxKnk+lxMAUEomH09OhUIjBGEMI8f8IIUS6KIo0bDuO63oIuQh5CCLX86gxpqbsnjNC0Go1zdaxA2k4Igg0bJx0bLPvIh2ZbYy93t4X/fjI6n7Xu03j149Ordr+ttdrHraq2wdv1g5fvm4qJfi1Ebl1m2kVswVZzmeeV5efqBn544tnxZn53FxmMz2vLMhKelF9tFScXSynM8rcU1VeVpZWNmYeN1ZehcfCTPfzfnU1W19Xa28L9exWfS23k68Q196pO7nSbnbrU76sFcraeqmx8V4rVjT1w+5m5WBbE0iYXFu3bAtAC0ILABMi03ZMBxC2HGACaAyOBEi3Aez0jZ/dUx16YSFCwxZEjosdD4OLTF6lb9jt3m/g4ololBHv3R+PTk7cEf/Rwnh0jNTk3Zujo5f62meZcJpBbmaAxwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/2170cd8d3652352a1409fc3a5be065b9/50512/slide-011.webp" alt="Slide n&#xB0;011" width="163" height="102" layout="responsive" srcset="/static/2170cd8d3652352a1409fc3a5be065b9/50512/slide-011.webp 163w,
/static/2170cd8d3652352a1409fc3a5be065b9/aeba0/slide-011.webp 325w,
/static/2170cd8d3652352a1409fc3a5be065b9/001d9/slide-011.webp 650w,
/static/2170cd8d3652352a1409fc3a5be065b9/97fd0/slide-011.webp 975w,
/static/2170cd8d3652352a1409fc3a5be065b9/3cea3/slide-011.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/2170cd8d3652352a1409fc3a5be065b9/19bd1/slide-011.png" alt="Slide n&#xB0;011" width="163" height="102" layout="responsive" srcset="/static/2170cd8d3652352a1409fc3a5be065b9/19bd1/slide-011.png 163w,
/static/2170cd8d3652352a1409fc3a5be065b9/d3bcb/slide-011.png 325w,
/static/2170cd8d3652352a1409fc3a5be065b9/dbb61/slide-011.png 650w,
/static/2170cd8d3652352a1409fc3a5be065b9/6b691/slide-011.png 975w,
/static/2170cd8d3652352a1409fc3a5be065b9/e11df/slide-011.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/2170cd8d3652352a1409fc3a5be065b9/dbb61/slide-011.png" alt="Slide n&#xB0;011" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Nous avons un pic de charge sur nos applications tous les soirs aux environs de 21h. Mais, en plus des variations de trafic tout au long de la journ&#xE9;e, nous avons aussi une saisonnalit&#xE9; sur des p&#xE9;riodes plus longues. Par exemple, pendant les deux mois de vacances d&apos;&#xE9;t&#xE9;, la charge est assez basse. D&#xE8;s la rentr&#xE9;e d&#xE9;but septembre, &#xE0; droite du graphe, elle remonte !</p>
<p><em>on-prem</em>, nous payions pour tout l&apos;espace sur ce graphe. Y compris pour l&apos;espace en blanc, les serveurs allum&#xE9;s, qui consomment de l&apos;&#xE9;lectricit&#xE9;, mais qui ne font <em>rien</em> pendant une bonne partie du temps :-/</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/fe10d57cb9cc2dfd278ed3e894880546/e11df/slide-012.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAC8UlEQVQozzWRyWsTARTG5ywidQuamk7SJtNOktn3zppJZjJZxq5qqmnSLe001k7aUhSqVmqlVG0rUrBi6wJCFRHqQUEFD6IiongQBM9603/AU50ehB8fvMN73/feAyA2iUgWoWZJLcskcnwyL6bysplXTVu37KRlGxk7nT3qYWZ3StXIa0ZOVg1O1IDu6RtmwcmXa239btdg7USl1jM84VFyJstOrc9xB0fdStUdqbpO1R1wxnsrZ072OSur9x8/fQ0YxRrLMCTDoxiJEhSGExzDcJyAkXQADAUawCC4Q1MIhBqD4VCwMRT0+w8vL1z59uEtYFQuIWoble4RMgWzq3S8p1Q6dao6UB4sFUf7e88MldxKedLpnxodmK4OTZ8enh4bHh8qf32ztf37OyAVJjglZbadMI8eM/MdSsJgWD6lypYu22bCNnU7/R8rZVuGbSVzZuLh9Qt/vrwAmA4nEIJ4JSkqSSiKIAgaR1AcQQQalzhS4iiRo0WeFXmuVfDgVZHHEXimN/f3x1tA6B5jBUnWLTlhylpKSxoYQZE4KrOkwtNqK7ODyKmioEqCJgmKwPj27n108/L2z89AceB0IAyb2XbdyObbuhRNRzFMFVhdZDWB9vplnvb8dyIwhMSSDBaPBMEnt67++vgSKA27cAz1VlV1U0mYuUzGMlK6llBkBcdxzJuEYhRB0ATOEZhAYa0UTsSjq/MX329tAlLnCEmxtKBijEhyXiw9ijFgONrYEm+C494V4BgChSMNfr/3txgUoZBYFArPn516cnsNwM3iHl/9wWCLD4R8DR4Rf1M0CBNgMwZFURLH0VgMj8Eo3OxpvKU51gJDTeHzNXd9aQkQCuf5wgx/ckYszWmDC2lnMV2Z4/NlJtVdGTv3avPOu6f3nj9Y8/TT1r2vzzZe3F1Zvza/sby0ODsL7GvAfGG2rh7yhan6uAxiyoFAZNfuPXX7fYeOhBiaLnZkOi39WDbZmdb6OoxuS21PyTJLef7/AIyJ5CyWQjY5AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/fe10d57cb9cc2dfd278ed3e894880546/50512/slide-012.webp" alt="Slide n&#xB0;012" width="163" height="102" layout="responsive" srcset="/static/fe10d57cb9cc2dfd278ed3e894880546/50512/slide-012.webp 163w,
/static/fe10d57cb9cc2dfd278ed3e894880546/aeba0/slide-012.webp 325w,
/static/fe10d57cb9cc2dfd278ed3e894880546/001d9/slide-012.webp 650w,
/static/fe10d57cb9cc2dfd278ed3e894880546/97fd0/slide-012.webp 975w,
/static/fe10d57cb9cc2dfd278ed3e894880546/3cea3/slide-012.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/fe10d57cb9cc2dfd278ed3e894880546/19bd1/slide-012.png" alt="Slide n&#xB0;012" width="163" height="102" layout="responsive" srcset="/static/fe10d57cb9cc2dfd278ed3e894880546/19bd1/slide-012.png 163w,
/static/fe10d57cb9cc2dfd278ed3e894880546/d3bcb/slide-012.png 325w,
/static/fe10d57cb9cc2dfd278ed3e894880546/dbb61/slide-012.png 650w,
/static/fe10d57cb9cc2dfd278ed3e894880546/6b691/slide-012.png 975w,
/static/fe10d57cb9cc2dfd278ed3e894880546/e11df/slide-012.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/fe10d57cb9cc2dfd278ed3e894880546/dbb61/slide-012.png" alt="Slide n&#xB0;012" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Migrer vers <em>Le Cloud</em>, c&apos;est une r&#xE9;ponse &#xE0; un besoin business. Nous avons plus de clients et plus de charge, nous souhaitons y r&#xE9;pondre.</p>
<p>Nous voulons aussi que nos applications r&#xE9;pondent bien en cas d&apos;&#xE9;v&#xE9;nements sp&#xE9;ciaux, comme une &#xE9;mission qui rencontrerait plus de succ&#xE8;s que pr&#xE9;vu ou un match de football -- y compris lorsqu&apos;il s&apos;agit d&apos;un match entre deux pays h&#xE9;berg&#xE9;s sur notre plateforme (comme un match France / Croatie, je crois que le screenshot &#xE0; 100% de CPU pendant une petite heure vu un peu plus haut, c&apos;&#xE9;tait le soir de ce match).</p>
<p>Migrer vers <em>Le Cloud</em>, c&apos;est pour nous un moyen de gagner en souplesse et en &#xE9;lasticit&#xE9; sur notre h&#xE9;bergement.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/035c5fb7fbe566de0ff707d48e5c17ba/e11df/slide-013.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAB6ElEQVQoz7WSvW/TQBjG78Pfds6xjRvXdpQm/nZkxzX0I1XaQFEhA20lKBUbBZGFoSwI0Yl/ACGWioGFBYm9axf+M85nYIIJ8ehkvSf7d8/zvmcA/kUYY0EQeK4Rz0S3CKH2LQ/hUFF4CGTNFWRD4BSz00cArimaynHAMIw1Js91B4NBEidFUaiq2sKuKH/fXQwQmi4+hdVZas/Oj69kgK6nO7dtG1ATWZZFUWz8eZ4WhBAIYQsTAT/NdMKD0L/vmutaV02qCYZ435/1FBtQJo7jul5nq97YuDUcDukRiPG+zl2fuy4Bh1uXs+hlNwOLizGHpBd3rqLVOTuekKqqyklJV57nYRh6nqex5Donno0mGhYO0hu1r4pkkJQPEEbZdNQxVUDnRK3SNKVtZ1lGC8dxaC9tcofvfJ0sbah/eNhZbgJp5d7e4Rc6xq3X426gAUkSadqybDzzcWNrWRbF2q4NCb3a6+oS2I5OYn86ksizcFeAaDmKAlVrBkaBIAjo0zTN9sJ+w6sq+nbqOCqY1+/y+LSWrff5ExnAz1m0qZO//wAMFjSuPgmwhp73bs6NOHHA27uEx+JB8WaFhOyzXxfzB5hw28sEE3zRnx/1qqqPLx85PJYe73z0rAL8X7WxmnSs+rllwX4AQhk/KXC9w0QAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/035c5fb7fbe566de0ff707d48e5c17ba/50512/slide-013.webp" alt="Slide n&#xB0;013" width="163" height="102" layout="responsive" srcset="/static/035c5fb7fbe566de0ff707d48e5c17ba/50512/slide-013.webp 163w,
/static/035c5fb7fbe566de0ff707d48e5c17ba/aeba0/slide-013.webp 325w,
/static/035c5fb7fbe566de0ff707d48e5c17ba/001d9/slide-013.webp 650w,
/static/035c5fb7fbe566de0ff707d48e5c17ba/97fd0/slide-013.webp 975w,
/static/035c5fb7fbe566de0ff707d48e5c17ba/3cea3/slide-013.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/035c5fb7fbe566de0ff707d48e5c17ba/19bd1/slide-013.png" alt="Slide n&#xB0;013" width="163" height="102" layout="responsive" srcset="/static/035c5fb7fbe566de0ff707d48e5c17ba/19bd1/slide-013.png 163w,
/static/035c5fb7fbe566de0ff707d48e5c17ba/d3bcb/slide-013.png 325w,
/static/035c5fb7fbe566de0ff707d48e5c17ba/dbb61/slide-013.png 650w,
/static/035c5fb7fbe566de0ff707d48e5c17ba/6b691/slide-013.png 975w,
/static/035c5fb7fbe566de0ff707d48e5c17ba/e11df/slide-013.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/035c5fb7fbe566de0ff707d48e5c17ba/dbb61/slide-013.png" alt="Slide n&#xB0;013" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>En partant dans <em>Le Cloud</em>, nous visons aussi &#xE0; exploiter des services manag&#xE9;s au maximum. Nous ne voulons plus installer, configurer et tenir MySQL &#xE0; jour.</p>
<p>Nous utilisons des services manag&#xE9;s pour <em>plein de choses</em>. S3 pour stocker des fichiers, RDS pour des bases de donn&#xE9;es relationnelles et DynamoDB pour du cl&#xE9;-valeur &#xE9;volu&#xE9;. Elasticache/Redis pour du cache, Route 53 pour les DNS&#x2026; Bref, plein de services manag&#xE9;s. Et on a le choix : il y en a plus de 160 chez AWS.</p>
<p>Nous pilotons ces services manag&#xE9;s avec Terraform et chaque projet g&#xE8;re son infrastructure, j&apos;y reviendrai dans quelques minutes.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/3f8870b8c905a5f8c381d748075ae5de/e11df/slide-014.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABO0lEQVQoz2NgoAQwMzOzsbEBSVY2NhZWEACxWVlZwAAoBWFj1ywkJKSsrCwrJ6eppaWoqKiqpiYjI6OgqCgHBioqqkBBBQVFoCkMjIxA9YxgEgqYmJg4OTk5OIAEJ9BOuDgjGCCzgTxWZiYUm7m5ufX1DVRUVYE2S0lL8/PzCwgIgOxBBRwsTI5+QQGpuWoqynwCggibgc6zsLRQUVERExOTkpICkhwcHHA7gSQPB1tQTpnZjJ1m3cvz1xxMb+iASIIIUVFRoLVKQK+rqLLDtCFr5uPiiKpqdVt2VGPmfpeyNiVFRYj/GYCBDHQtMMCApKKSEh8fH3KoQBiSUtKTpkw5dPbixoPH29rbHZ1dgO4lHJEQRbr6+tX1jQVFxeUVlS1dPX4BgXApeGAyokQDNsBIZmICmcvIMFgAAFjBLxYBLarsAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/3f8870b8c905a5f8c381d748075ae5de/50512/slide-014.webp" alt="Slide n&#xB0;014" width="163" height="102" layout="responsive" srcset="/static/3f8870b8c905a5f8c381d748075ae5de/50512/slide-014.webp 163w,
/static/3f8870b8c905a5f8c381d748075ae5de/aeba0/slide-014.webp 325w,
/static/3f8870b8c905a5f8c381d748075ae5de/001d9/slide-014.webp 650w,
/static/3f8870b8c905a5f8c381d748075ae5de/97fd0/slide-014.webp 975w,
/static/3f8870b8c905a5f8c381d748075ae5de/3cea3/slide-014.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/3f8870b8c905a5f8c381d748075ae5de/19bd1/slide-014.png" alt="Slide n&#xB0;014" width="163" height="102" layout="responsive" srcset="/static/3f8870b8c905a5f8c381d748075ae5de/19bd1/slide-014.png 163w,
/static/3f8870b8c905a5f8c381d748075ae5de/d3bcb/slide-014.png 325w,
/static/3f8870b8c905a5f8c381d748075ae5de/dbb61/slide-014.png 650w,
/static/3f8870b8c905a5f8c381d748075ae5de/6b691/slide-014.png 975w,
/static/3f8870b8c905a5f8c381d748075ae5de/e11df/slide-014.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/3f8870b8c905a5f8c381d748075ae5de/dbb61/slide-014.png" alt="Slide n&#xB0;014" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Notre plateforme est compos&#xE9;e de plusieurs dizaines de services, plus ou moins &quot;micro&quot;, principalement &#xE9;crits en PHP. Nous souhaitons les packager et les d&#xE9;ployer en isolation : quand je d&#xE9;ploie une application A, cela ne doit pas avoir d&apos;impact sur notre application B.</p>
<p>Nos d&#xE9;ploiements doivent &#xEA;tre reproductibles. Si des <em>pods</em> de l&apos;application B se lancent automatiquement &#xE0; 21h pour r&#xE9;pondre &#xE0; un pic de charge, ils doivent ex&#xE9;cuter la <strong>m&#xEA;me</strong> version de l&apos;application que celle que j&apos;ai d&#xE9;ploy&#xE9;e &#xE0; 15h. Des conteneurs Docker r&#xE9;pondent bien &#xE0; ces besoins.</p>
<p>Aussi, si nous ex&#xE9;cutons <code class="language-text">nginx</code> dans un conteneur et <code class="language-text">php-fpm</code> dans un autre conteneur, nous restons sur des concepts familiers pour nos d&#xE9;veloppeurs. Au lieu d&apos;avoir des applications qui tournent dans des <em>serveurs</em>, elles tournent dans des <em>conteneurs</em>, mais &#xE7;a ne change pas grand chose, fondamentalement.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/7dee8aa8aa6247ceff87444ac5600948/e11df/slide-015.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAC/ElEQVQozzWSW1MSARzFN11YVkDZ5Sq4C8uyd9hFFhYMcVbAW6IhQgiiYuBYeClIS7s5mTPds0mdppkee+yll3rrpZdm+g59hj5Cy0MzZ87bmfOf//kBoAMHXQQ4SOqGAjqMgby8wSfA/hAckIzUsImRzVxsgItZuBjKRBFqGAlIiD+I+AWE4AEoWYDGlwyTq/Dshmlh21LqoJV7ttVHrsZTz40X+M4p2T5n9j5wex9CnTNp961447nYOBbX7odq+wCUmINSRX26op9cg3ObffkdU+mOpXpoX3vsaJwM3Xzh33nLtM+6uv2e3z0VWy9DzePgyqFQuQPo4jnDaAHJVpy5def8BlHaYpfbzPp9YuMJu/XM03qN7b7TygOdC/buR03Bzrm0/SbUOOaq+8AgJbCCmL2cWMio08mRm5XSo9bGk8723dbmfqMu5+u+uTq70JSWWvbxa3a16FQXncmcJ1NmagfAmMTFuIAiMFGWigtMKiLNpMcKauoqz5ai8rVEfGwqxyYzmJQwaO/EaM31Ll9/MEmuPQTSSiTKMzLP0j48zjMxhlREITsSn5Mjxag8k56MT1+leLHXw8BEqLuCX9Ty/WEVrz8GMAzvtzl1qAsYcECoy+FwUpjb58UjFKkQpFdJm3Cap0gryfcMMXqc04aEMMYcVt3rRwBgtgJGBLK6bV4KxSmUYOxubNCKxGk/pgXsmAm1J+WwMKyglGijRRijtbONwaSrfgRA7kCvy2/lFTI5wWXmhmfL3OSikKsoE7nNcmH3+sqt9dqnVyf55jY3v0pMFK2Xr/SF1YGxgn3lAWAMpuBwVidP9yqzPSP5nlQJzNR0M01wvDo/OvL11dHvzxd/fn6PNA/A/C1LeR+pHqDLh0j1nqW8BxiFUVgaN8hThsQ8nFqE1TKcrfVN1ftymwQffr11/e+vbz++fB5Y2DEV2/3FtrnYMXe9bVq8DegtNh3iBNFB0OYG7VgXdae3S7snAFlsQR9WnlKVWPSSO6DHaA3+/6J1Q/Q/z7ewGnw0mVAAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/7dee8aa8aa6247ceff87444ac5600948/50512/slide-015.webp" alt="Slide n&#xB0;015" width="163" height="102" layout="responsive" srcset="/static/7dee8aa8aa6247ceff87444ac5600948/50512/slide-015.webp 163w,
/static/7dee8aa8aa6247ceff87444ac5600948/aeba0/slide-015.webp 325w,
/static/7dee8aa8aa6247ceff87444ac5600948/001d9/slide-015.webp 650w,
/static/7dee8aa8aa6247ceff87444ac5600948/97fd0/slide-015.webp 975w,
/static/7dee8aa8aa6247ceff87444ac5600948/3cea3/slide-015.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/7dee8aa8aa6247ceff87444ac5600948/19bd1/slide-015.png" alt="Slide n&#xB0;015" width="163" height="102" layout="responsive" srcset="/static/7dee8aa8aa6247ceff87444ac5600948/19bd1/slide-015.png 163w,
/static/7dee8aa8aa6247ceff87444ac5600948/d3bcb/slide-015.png 325w,
/static/7dee8aa8aa6247ceff87444ac5600948/dbb61/slide-015.png 650w,
/static/7dee8aa8aa6247ceff87444ac5600948/6b691/slide-015.png 975w,
/static/7dee8aa8aa6247ceff87444ac5600948/e11df/slide-015.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/7dee8aa8aa6247ceff87444ac5600948/dbb61/slide-015.png" alt="Slide n&#xB0;015" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Malgr&#xE9; tout, les conteneurs, <em>c&apos;est pas si simple</em>&#x2026;</p>
<p>D&#xE8;s qu&apos;on commence &#xE0; travailler avec des conteneurs en production, on se retrouve face &#xE0; des questions comme <em>&quot;comment toujours avoir <code class="language-text">nginx</code> (qui re&#xE7;oit les requ&#xEA;tes HTTP) et <code class="language-text">php-fpm</code> (qui effectue les traitements requis pour y r&#xE9;pondre) qui tournent ? Et comment les faire communiquer l&apos;un avec l&apos;autre ?&quot;</em>.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/7e582d0b1764bdf072ab320120f0c2ba/e11df/slide-016.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAADIklEQVQoz2PgEpfnk1YRlNcQUdEVVzeW0jaX07OU17eS07eS0bUCcoXVrYRVjIWVtPnlNfhkVHkllbjE5DiEpdgExBiUPBK0w/JNUxqcCif61y2I7V6TNWVr4azdOTN2Jk1cH925IqG92reqwSSt1yipTieqVC0wS9E9XsY2WMzIlUE9INMwvsour9evbn5y37qKeXvbVx7uW39x+qYVx49YnDh2fv8ByejJTkbVPbbZfYbJDdqRJar+GQou0VKWvgx6sRVWub1edQsSJm6uWHSof+PZefuurD38dMqZte6nOVW3yjG3LfD1TgyrL7KrXmxVMNE4rUUnuhyoX84hjEHG0kvRLkDbI8YiODUovTyruqOoqaeyaVJMS6Fss5xQvYhahK+/rZN7UqR+SKq8XbCcjZ+kibOUuYeiWywDn7wmMBhElLSl1PS0TKz9QiJ9g8MDI2KDQwJj/I0sfAyiPdR9/Cw9PCxltY15ZdT4ZNW4xGQF1QyVvJIYhFQNhZT1JLXM5PUsFfQsrVz9AqMSIhPSPEOj7N1M/Rz1fB0tPH2N5LUlFdR1BFQMBZX1eGVUhTXNlL2SGfgVtPhkVYWVdMRUdJX0zIxtnQPCYwLDY+1dnd2d3WxNja18LfxN9UwFeJVkJbllNXllVEA2qxoqeSYxyFj5yNsGqrlFa3nFOyUUhxe1hOY1xJd3+oX6u9iZevgHGFo6RFm4mjgFungFS9sGyVn7Shg7S4L8HMdgkNRgUTDJoWahV8e6gL4toZN2xk7fk7LwhHN8RqicVKkvO0OsvHZYX3tCZIahvXHFPJO0dt3YKrXAbHnnKAY5x3BVn2TdsAKzxFr77Hb3on7vssl+9QscvcPkDR0NNaOS5BkYinlZ0xiEY7TVPDMVnCOlrf3FjVyEtSwZBNXMxPQc5Cy91Z3DjfyTbSJyneKK3VJr9UwsxSRkVOT1tARZWc1EBa1EpIyUxA3dhbWtBVRM+OW1eKQUGdh4hdgFxDiFJXnEZPmlFIVlVUXl1cWVNPmFhPk4OMT5+Li42Tj4hEVFxET4+NkFxNn4hNl4BVi5eFk4uABe89RRR/OE6AAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/7e582d0b1764bdf072ab320120f0c2ba/50512/slide-016.webp" alt="Slide n&#xB0;016" width="163" height="102" layout="responsive" srcset="/static/7e582d0b1764bdf072ab320120f0c2ba/50512/slide-016.webp 163w,
/static/7e582d0b1764bdf072ab320120f0c2ba/aeba0/slide-016.webp 325w,
/static/7e582d0b1764bdf072ab320120f0c2ba/001d9/slide-016.webp 650w,
/static/7e582d0b1764bdf072ab320120f0c2ba/97fd0/slide-016.webp 975w,
/static/7e582d0b1764bdf072ab320120f0c2ba/3cea3/slide-016.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/7e582d0b1764bdf072ab320120f0c2ba/19bd1/slide-016.png" alt="Slide n&#xB0;016" width="163" height="102" layout="responsive" srcset="/static/7e582d0b1764bdf072ab320120f0c2ba/19bd1/slide-016.png 163w,
/static/7e582d0b1764bdf072ab320120f0c2ba/d3bcb/slide-016.png 325w,
/static/7e582d0b1764bdf072ab320120f0c2ba/dbb61/slide-016.png 650w,
/static/7e582d0b1764bdf072ab320120f0c2ba/6b691/slide-016.png 975w,
/static/7e582d0b1764bdf072ab320120f0c2ba/e11df/slide-016.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/7e582d0b1764bdf072ab320120f0c2ba/dbb61/slide-016.png" alt="Slide n&#xB0;016" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>En allant un peu plus loin et en rapport avec nos besoins d&apos;&#xE9;lasticit&#xE9;, une autre question que nous nous sommes pos&#xE9;e est <em>&quot;comment scaler le nombre de conteneurs <code class="language-text">php-fpm</code>, en fonction de la charge, comme le soir lors de notre pic de 21h ? Automatiquement, bien s&#xFB;r&quot;</em>.</p>
<p>Et m&#xEA;me, <em>&quot;comment faire en sorte que <code class="language-text">nginx</code> et <code class="language-text">php-fpm</code> continuent &#xE0; communiquer quand des instances de <code class="language-text">php-fpm</code> peuvent apparaitre et disparaitre &#xE0; n&apos;importe quel instant ?&quot;</em>.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/a4d9f62468be25d5fda3d0a913dc479c/e11df/slide-017.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABYElEQVQoz61RyU7DMBDNZrtRnDYpLXFEFtMYQqOulBZ6gB56RwIJqQgJDvALXPgFxJkL38GRb2OSQLoQcYEnxXJm3sw8v5Gkv0BVVYQwQoiQ9PyNSSytYq+FbNuO44OQ8yiKwjAsLVNkGc7F4/vN00fxmyUUxTAMjDGB0RhXMvyQAGxFTG7F5C6tLcLAa7Wi8XjS6XSSJOn1+4ejUb1eX6+UMHUR9ZDhEsqKYArLtoMg9DyP890gCBzG1oZqBOmNchtArRCCUkowMU2zWqvBHZTDcyRZAQI9ut+ZPYv4eDDodnt9+MAdcGrp2cl0CmoZY83mNsBxHGiaZ/XwtNp70A3LdRnnHASCUl3XM1Wy7Dgsk+1/hTaQeVs1KSx1MwUO+76valreqMDqkpJ2++X17fzicjY7m8/nwM/JqwPksqlpsNHYulpc78fxnhDD4dCyrCW/tOzfAN3B/Pw56Ra+8QlnhCI1BaSF8wAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/a4d9f62468be25d5fda3d0a913dc479c/50512/slide-017.webp" alt="Slide n&#xB0;017" width="163" height="102" layout="responsive" srcset="/static/a4d9f62468be25d5fda3d0a913dc479c/50512/slide-017.webp 163w,
/static/a4d9f62468be25d5fda3d0a913dc479c/aeba0/slide-017.webp 325w,
/static/a4d9f62468be25d5fda3d0a913dc479c/001d9/slide-017.webp 650w,
/static/a4d9f62468be25d5fda3d0a913dc479c/97fd0/slide-017.webp 975w,
/static/a4d9f62468be25d5fda3d0a913dc479c/3cea3/slide-017.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/a4d9f62468be25d5fda3d0a913dc479c/19bd1/slide-017.png" alt="Slide n&#xB0;017" width="163" height="102" layout="responsive" srcset="/static/a4d9f62468be25d5fda3d0a913dc479c/19bd1/slide-017.png 163w,
/static/a4d9f62468be25d5fda3d0a913dc479c/d3bcb/slide-017.png 325w,
/static/a4d9f62468be25d5fda3d0a913dc479c/dbb61/slide-017.png 650w,
/static/a4d9f62468be25d5fda3d0a913dc479c/6b691/slide-017.png 975w,
/static/a4d9f62468be25d5fda3d0a913dc479c/e11df/slide-017.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/a4d9f62468be25d5fda3d0a913dc479c/dbb61/slide-017.png" alt="Slide n&#xB0;017" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>La r&#xE9;ponse &#xE0; ces questions -- et &#xE0; plein d&apos;autres tout aussi complexes -- est d&apos;exploiter un <strong>orchestrateur de conteneurs</strong>.</p>
<p>Celui que nous avons retenu est Kubernetes. Fin 2017, quand nous avons lanc&#xE9; notre projet de migration vers <em>Le Cloud</em>, Kubernetes semblait prendre la t&#xEA;te devant les nombreux autres orchestrateurs existant. Depuis, Kubernetes a tr&#xE8;s clairement gagn&#xE9; <em>la guerre des orchestrateurs</em>, au moins lorsqu&apos;on travaille sur des plateformes de la taille de la n&#xF4;tre.</p>
<p>Je disais tout &#xE0; l&apos;heure que nous utilisons au maximum des services manag&#xE9;s. Le service Kubernetes manag&#xE9;s d&apos;AWS s&apos;appelle EKS. Malheureusement, EKS n&apos;&#xE9;tait pas disponible &#xE0; Paris lorsque nous avons commenc&#xE9; notre migration et nous avons donc cr&#xE9;&#xE9; nos clusters avec un programme nomm&#xE9; &quot;<code class="language-text">kops</code>&quot;. Nous re-testerons EKS prochainement et, si ce service r&#xE9;pond &#xE0; nos besoins, nous migrerons certainement en seconde moiti&#xE9; d&apos;ann&#xE9;e, pour ne plus avoir &#xE0; g&#xE9;rer le cluster nous-m&#xEA;me. Encore une fois : g&#xE9;rer un cluster Kubernetes, ce n&apos;est pas notre m&#xE9;tier et nous avons d&apos;autres fa&#xE7;ons d&apos;apporter de la valeur &#xE0; notre entreprise.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/a7edf92b58cf7a71983bb20463b36839/e11df/slide-018.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABeUlEQVQoz6WSW07CQBSGEQpoQsKzBaoLMCkKhcZVuAFWgEJLYSPuxmeNDz6hpdHaolBubRG5dqhAB4eSeKlN0PhlMufkzPxz/pmMx/MfAoHA9oqdYDCIYdjWJr6Jd3H8KJEg44cEQYTDYVRx7vhNf4qikslk3CZtQ9P0akrTVCp9kEhR9DFJkp6vR3u9XjQTe/s3V5dipdJotjuqCiFc2izseKHNT65H53XI3936fL5Pd+sQi8V4npdlWdP01/5AUzVEr9frqJqu6VWlJdRbAC4FQXARR6NRSZIUpSGKj3L1CQADADBFmCZKgDGZTQGygBq4iCORiN59AVNzPDEsy1r+YF10F+M4jgyPDaM/HBrAaCu1Zr32LIl1Wbyv8EqzhUwgcblcdreN3KFl9FTQsqA1t7r9WX+wmJmT0ejNggu784Mo+v1+pzgUCmWzpyxbOMvl8vl8gStyuTzHsCzHlUqlYpFjGAYlmUzmz79gM5gDnz0cNfvCH7wDsDj3JgJqmhoAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/a7edf92b58cf7a71983bb20463b36839/50512/slide-018.webp" alt="Slide n&#xB0;018" width="163" height="102" layout="responsive" srcset="/static/a7edf92b58cf7a71983bb20463b36839/50512/slide-018.webp 163w,
/static/a7edf92b58cf7a71983bb20463b36839/aeba0/slide-018.webp 325w,
/static/a7edf92b58cf7a71983bb20463b36839/001d9/slide-018.webp 650w,
/static/a7edf92b58cf7a71983bb20463b36839/97fd0/slide-018.webp 975w,
/static/a7edf92b58cf7a71983bb20463b36839/3cea3/slide-018.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/a7edf92b58cf7a71983bb20463b36839/19bd1/slide-018.png" alt="Slide n&#xB0;018" width="163" height="102" layout="responsive" srcset="/static/a7edf92b58cf7a71983bb20463b36839/19bd1/slide-018.png 163w,
/static/a7edf92b58cf7a71983bb20463b36839/d3bcb/slide-018.png 325w,
/static/a7edf92b58cf7a71983bb20463b36839/dbb61/slide-018.png 650w,
/static/a7edf92b58cf7a71983bb20463b36839/6b691/slide-018.png 975w,
/static/a7edf92b58cf7a71983bb20463b36839/e11df/slide-018.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/a7edf92b58cf7a71983bb20463b36839/dbb61/slide-018.png" alt="Slide n&#xB0;018" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p><em>Le Cloud</em> va aussi, &#xE0; terme, nous aider &#xE0; augmenter la r&#xE9;silience de notre plateforme et de nos applications. Nous n&apos;en sommes presque qu&apos;au d&#xE9;part, mais si un serveur qui plante ou la consommation CPU qui atteint 95% ne sont plus des probl&#xE8;mes, nous y gagnerons en fiabilit&#xE9;. Kubernetes aide &#xE9;galement, avec sa capacit&#xE9; &#xE0; relancer ou scaler automatiquement une application.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/6e70997ba1d41c75d1d0a6c20571689c/e11df/slide-019.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACOklEQVQoz22SXW/SYBSA+0u4GbCZjA8H5bNCoEAFx6BAC63i+OgobMZrx4cjEBwhGJPFy10YGQtLvNyFiRsFtvkTduFuvFAZjKnxF3hKM1zU5MnJyel58r7v6UEoKhqLsdEoA9AALSYUHYN6JEJDQt8g9UiEwxRJhpHDw/f5fKlafVGp1IByuVoqlbfKFYib+eKzzUKh8BwagGJxq1QCylDs98/GVz+RRuOlUqk0Gk0Wi9VqxUxms0qltmKY2WxZXFTJ5XL4qlAoIJmbk0MyP6+UyWS7u2++DSdI6+1+mstsPHnK8zk+u57NrudyG0AyySWSKY7L8HyW4/i1NZF0OpPJ5JLJNNz3y9cxsrPzmiRDYMYfr0J3PL6aSKRSKS4Ujiwv+50OHMddTieAS+C4G8Nsnc674fAaqdXqarV6ZSVAEF6v1+fzPYAOl8sNjl6PLi3pdDo9RCkBoAjvarX2L0ffke3thk6HMgw7HWAoECBBA1wuj8OBw8tR1GAwGGfAdLTau3t7HVFuNl/BUVMtCA6MzWazS2DYPZPJfNu8LY9Arteb0EFRdDBI+v0Bj4dwOJxuD2Gz2+GGf5l/5PbBaPxDvLZGoyGI++BAhL8FCjrlX3Mmt9sHY0leWLgDVWkwcBp6I/8X6NRotOKbL6+R8/NPgnDSH3zs9U6BrnAicXTc/3DUO+4OBOG0250WuwOIvf6Z0Du5uPg8mfxCYFFZNs4wDyViDAurPtt2MYeiGMWi1MOyj2Dz4e/8BpPwJDJdGHxYAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/6e70997ba1d41c75d1d0a6c20571689c/50512/slide-019.webp" alt="Slide n&#xB0;019" width="163" height="102" layout="responsive" srcset="/static/6e70997ba1d41c75d1d0a6c20571689c/50512/slide-019.webp 163w,
/static/6e70997ba1d41c75d1d0a6c20571689c/aeba0/slide-019.webp 325w,
/static/6e70997ba1d41c75d1d0a6c20571689c/001d9/slide-019.webp 650w,
/static/6e70997ba1d41c75d1d0a6c20571689c/97fd0/slide-019.webp 975w,
/static/6e70997ba1d41c75d1d0a6c20571689c/3cea3/slide-019.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/6e70997ba1d41c75d1d0a6c20571689c/19bd1/slide-019.png" alt="Slide n&#xB0;019" width="163" height="102" layout="responsive" srcset="/static/6e70997ba1d41c75d1d0a6c20571689c/19bd1/slide-019.png 163w,
/static/6e70997ba1d41c75d1d0a6c20571689c/d3bcb/slide-019.png 325w,
/static/6e70997ba1d41c75d1d0a6c20571689c/dbb61/slide-019.png 650w,
/static/6e70997ba1d41c75d1d0a6c20571689c/6b691/slide-019.png 975w,
/static/6e70997ba1d41c75d1d0a6c20571689c/e11df/slide-019.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/6e70997ba1d41c75d1d0a6c20571689c/dbb61/slide-019.png" alt="Slide n&#xB0;019" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>J&apos;anticipe certainement une question que vous m&apos;auriez autrement pos&#xE9; &#xE0; la fin de ce talk : <em>&quot;et le serverless, alors, vous en faites ?&quot;</em></p>
<p>Quand on dit <em>serverless</em>, je pense &#xE0; deux choses distinctes.</p>
<p>La premi&#xE8;re, celle &#xE0; laquelle on fait le plus souvent r&#xE9;f&#xE9;rence, touche &#xE0; l&apos;ex&#xE9;cution de code : les fonctions Lambda chez AWS. On ne g&#xE8;re pas de serveur ni de conteneur, on d&#xE9;ploie du code et <em>Le Cloud</em> se d&#xE9;brouille pour l&apos;ex&#xE9;cuter (bon, si c&apos;&#xE9;tait effectivement aussi magique&#x2026;). Pour nous, cette approche est tr&#xE8;s bien adapt&#xE9;e lorsqu&apos;il s&apos;agit de r&#xE9;agir &#xE0; des &#xE9;v&#xE9;nements. Par exemple, une vid&#xE9;o a &#xE9;t&#xE9; d&#xE9;pos&#xE9;e sur un bucket S3 et il faut d&#xE9;clencher un workflow d&apos;encodage -- nous passons d&apos;ailleurs par une fonction Lambda dans ce cas. Par contre, les fonctions Lambdas nous semblent moins adapt&#xE9;es &#xE0; du <em>temps r&#xE9;el</em>, comme une API HTTP. &#xC0; cause de probl&#xE9;matiques comme les cold-starts, par exemple. Mais aussi parce que le paradigme change, de m&#xEA;me que la gestion des co&#xFB;ts ou le d&#xE9;ploiement, la maintenance et les mises &#xE0; jour.</p>
<p>La seconde, extr&#xEA;mement pratique et que nous utilisons d&#xE9;j&#xE0; largement, porte sur des services, o&#xF9; <em>serverless</em> peut signifier ne pas avoir &#xE0; g&#xE9;rer de dimensionnement. Par exemple, nous ne soucions pas de la capacit&#xE9; de stockage du service S3 : nous consid&#xE9;rons qu&apos;elle est <em>illimit&#xE9;e</em>. Ou nous ne r&#xE9;fl&#xE9;chissons pas &#xE0; combien de CPU/RAM allouer pour DynamoDB. Ou nous avons remplac&#xE9; RabbitMQ, qui saturait <em>on-prem</em>, par SQS, qui scale <em>&#xE0; l&apos;infini</em>.</p>
<p>Bref, ne pas g&#xE9;rer de serveurs -- ou, plut&#xF4;t, leur dimensionnement -- c&apos;est fort appr&#xE9;ciable ;-). Nous nous reposerons probablement la question dans le futur sur les Lambdas, d&apos;ailleurs.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/bf9df876995c2ba093dab1d5163825fd/e11df/slide-020.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACuklEQVQoz2OwdPXTt/VQNLKHITtFQxBSACNFOALLKhk7KJs4ali4ali46Vi5Mey4+rJ80eG4vs0J/VviJ2yJ69sU07Mhpns9FPUA0YZYIOrdCJSK79+SNGl75oy9ObMPFM4/zHDw9tsFR+6lTt2dMnlXypRdadP2AFHCxG1AFD9ha8KEbYmTtkNQ0qQdQAVAlSA1U3dmTNvFMHPT4ezmqa7pDW5pDW7pjW4ZjR4ZTa6pDa6p9SCU1gBEECl3EGryyGx2z2iMaVuWMW03Q1pRnbiMorSqrqi8uggYARmiCkCkAUdiSEhcSVNYVtm3oCt//hEG57giSQVVZR0TJW0jBU0jWXUDSTV9SVV9ICkFRKpA0gCCpNVBSEbDUEJZO6h0YsnSMwxOcSXCsiry2iZAbTJqenJquvLqerKqOtJqulKqelIgg/SABgG1QRhS6gbiSlpB5VPKV19hCC1sc/Lwc/ENtXf38wiMcA8It/cMdPYJcvYMcPUJtnT09AmJdvMJ9PAP9QgMN7RyVNM3U9Q0qJ++csHJ5wwBea02bv52PhFeoXFRCanufiFAzZau/mYuwPj31LRwNncNsHFws3d08QuJ8PQLcvcNtHf1XLRp99XXvxhcE8slFTUUdU0VdUy0jS01DczU9SHIFMhW0DIGuhwYIiaWNqaW1qZWNmY2dtqGpv2LNtz//I/BNalSXFFTXtdcXttUSddcVd8SSCrpWepb2FnYORlZOehb2Btb2lvaO1naOxpbO5jbOWkbWU5YsvHlz/8MZcvPFS44Vrz4RMmSU6VLT5ctO1O+7EztqrPTdl87cvP56Xsvt154eOruizuv3l19+ubcg1cXHoLQ0y8/fv3/z6Dn4K/vHARGwQZgZOQabOcT7uQf4RUSHRId7xUaHRQVF5OQGBWfEAFEcQmRcQlh0bFhUdEAixMVMrVN1zMAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/bf9df876995c2ba093dab1d5163825fd/50512/slide-020.webp" alt="Slide n&#xB0;020" width="163" height="102" layout="responsive" srcset="/static/bf9df876995c2ba093dab1d5163825fd/50512/slide-020.webp 163w,
/static/bf9df876995c2ba093dab1d5163825fd/aeba0/slide-020.webp 325w,
/static/bf9df876995c2ba093dab1d5163825fd/001d9/slide-020.webp 650w,
/static/bf9df876995c2ba093dab1d5163825fd/97fd0/slide-020.webp 975w,
/static/bf9df876995c2ba093dab1d5163825fd/3cea3/slide-020.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/bf9df876995c2ba093dab1d5163825fd/19bd1/slide-020.png" alt="Slide n&#xB0;020" width="163" height="102" layout="responsive" srcset="/static/bf9df876995c2ba093dab1d5163825fd/19bd1/slide-020.png 163w,
/static/bf9df876995c2ba093dab1d5163825fd/d3bcb/slide-020.png 325w,
/static/bf9df876995c2ba093dab1d5163825fd/dbb61/slide-020.png 650w,
/static/bf9df876995c2ba093dab1d5163825fd/6b691/slide-020.png 975w,
/static/bf9df876995c2ba093dab1d5163825fd/e11df/slide-020.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/bf9df876995c2ba093dab1d5163825fd/dbb61/slide-020.png" alt="Slide n&#xB0;020" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>OK. Donc, nous migrons vers <em>Le Cloud</em>, parce que nous avons besoin de souplesse et d&apos;&#xE9;lasticit&#xE9; pour notre h&#xE9;bergement. Maintenant, voyons un peu comment on s&apos;est organis&#xE9;, quel planning nous avons suivi.</p>
<p><em>Spoiler : &#xE7;a prend &#xE9;norm&#xE9;ment de temps !</em></p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/d8b7aecf830a68cb69154315ff68ff03/e11df/slide-021.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACrUlEQVQozxWSS2/TQBSFJ61Jxvb4MZ6Hx+PxO4mTOn2FljRN2kZN0rTloQpUCbEDBEuQYI/EhtcChGDDBpbwM3HP6upK5x59VwfM91uKrTWbupQS2TZYW4e3mnqSaFt9U4eUEo8L6RKfeAo7k+3Esq0W1Gu1IATvnhUDZTBMqo1BlGQ2JSop8WiKtirfI2mSxGneFTJP017Ar8blRi4N3eSMCz8A14uC8axXlru7e71ef1BVw+FeN02NtXXTRAZCFoRIh6geLNRoNEJi0XpluCqMwf5mfDAaPXl8PdnfLPI8TpNciZKRruQdj/YpH/U7WRgE3Hdsx0bINuHxhlwdDlxPgvF4Orqzf/fy7up8NZ8vorTwsBtghxLCCY0Yz5VMpHQsu9lsmYaJYMvU1t88nrx4dALGk5MszQ4OxptVf2drM4ozKUPpszojVMoXwmc0DqXjOFrL1nRi6La2rmETvn8+A6vz+7XzdDa7Pdzd3d7Z3hkOb+8Nel1kIkpolkSMEGQaENFbFoOYQ4SNFkxd3LMdcHRyyhiXdYqKYhUFgRQyTKTwMFaBENSrrzi2q1tUd5jpYGjcvCvwZZG2wcXlAylVGMZpmhfttu+L0OfdRNU2JYNIRbbtEsIwJtDyke3eUBvID0KVtcH5+WWapFlWdDrdsiyjWoLnccQZIx7ptttCBBhTD3uGRW7yDdQyHKZqTwGWZxdhGOZ5UZa9qhps9PtRDRBFoahL5cVxLHyOPeJi4jiuZnLkUMHpsLjDyxn4/OXrq9dv373/+O37z39///3+/efThw8vnz/99ePbw+tHZbW9XN1fnN2bHs/Hh0edwcRIDkV7h7h5RiNwcDhZXVxOj07mi7Orq6vl2WqxXE6n49nsmHNWd7PTq2omFaUyjBnnoKGBNQ2Bhg4a/wHPWmgZ32hu1AAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/d8b7aecf830a68cb69154315ff68ff03/50512/slide-021.webp" alt="Slide n&#xB0;021" width="163" height="102" layout="responsive" srcset="/static/d8b7aecf830a68cb69154315ff68ff03/50512/slide-021.webp 163w,
/static/d8b7aecf830a68cb69154315ff68ff03/aeba0/slide-021.webp 325w,
/static/d8b7aecf830a68cb69154315ff68ff03/001d9/slide-021.webp 650w,
/static/d8b7aecf830a68cb69154315ff68ff03/97fd0/slide-021.webp 975w,
/static/d8b7aecf830a68cb69154315ff68ff03/3cea3/slide-021.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/d8b7aecf830a68cb69154315ff68ff03/19bd1/slide-021.png" alt="Slide n&#xB0;021" width="163" height="102" layout="responsive" srcset="/static/d8b7aecf830a68cb69154315ff68ff03/19bd1/slide-021.png 163w,
/static/d8b7aecf830a68cb69154315ff68ff03/d3bcb/slide-021.png 325w,
/static/d8b7aecf830a68cb69154315ff68ff03/dbb61/slide-021.png 650w,
/static/d8b7aecf830a68cb69154315ff68ff03/6b691/slide-021.png 975w,
/static/d8b7aecf830a68cb69154315ff68ff03/e11df/slide-021.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/d8b7aecf830a68cb69154315ff68ff03/dbb61/slide-021.png" alt="Slide n&#xB0;021" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Pour commencer, une personne a pass&#xE9; en gros six mois &#xE0; <em>faire de la R&amp;D</em> autour du <em>Cloud</em> : tester des services manag&#xE9;s chez diff&#xE9;rents fournisseurs, voir s&apos;ils r&#xE9;pondaient &#xE0; nos besoins (performance, scalabilit&#xE9;, utilisabilit&#xE9; depuis PHP, co&#xFB;t&#x2026;), d&#xE9;couvrir Kubernetes et d&#xE9;ployer quelques unes de nos applications, essayer de les casser et de les r&#xE9;parer&#x2026;</p>
<p>J&apos;&#xE9;tais cette personne, c&apos;&#xE9;tait du boulot, mais carr&#xE9;ment fun ! Un gros investissement, je d&#xE9;couvrais compl&#xE9;tement Kubernetes, mais &#xE7;a valait le coup et j&apos;ai pass&#xE9; six mois super sympa ;-)</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/e5917844255a95bb44b0f2ca908236f0/e11df/slide-022.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAADJElEQVQozwEZA+b8ABcoHA8PDBQQDUguIDcmHhUXEioaDyIYDzcmGzUvKCBAMhVGNAs2Jw9LNxhaRy1OP0M0Kj8yKDksIjMmHQA7b00kIBkSDAdtXU7BhmN1XEBZQi1uTTKHYUVMQTVqWThlUDYTGRdvlXqF5bmjupi+k3evjW+fe1+Oa1EATm9YDw0MBgAAI0QyfGxTwWc8VjQhajchTywgSiccdDskqocys6Izr41iy6KLvpZ7so9zqYZpmXZbiWhPAJ92WoxoS0o8L0BaRBAYDXlOMo1cRYVrRJyAO6R4M7WbRf76Yf//YOXPZ8Cbh7yZfrGNcaiEaZp3W4ppUACvbEToj0/KfUmeeF2JWzdYOSCEUzZ+YzOQbDlRNhxBPCSvkkLRriWgjz+pjG+9l3a4k3WviWyad1qIZksAhFI1c0MnbT4iVDYlfUUneUQnZkAlUDYZOCYZMCEWOSgePCERIyEKEkQxUndPdGM4Y04+X0s5f2FKiWZLAF88KEM/OkE7NDAuKC0rJycnJDExLTw8OD8/OgsaEw0aDRUcDQQjFwAqHAQeDSQfBBcSDBQPDGZNOotmSwBnUT4xHhIjFw4hKRwVEQpKLBllPCJKMB9JLhs0FgoSBwQVCwUSCAMmJh1iUjxhTTdXRDRTQDF5XEWFYkYAS2dJPiIMIAsAJDQlalQ7v2Y1iEwmiEkneEImbUAgSnxaIad7HzUjTzEowZt+so1xqYRnoHxfj2xRfl1CAC9dPTQuHQ4QBFROPYpeRn1iRkx2UFl4TkxtRweJWgSqbgO/gh5oSmM/Iq6MbKqGa6F9YZh1WYpoTXxbQABCUDY5NSVwTC2ycDlxRyw7Lh1qRiNkSzBOPytgnlQjzIo1vYGsryT00Qrfwyuhf1uceF6VclaHZkt6WT8AOj0sbWBJsmg5plQlcEsyHzEiajkfPB8SOCIYRy8VMyoYWDkhdF4X0bQkzq0kimdAlnJYmXVYjGlNf11CABkTECkaFDgeDzYbDRkPCwcOCR8UDhMPDBUMCA0FBgEBARQMCwoKDyAVDi0eES0gFjQmHDYpHzIlGy4hGB5Y7GKU58vOAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/e5917844255a95bb44b0f2ca908236f0/50512/slide-022.webp" alt="Slide n&#xB0;022" width="163" height="102" layout="responsive" srcset="/static/e5917844255a95bb44b0f2ca908236f0/50512/slide-022.webp 163w,
/static/e5917844255a95bb44b0f2ca908236f0/aeba0/slide-022.webp 325w,
/static/e5917844255a95bb44b0f2ca908236f0/001d9/slide-022.webp 650w,
/static/e5917844255a95bb44b0f2ca908236f0/97fd0/slide-022.webp 975w,
/static/e5917844255a95bb44b0f2ca908236f0/3cea3/slide-022.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/e5917844255a95bb44b0f2ca908236f0/19bd1/slide-022.png" alt="Slide n&#xB0;022" width="163" height="102" layout="responsive" srcset="/static/e5917844255a95bb44b0f2ca908236f0/19bd1/slide-022.png 163w,
/static/e5917844255a95bb44b0f2ca908236f0/d3bcb/slide-022.png 325w,
/static/e5917844255a95bb44b0f2ca908236f0/dbb61/slide-022.png 650w,
/static/e5917844255a95bb44b0f2ca908236f0/6b691/slide-022.png 975w,
/static/e5917844255a95bb44b0f2ca908236f0/e11df/slide-022.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/e5917844255a95bb44b0f2ca908236f0/dbb61/slide-022.png" alt="Slide n&#xB0;022" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Apr&#xE8;s &#xE7;a, nous avons d&#xE9;cid&#xE9; que nous allions faire quelque chose de <em>parfait</em>.</p>
<p>Notre infra chez AWS serait <em>parfaite</em>, notre cluster Kubernetes serait <em>parfait</em>, tout serait <em>parfaitement</em> manag&#xE9;, le code d&#xE9;crivant notre infrastructure serait <em>parfait</em>, notre monitoring/logging/alerting aussi, de m&#xEA;me que notre chaine de CI/CD qui serait elle aussi <em>parfaite</em>.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/83a1a772d6595dc51fd267adc8b6f556/e11df/slide-023.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAC8klEQVQozxWQWW/SAACAu1HaAm2hUFpoC6OjF12hMKAwaNnYgHGOjQ3H3Ia6ucthvI95LOqMMTFOjdeDPpj4YPRXqt/T9/YlH8ArvmCYQHEnHfYQNIYTLj/jYaI+QQ3mTSkiByIyK2osF/ERPlTWGFnjBImmGJzlPUDnSqzUUbgIlWnGzFY8ayoLbb21l+/vWU/f9BvDXP/a3K2X9fbFtJIMbY9mDx42upuZ6rJ24WoWqA+iMzUhxDNGM2lUlVJFLc5JnZ3p2eXE4cPGXE/fPKy9/jRau2xEY+zCsjY6WRoeLFpN9fBuBWhfmtFNJRQJdjequimnshOWKazulmeXpo+fNGobmZen1368e7a1V5HiXMKKDm+090fr5qK2tFEEqoNZMRESo3R3vZwuxCSJqZSk7s5ctqaOTpvNLWP3sHdnvzcYzOs5IbUgGCtytZexqrFiTQPMpRRJ4QJPKTof4Lx+EudYj5qJcKI/PsNPqoySnMgX1XRWC/OBkEAKOhNL8lIiUKingFxtMjOdUVURd7sAYOwf47ZxCIERBAZhEEJAB4qMQeA4ZIMQO+yy22DbODzmD7pz89K/spdTMWLCpRhEMk+GIjgZdGXLfkbBrLpeyivWlPdqS95tq/0S18gFu6XJfD7EiT4lHQAevJB72xGlRhbX6fPvhTtnerEV7O0LK0fi+1erv553vt00fj8pfR2l/pzkPh7pP0/Kn++V1y6IlfUJYOe60loMFwq0aVG7m+LZqXb/dKq3KVwc8AsZ6rjJfzjQvxwn3+4oP27pX46mvt2YPt9PPdrQhj0eCKgulHZwQVQOYTzlMGMeK+HTDV/Wotm4j1Xx7U741VD8sBe73Wbur4Qf9/lHff56h98qcQDKOlyk0+t3YrjDQzhxDEFRCHUjBOkMsNik4o5r+EzSY8aJYsJbT5OdLNU1qLbhL+pe4P9Suw1EQBAC7aANgkAY/i9OJ4i6QNwBkpidJmHCC6MY5MZAP26n3BDlgQnc/hfPcJvD67wnVQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/83a1a772d6595dc51fd267adc8b6f556/50512/slide-023.webp" alt="Slide n&#xB0;023" width="163" height="102" layout="responsive" srcset="/static/83a1a772d6595dc51fd267adc8b6f556/50512/slide-023.webp 163w,
/static/83a1a772d6595dc51fd267adc8b6f556/aeba0/slide-023.webp 325w,
/static/83a1a772d6595dc51fd267adc8b6f556/001d9/slide-023.webp 650w,
/static/83a1a772d6595dc51fd267adc8b6f556/97fd0/slide-023.webp 975w,
/static/83a1a772d6595dc51fd267adc8b6f556/3cea3/slide-023.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/83a1a772d6595dc51fd267adc8b6f556/19bd1/slide-023.png" alt="Slide n&#xB0;023" width="163" height="102" layout="responsive" srcset="/static/83a1a772d6595dc51fd267adc8b6f556/19bd1/slide-023.png 163w,
/static/83a1a772d6595dc51fd267adc8b6f556/d3bcb/slide-023.png 325w,
/static/83a1a772d6595dc51fd267adc8b6f556/dbb61/slide-023.png 650w,
/static/83a1a772d6595dc51fd267adc8b6f556/6b691/slide-023.png 975w,
/static/83a1a772d6595dc51fd267adc8b6f556/e11df/slide-023.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/83a1a772d6595dc51fd267adc8b6f556/dbb61/slide-023.png" alt="Slide n&#xB0;023" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Apr&#xE8;s un &#xE0; deux mois &#xE0; une ou deux personnes, nous avons r&#xE9;alis&#xE9; que nous n&apos;arriverions <em>parfaitement</em> pas &#xE0; faire quelque chose de <em>parfait</em>. Nous ne connaissions pas encore suffisament l&apos;&#xE9;cosyst&#xE8;me, il bougeait de toute mani&#xE8;re bien trop vite pour faire quelque chose de <em>parfait</em>.</p>
<p>Finalement, un soir autour d&apos;une bi&#xE8;re, un coll&#xE8;gue et moi avons compris que, si nous voulions avancer&#x2026; Il fallait avancer. Il fallait prendre une de nos applications d&#xE9;j&#xE0; en production, la d&#xE9;ployer dans <em>Le Cloud</em> et voir ce qui allait casser. C&apos;&#xE9;tait peut-&#xEA;tre un peu la bi&#xE8;re qui parlait, mais sur le coup, c&apos;&#xE9;tait une id&#xE9;e de g&#xE9;nie !</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/626aa2cddc86640ca5fb777efbc2279d/e11df/slide-024.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAADJElEQVQozwEZA+b8ADIiGz0rHUwyHT8oHxwWGCIcHCQcHSocGSAdIBoZHB0WFycZFx0bHyAgJBwdIRkaHhgYHBMVGiYqMDtFTABTSU1mU1FxUUpkTExqXGKGcHKai5KZgH1pYGpzUEtZQ0RcRkdOSlJVU1tRVGCSamCscmVMSlVwfY6syN0AVEpSjGJYwXtceWdto3+Bvpmbt7bGoKu/emVmqFk8cEc9OjtJSUFJPj1GSEZOYFlieHJ+e2ZsYGBsiqO5AIdaV8l6YNqMcrF9fbeFh7aVna+ksbjB0qOGi89gLdlrHaVfMY9TOE5BREI+RpBhUIBoZWJZX3BSS3FmaQDRf1//lGOyfXTDgHfznYK1jYqVh5S4uMexs8WtaFL/jxbGcB5uNiFGLypgNyn4kUvog1PBYzm2WSiXSiEAo2dImVszWEA8bUc7o2c+bE1ARz5GW1deaW98VEdLklYkYj8jFRYgFRkfRSshkFM8YzovWC4dUygWRTY5AF1HQT06OS4qKzg2NzcsKTYvMDc2OikoKxoYHB0eIhkVGBMRFhQUFxUVGBMRFBISFwYIDgAAAycjKFZXYQBCMTUrIygnJCtHLShhOTFBNDY9MjREOj9IRk1dYWxmX2M+NDQjHyQuLTI0MTc1LzUeISkkKC9ESVRTXGkAl1M8jE46TTs+i1E64W89hVNIqHFQcFZWdG53kIiRsbrPh4SQYUpKa2RrVE1XWUVTYExQYUA1LygvPDU7AN5lI/dsG2pBMZNLLPNrIH5JNHJRSWVOT1xNVGM+NsKgiL21vG1WWlFESTdATRssO3lNPq5TIS4YFzQlJwDQbh3/hhJcQz2lXCX/iQ56TzU/OEVQQ0dQP0SAXUrPmGGxo6CEjJ01QVApOEkgLj82QExuW1M2HhwrGhkAsGUzz4lFV0hHgVM2ynUqY0Y4QDpEXVVbeG1zfHV5iIiVZ2RqT1piMENYRVpLOEpMKz5TKDxOLywxLBwaACMZHCQZHB4WFxgWGw8RGA4NERgWGCgmKTEuMCQlKywwNygoJxofGQ0THRUdGREXEw8UFwwRFRMZGBcUEj0O+uZUvpogAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/626aa2cddc86640ca5fb777efbc2279d/50512/slide-024.webp" alt="Slide n&#xB0;024" width="163" height="102" layout="responsive" srcset="/static/626aa2cddc86640ca5fb777efbc2279d/50512/slide-024.webp 163w,
/static/626aa2cddc86640ca5fb777efbc2279d/aeba0/slide-024.webp 325w,
/static/626aa2cddc86640ca5fb777efbc2279d/001d9/slide-024.webp 650w,
/static/626aa2cddc86640ca5fb777efbc2279d/97fd0/slide-024.webp 975w,
/static/626aa2cddc86640ca5fb777efbc2279d/3cea3/slide-024.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/626aa2cddc86640ca5fb777efbc2279d/19bd1/slide-024.png" alt="Slide n&#xB0;024" width="163" height="102" layout="responsive" srcset="/static/626aa2cddc86640ca5fb777efbc2279d/19bd1/slide-024.png 163w,
/static/626aa2cddc86640ca5fb777efbc2279d/d3bcb/slide-024.png 325w,
/static/626aa2cddc86640ca5fb777efbc2279d/dbb61/slide-024.png 650w,
/static/626aa2cddc86640ca5fb777efbc2279d/6b691/slide-024.png 975w,
/static/626aa2cddc86640ca5fb777efbc2279d/e11df/slide-024.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/626aa2cddc86640ca5fb777efbc2279d/dbb61/slide-024.png" alt="Slide n&#xB0;024" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Bon, le lendemain matin, autour d&apos;un caf&#xE9;&#x2026; Un peu plus compliqu&#xE9;. Forc&#xE9;ment, des choses allaient casser : c&apos;&#xE9;tait le but ! Mais comment expliquer &#xE0; nos coll&#xE8;gues que nous allions prendre leur application qui marchait <em>parfaitement</em> depuis des ann&#xE9;es, que nous allions la d&#xE9;ployer dans <em>Le Cloud</em> juste <em>pour voir ce qui allait foirer</em> ? S&#xE9;rieusement, on n&apos;a m&#xEA;me pas eu le courage d&apos;essayer d&apos;aller les voir ^^.</p>
<p>Donc, retour &#xE0; la case r&#xE9;flexion. Est-ce qu&apos;on ne pourrait pas d&#xE9;ployer une application en production dans <em>Le Cloud</em>, pour apprendre ? Mais sans le faire <em>sauvagement</em> ? Le faire en &#xE9;tant prudent, sans que les probl&#xE8;mes qui allaient certainement survenir n&apos;aient d&apos;impact perceptible par les utilisateurs ?</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/208efb4f2b16712b2b2a64fea88a9505/e11df/slide-025.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACg0lEQVQozx1Sa6+bRhBF9g0Gdlkey/LG6+VlzMMYgzG+cXKVVFWrqnm2avohypdWSv7/L8gk0mg0s9KZc+bMSljHq/Xq4eHhmbyRkb5er6GCForVamVSBxHTD/xDszeoptuqxYhhYUxUhDUpiENFUVRN0xAitkNMQ1VVRf35gAFo2ox1XX08HZyAQASJ4wa2KMOy4dKWb5Mkzou8O7ap2BVlLrK0bes8S6tqv1EUTVN3uxjrqizLMFZRNoq64VmQV7F0nU55LoTYloUIA++H4Ic1Nk1s2YSAPGJQusvSpt8TWyUWMmxkUizKoGhjaZ76222e57EogKrYCe773gpMkOVnsgzKbebkh31epkhXkK6qGLIi9mHZbqVDmXEeL8tlns/jeLrMIwzq+7btar5LMNZAqM3chHPdspCuaRgM2uyKoDptpWUe7/fb/b5cLue2qcZzPwzdskzLbW7bA2OWTS3X94iBsWE4HkXAjNXsEPVzIQ190x2bp6f7dZ4812HM9n3IpmkBkxH4LIoCsNANvSCO/BCmIOCvOj4+r6RpOPZDB+DHx3kC2dMwjv353DOXAjiOgjzbgZ3MY47vYoPoBG6oxCl9+vUM4E6kfLlOl8tw7Gowb5xOSRLatmGaxPfYfp9lKbcsAgFg+AhwtsNRvHg9SJepQ0gFRVHohYHLtxFzbde1KTWpbTJqJpEv0sQACEGwOdKxpuO8DueXtfTh06vlOrx/+9unv9/8/9/nr9++/PXP7398fByvTcgFz4v+urz/9893H39ZnprjnI63ctvU1fU4w85bEfi+mwpe7bPTqWu7qm4KUYA3roINRbe8hFd1XjelH1HHN4LYoZ6DKDOp/h1/rlriLyzC0QAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/208efb4f2b16712b2b2a64fea88a9505/50512/slide-025.webp" alt="Slide n&#xB0;025" width="163" height="102" layout="responsive" srcset="/static/208efb4f2b16712b2b2a64fea88a9505/50512/slide-025.webp 163w,
/static/208efb4f2b16712b2b2a64fea88a9505/aeba0/slide-025.webp 325w,
/static/208efb4f2b16712b2b2a64fea88a9505/001d9/slide-025.webp 650w,
/static/208efb4f2b16712b2b2a64fea88a9505/97fd0/slide-025.webp 975w,
/static/208efb4f2b16712b2b2a64fea88a9505/3cea3/slide-025.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/208efb4f2b16712b2b2a64fea88a9505/19bd1/slide-025.png" alt="Slide n&#xB0;025" width="163" height="102" layout="responsive" srcset="/static/208efb4f2b16712b2b2a64fea88a9505/19bd1/slide-025.png 163w,
/static/208efb4f2b16712b2b2a64fea88a9505/d3bcb/slide-025.png 325w,
/static/208efb4f2b16712b2b2a64fea88a9505/dbb61/slide-025.png 650w,
/static/208efb4f2b16712b2b2a64fea88a9505/6b691/slide-025.png 975w,
/static/208efb4f2b16712b2b2a64fea88a9505/e11df/slide-025.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/208efb4f2b16712b2b2a64fea88a9505/dbb61/slide-025.png" alt="Slide n&#xB0;025" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Commen&#xE7;ons par monter notre infra de base chez AWS et y cr&#xE9;er un cluster Kubernetes. Au passage, nos &#xE9;quipes (et pas seulement deux personnes) se familiariseront avec les nouvelles technos que &#xE7;a met en jeu.</p>
<p>Ensuite, migrons un projet dans <em>Le Cloud</em>, mais avec une approche <em>sans risque</em> -- nous verrons dans quelques minutes comment ;-). Voyons ce qui va casser, apprenons et fiabilisons.</p>
<p>Et ensuite, passons &#xE0; d&apos;autres projets -- tout en continuons &#xE0; am&#xE9;liorer au quotidien.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/267e3c5a05ef8b47885842ce2a113bbb/e11df/slide-026.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACSUlEQVQozzVSWY+aYBTlyaqA+4I7O4ggKCDug8tM7eBCZ2IbM02mL9NMn/T/P/WA6Q0h5OMs99zvEuVyuR5Xq9EcWNYxDF9eX88/fgb7w3aznYzHflye61qGocpyp92p1+rFYjGfzxPdbleRFbNvuo67f36+Xm/X2+3z8+9ut/NG3ma9Pp/PHx9/fr+/v4Th6uEBSJ7jZFkGkQBC13XbHo4nE8dxZUnieb7TbnMcJ0mSIAjA4W2apv/gD227UqlQFCkKomH0ibXvz2fzb7vd29uv4+FYrVbBHDnOyHEH1qBv6ALP53O5Uql0OoVh+B0ReI7vaXpEPu736/UmCILL5bJcLBw7KkmUYNU3jFxcFEUlk0mW5TxvjDZh4AxtbzQmNqvVcrk8nU6QkCXZiEvg+Ea9gZFks1maolKp1Je40D/iYFpIjozEcjaXZGk6nbIsi/YQqVqpIHaNYWAYJ4xswU8kEgzDiKKIQ3toT7wx0Tf6aAPodDp9lwcIUJqmM5lMNpNJJZN3Mn6RJNlqtWJny7IGhKqo0MNtRxyAYiiE0EWGpvGR/E9Ox3w4gdzr9kzTIpCzXCqBDFW4UXFCFBMXDmMtEucQAgCHEFUURdcNAhuD3prNJpLkC/lioUhTNAhwQPi7cyRJkngajUY0BZLEgFRVxYZpw8Hw6/ZxOplg8k/bx/lspmnaIdjvg0DgoyVZ+ytMCKOaTafL+UJVu7IMb4XA7UOP67DYWOyDKAhsh8U94V9P0xCHqTKIxrEskLVaDZ3CvFAo4CL/AVqtbp0r9LZXAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/267e3c5a05ef8b47885842ce2a113bbb/50512/slide-026.webp" alt="Slide n&#xB0;026" width="163" height="102" layout="responsive" srcset="/static/267e3c5a05ef8b47885842ce2a113bbb/50512/slide-026.webp 163w,
/static/267e3c5a05ef8b47885842ce2a113bbb/aeba0/slide-026.webp 325w,
/static/267e3c5a05ef8b47885842ce2a113bbb/001d9/slide-026.webp 650w,
/static/267e3c5a05ef8b47885842ce2a113bbb/97fd0/slide-026.webp 975w,
/static/267e3c5a05ef8b47885842ce2a113bbb/3cea3/slide-026.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/267e3c5a05ef8b47885842ce2a113bbb/19bd1/slide-026.png" alt="Slide n&#xB0;026" width="163" height="102" layout="responsive" srcset="/static/267e3c5a05ef8b47885842ce2a113bbb/19bd1/slide-026.png 163w,
/static/267e3c5a05ef8b47885842ce2a113bbb/d3bcb/slide-026.png 325w,
/static/267e3c5a05ef8b47885842ce2a113bbb/dbb61/slide-026.png 650w,
/static/267e3c5a05ef8b47885842ce2a113bbb/6b691/slide-026.png 975w,
/static/267e3c5a05ef8b47885842ce2a113bbb/e11df/slide-026.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/267e3c5a05ef8b47885842ce2a113bbb/dbb61/slide-026.png" alt="Slide n&#xB0;026" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Vous l&apos;avez peut-&#xEA;tre d&#xE9;j&#xE0; compris, mais j&apos;insiste : tout &#xE7;a, migrer dans <em>Le Cloud</em>, &#xE7;a prend du temps. Beaucoup de temps.</p>
<p>D&#xE9;j&#xE0;, il faut former et accompagner les &#xE9;quipes. Mes coll&#xE8;gues ops ont dit, plusieurs fois, qu&apos;ils r&#xE9;-apprenaient leur m&#xE9;tier. Mes coll&#xE8;gues d&#xE9;veloppeurs ont quant &#xE0; eux d&#xE9;couverts les principes d&apos;<em>Infrastructure as Code</em> et les <em>manifests</em> Kubernetes.</p>
<p>Mais aussi, et l&#xE0; je parle plus en termes de d&#xE9;lai, notre migration dans <em>Le Cloud</em> s&apos;est int&#xE9;gr&#xE9;e &#xE0; notre travail quotidien : nous n&apos;avons pas arr&#xEA;t&#xE9; de d&#xE9;velopper nos applications et produits et nous avons donc d&#xFB; int&#xE9;grer, judicieusement, leur migration &#xE0; notre backlog.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/5e5c3e0f1f4454df0dd35a8d5e475c1c/e11df/slide-027.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACzklEQVQozy1S+0uaYRT2H2l/gdHaDwmtEblo4HJev/ASLFprrQalbbFpTFZzLLqZGDKr9cMcFDnQUukznQXd8TL189LNis8p3mrlJYmonc96eC+H97wP55znHBKfxxMKhQwGg15f/4xOgMVkMhlMBEHgptFojCKe0mhsFuv2A7gEAgGfzyfl8/mbm5t5g2FkaPibWj2mGLOgqFb7E11cfNPRMT09PTMzM65SfZ+amtBo3nZ3azSadDp9fX19eXlJSiQSV1dXU5OTXZ2dEolEJBKBrVIq4VPt49qxUYXso+zD+w8ymUwqkbKYLPlneSwWy2QyZ2dnpFQqlc1mHQ7nkmXJZrOtrKzYf9s31teDgeDy8rLRaFxbWzOZTDqdDkVRg15vNpkikUgmkz0/PyfIAPz4OB6LXeTzLpdLNzcXj8dxHN/e3oakPB6PxWK5KBR29wh4vd4iOXNHPjoMe93u3Z2dvzje8qKlubkZyBOaiYoKSqFQ6JX2lpXd1/7QqlTjYrG4513P1tYWvBNpJ5PJ46Mjj9sVPjiIRiJtr9pWV1dBQiiSTCaDIv39/cCRy7+o1eqqqkftr9udTifITJAhiM/t3gmFAhiWTMSbnjfR6+npVArkaRQ2bm5s9n3qKym5p9frIXgpubSu7onP57sTDKQLeP6EAgFIey8UbH3ZClmBj83mUCiUecO8QqGorHxoMpq0Wi2fxy8vf4Bh2GkRpGg0uhsKYV4PlB3BcYFAKO4S2e12GAMoYXRkdHBwEOEiQ0PDSqWyVyqlUqlOhwNaDWKRQNXw/n7A5/VjvsNwWKf7NfB1wGq1QtsInVHUZrUtLCyYzWZ0EV2yWGZnZzG/H/KFekknJyfZXG4v4A96Pdl8DuYG1MoXAc2AM5cDfw7sf6enEO72BBbRKoTL5fF5tTU11OpqMDgcNoDL4RALNgH2HVis4tgz4KkBQRoakP8KrgD8u+blUAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/5e5c3e0f1f4454df0dd35a8d5e475c1c/50512/slide-027.webp" alt="Slide n&#xB0;027" width="163" height="102" layout="responsive" srcset="/static/5e5c3e0f1f4454df0dd35a8d5e475c1c/50512/slide-027.webp 163w,
/static/5e5c3e0f1f4454df0dd35a8d5e475c1c/aeba0/slide-027.webp 325w,
/static/5e5c3e0f1f4454df0dd35a8d5e475c1c/001d9/slide-027.webp 650w,
/static/5e5c3e0f1f4454df0dd35a8d5e475c1c/97fd0/slide-027.webp 975w,
/static/5e5c3e0f1f4454df0dd35a8d5e475c1c/3cea3/slide-027.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/5e5c3e0f1f4454df0dd35a8d5e475c1c/19bd1/slide-027.png" alt="Slide n&#xB0;027" width="163" height="102" layout="responsive" srcset="/static/5e5c3e0f1f4454df0dd35a8d5e475c1c/19bd1/slide-027.png 163w,
/static/5e5c3e0f1f4454df0dd35a8d5e475c1c/d3bcb/slide-027.png 325w,
/static/5e5c3e0f1f4454df0dd35a8d5e475c1c/dbb61/slide-027.png 650w,
/static/5e5c3e0f1f4454df0dd35a8d5e475c1c/6b691/slide-027.png 975w,
/static/5e5c3e0f1f4454df0dd35a8d5e475c1c/e11df/slide-027.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/5e5c3e0f1f4454df0dd35a8d5e475c1c/dbb61/slide-027.png" alt="Slide n&#xB0;027" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Bref, pour migrer dans <em>Le Cloud</em>, allons-y progressivement : construisons, mesurons ce qui fonctionne ou non, apprenons au passage&#x2026; Et, au bout d&apos;un moment, profitons de la souplesse que nous avons gagn&#xE9;e !</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/56537441fa6fd57489f31da57a3ff10a/e11df/slide-028.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAADA0lEQVQozxWQ2U8TURSH5z8QsNPpzHQWOm2n+zDTmba0tNMNWrDIIrRBoGwmmiguoEhYqoKpAqGWBKJGjRIKYQmQELSIDz6YEPVBfcAXYlCMGmOMf4O3yfdwzrn3d76bC4Uko9OsqfHY6mQh5uVrfUJDQALU+uxByRLzCg1B6aQsgvmJCr7azUVctkqHOSQa/XYDtPfw6ttH1w9Wx7+sp/ceDx2s3/2Zz/7Kz3xevfNp6faP/MzR8+zh1vTBxsT+8u0PCzfePR1582Dg9WzfTvYytDd38evy6OFK6vvG+PfN9NFm+m9++u/O9L+X9/7tZv/sZH7nMz+2p75t3gWC/aXUx/nh908Gd2cubU2eh9ZTLXMXap/0Nz4bSDzsb5691JQbSc4PtS+MJBdTHYDcKGjbHg+03O9LzF5pzvY23OquAfWLiXPQaNzNqIrsWoTXIKIWBVgppY1GbKWIwKCSDhM0Kjuj4milhYQ5GjYTCgYpSndFl4dboVS8HPRuI+4y4OUG3G0ivBbKYyJ5BrXRqKjDRR0Gjlws5mQxhw51aFGOgjM90d3xTmi40cFixQ6tStQiDn1BZaVhSY+5jYSTBZnCRkmPCuBdDCJqECA3oCWTydCrm21Qf53HzRnr/c7TNf7mSk+8yhuTnVwpYmcQEAPrCraCUAXC9lKlRa0wqErutPjzgwloLC43yo5klftsfbg17EpGPJ3V3paAmPDbqwVtwEwELVTYQoXMZMBI+I2Ej1U7NehUQt6+fAq6FuFZTMHTKhuFCDQigU9iMKcOLweXdChPK3kKFmhlGQnb1AoLftyKHzeqSnqDQiYegnplm055jFMrAAIJ22lYoGCRVpqwYhYt5shCDRBIZRkB8wTMIiUmVNFVbp1qkKFcMjLfVrnUEVnriq731GycqV7piq51R5+1hWea5KXOaK4jstgRybVHZuOBvpA0FqsYi3kyTYF0nQ9yazAfo3bRqI/BgzoCENIXCLNklYEK60lZq65gcAeFejSYFi62YrBEoZwaMeHwf5Rm7MM+w/igAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/56537441fa6fd57489f31da57a3ff10a/50512/slide-028.webp" alt="Slide n&#xB0;028" width="163" height="102" layout="responsive" srcset="/static/56537441fa6fd57489f31da57a3ff10a/50512/slide-028.webp 163w,
/static/56537441fa6fd57489f31da57a3ff10a/aeba0/slide-028.webp 325w,
/static/56537441fa6fd57489f31da57a3ff10a/001d9/slide-028.webp 650w,
/static/56537441fa6fd57489f31da57a3ff10a/97fd0/slide-028.webp 975w,
/static/56537441fa6fd57489f31da57a3ff10a/3cea3/slide-028.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/56537441fa6fd57489f31da57a3ff10a/19bd1/slide-028.png" alt="Slide n&#xB0;028" width="163" height="102" layout="responsive" srcset="/static/56537441fa6fd57489f31da57a3ff10a/19bd1/slide-028.png 163w,
/static/56537441fa6fd57489f31da57a3ff10a/d3bcb/slide-028.png 325w,
/static/56537441fa6fd57489f31da57a3ff10a/dbb61/slide-028.png 650w,
/static/56537441fa6fd57489f31da57a3ff10a/6b691/slide-028.png 975w,
/static/56537441fa6fd57489f31da57a3ff10a/e11df/slide-028.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/56537441fa6fd57489f31da57a3ff10a/dbb61/slide-028.png" alt="Slide n&#xB0;028" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Maintenant qu&apos;on a parl&#xE9; un peu du temps que &#xE7;a prenait et de notre planning, passons &#xE0; la migration en elle-m&#xEA;me. Comment avons-nous proc&#xE9;d&#xE9; pour migrer <em>sans risque</em> ?</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/2f208ebf1dd477e85ffb8434153c4c8c/e11df/slide-029.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACgElEQVQozxVS2Y7bRhCcFcnhXJyL9ymeqxWpY0UdXknrxLFjB4GDIMHmwU/+inxBvjxjoLuAbqDRVdUNKBUelVOWSabmKj83lQ1ZHiZ1nE9FoUR0Grok7ofl6tZWsfShyxmVQxSPaQK+f3ofyug+dFqG57b+9m4f67gru3mYPoyrqR5+nU/Lev5ls/upXwqmEBKJCj6uHv+eD+Dft98347Zph6bpq3oY6va627bL9vV4mjebPokCT+RKKUoBeHBt5+HBAmCRhvnXlzu49t25a6solSLMg4QwfxnnPz+2hva+2++KYl6Wr4+dBT1BOKcCY75O47fd+rdpC/ygvOyej+Pm8/39h8vL8/Z5HPf3w7EJ4zEvKq0ZYR7hgniVVqVSmRCFFMey/DzfQBDkbdN3zbAdt5vV+rzd3efju/lymTZjkXqYKSZKrRMhOCYCYU0wR6iN8mVcg6eiup9OL7v94Wl9PRxvp8v1eHmdz4f+cZWlfZK0gf9DM+MCU+piBLFjuwscOLwEldFplFDhIoIIl1z7UqdKx4w1QdAEqlI8lzzwFEXUcbAJ23YdEiBRglj4tgUXNl6YdCCDrsbEpyzh3MM09IxCHnMhTJOQiFGDFLqUhVTVwNiLITRkuIsJRMTFMaMMEYYYckkmJXaxZbnAcqGDKESW7ZplkU5vtz9ArELkQMMELH5gwqjnIkmZNq+HSecL2zYDWKhCetqyILCgY0POIxH2IA9LLVNPGG+KP5+Gr9vpr9Phv7cvX6Z1Ftb/nF/mpkO8DLLpqWjbZIl4TrxkyGomKyCYNCegRCZCD344xMm1ry99Y0rt6S7JyiCykUQs8Llf64BRZSMBsXCQ+B88VEw/s+r0ugAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/2f208ebf1dd477e85ffb8434153c4c8c/50512/slide-029.webp" alt="Slide n&#xB0;029" width="163" height="102" layout="responsive" srcset="/static/2f208ebf1dd477e85ffb8434153c4c8c/50512/slide-029.webp 163w,
/static/2f208ebf1dd477e85ffb8434153c4c8c/aeba0/slide-029.webp 325w,
/static/2f208ebf1dd477e85ffb8434153c4c8c/001d9/slide-029.webp 650w,
/static/2f208ebf1dd477e85ffb8434153c4c8c/97fd0/slide-029.webp 975w,
/static/2f208ebf1dd477e85ffb8434153c4c8c/3cea3/slide-029.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/2f208ebf1dd477e85ffb8434153c4c8c/19bd1/slide-029.png" alt="Slide n&#xB0;029" width="163" height="102" layout="responsive" srcset="/static/2f208ebf1dd477e85ffb8434153c4c8c/19bd1/slide-029.png 163w,
/static/2f208ebf1dd477e85ffb8434153c4c8c/d3bcb/slide-029.png 325w,
/static/2f208ebf1dd477e85ffb8434153c4c8c/dbb61/slide-029.png 650w,
/static/2f208ebf1dd477e85ffb8434153c4c8c/6b691/slide-029.png 975w,
/static/2f208ebf1dd477e85ffb8434153c4c8c/e11df/slide-029.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/2f208ebf1dd477e85ffb8434153c4c8c/dbb61/slide-029.png" alt="Slide n&#xB0;029" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Tout d&apos;abord, un projet de cet envergure, &#xE7;a se fait gr&#xE2;ce &#xE0; <em>des gens</em>.</p>
<p>Nos ops bossent sur l&apos;infrastructure <em>de base</em>, ce qui est commun &#xE0; tous nos projets, comme les couches r&#xE9;seau ou la gestion des droits. Les d&#xE9;veloppeurs adaptent leurs projets, par exemple pour utiliser SQS au lieu de RabbitMQ. Ils participent &#xE0; l&apos;&#xE9;criture de leur infrastructure. Ensemble, les d&#xE9;veloppeurs et sysadmins vont valider les performances de l&apos;application sur son nouvel h&#xE9;bergement. Et tout au long du process, notre petite &#xE9;quipe DevOps accompagne les d&#xE9;veloppeurs, notamment en s&apos;installant en pair avec eux pour les aider &#xE0; d&#xE9;crire leur infrastructure et &#xE0; d&#xE9;ployer leurs applications.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/aeef93dd7d8569bd5d5f93e1b90e01d4/e11df/slide-030.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABvElEQVQoz42Sz07CQBDGBQrtEyAnTooFORAu5SxFn0Ffg6dAJYUz/6KJejLGhGAPqHf1YhXRCAJNjUVLQaRFKFCntKJGo36Hye7s/Pab7OzU1P9kNpsRBLFYLBiGoShqZGEPG6vVilgQm82mLRAExTDITzCIBEGcnJ4dHx0VCoX84SGUaWd2u93v98/MzLpcLhyfw3Hc45knAoHpaYdO6reQJKmqqizJEFmW/TD/XTocJIO9rnJTLPM8f1sqQY/a2fLKSjKZjEQiFEVF16OJRCKdSqXTEJI721vhcNhkMmlwcEEdqfWHJ1FsMOeM4RyPx6ETUWyqXzUYDCDm83ndnwyRcqdfvLzmuPviVdGAqVgMiip3leFwOBqNhu/q9/uQz+VyOhwKkS/tLs8/asWVitF2bOzMnF9IkgQL4D870zQ9cZY6PZblIFmtVt/hsbMgCBPsRxic283uBVNoNlu1Ws0Y1eraWqv1LAgNRVF6nyTL2lSy2awOw2vLndeGIEKyXC4bzg6Hw+v1etxuzzdB3ul06p9kcWlRflHq/BPAHMf9d8467PP59nb3Nzc2afogk8nAL9TOTH/pl3vfAMHBMb5xVpsuAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/aeef93dd7d8569bd5d5f93e1b90e01d4/50512/slide-030.webp" alt="Slide n&#xB0;030" width="163" height="102" layout="responsive" srcset="/static/aeef93dd7d8569bd5d5f93e1b90e01d4/50512/slide-030.webp 163w,
/static/aeef93dd7d8569bd5d5f93e1b90e01d4/aeba0/slide-030.webp 325w,
/static/aeef93dd7d8569bd5d5f93e1b90e01d4/001d9/slide-030.webp 650w,
/static/aeef93dd7d8569bd5d5f93e1b90e01d4/97fd0/slide-030.webp 975w,
/static/aeef93dd7d8569bd5d5f93e1b90e01d4/3cea3/slide-030.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/aeef93dd7d8569bd5d5f93e1b90e01d4/19bd1/slide-030.png" alt="Slide n&#xB0;030" width="163" height="102" layout="responsive" srcset="/static/aeef93dd7d8569bd5d5f93e1b90e01d4/19bd1/slide-030.png 163w,
/static/aeef93dd7d8569bd5d5f93e1b90e01d4/d3bcb/slide-030.png 325w,
/static/aeef93dd7d8569bd5d5f93e1b90e01d4/dbb61/slide-030.png 650w,
/static/aeef93dd7d8569bd5d5f93e1b90e01d4/6b691/slide-030.png 975w,
/static/aeef93dd7d8569bd5d5f93e1b90e01d4/e11df/slide-030.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/aeef93dd7d8569bd5d5f93e1b90e01d4/dbb61/slide-030.png" alt="Slide n&#xB0;030" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Justement, en parlant d&apos;applications : je vous disais il y a quelques minutes que chaque projet g&#xE9;rait d&#xE9;sormais son h&#xE9;bergement&#x2026; Et bien, voici un de nos projets !</p>
<p>Si on s&apos;&#xE9;tait bas&#xE9; sur <em>les conventions</em>, on aurait plac&#xE9; un <code class="language-text">Dockerfile</code> &#xE0; la racine du projet, un <code class="language-text">Jenkinsfile</code> &#xE0; la racine du projet, un r&#xE9;pertoire <code class="language-text">charts/</code> &#xE0; la racine du projet&#x2026; Enfin, s&#xE9;rieusement, c&apos;est pas d&#xE9;j&#xE0; assez <em>la foire</em> &#xE0; la racine de vos projets ? Donc, on n&apos;a pas fait comme &#xE7;a.</p>
<p>D&#xE9;sormais, dans chacun de nos projets, nous avons un r&#xE9;pertoire nomm&#xE9; <code class="language-text">.cloud/</code>. Il s&apos;appelle toujours ainsi, il est toujours stock&#xE9; &#xE0; la racine du projet et il contient toujours l&apos;ensemble des fichiers d&#xE9;crivant l&apos;infrastructure et le d&#xE9;ploiement. &#xC7;a se traduit par, syst&#xE9;matiquement, les quatre m&#xEA;me sous-r&#xE9;pertoires, pour les quatre &#xE9;tapes du d&#xE9;ploiement d&apos;un projet :</p>
<ul>
<li>La cr&#xE9;ation de son infrastructure avec Terraform,</li>
<li>La cr&#xE9;ation de ses images Docker,</li>
<li>Le d&#xE9;ploiement vers Kubernetes via un Chart Helm,</li>
<li>Et un pipeline Jenkins qui orchestre tout ceci.</li>
</ul>
<p>Il y a quelques mois lors d&apos;une autre conf&#xE9;rence, nous avons appris que AirBnB suivait la m&#xEA;me logique -- leur r&#xE9;pertoire s&apos;appellant <code class="language-text">_infra</code>. <em>Les grands esprits se rencontrent</em>.</p>
<p>Sur la droite de l&apos;&#xE9;cran, vous voyez le contenu du r&#xE9;pertoire <code class="language-text">.cloud/terraform/</code> pour ce projet. Il contient les fichiers qui d&#xE9;crivent l&apos;infrastructure, &#xE0; raison d&apos;un fichier par service. Ces fichiers sont communs &#xE0; tous nos environnements : d&#xE9;veloppement, staging, production. Les seules diff&#xE9;rences entre ces environnement sont des valeurs (par exemple : tailles d&apos;instances) et sont port&#xE9;es dans un fichier par environnement.</p>
<p>Autrement dit et j&apos;insiste : le m&#xEA;me code Terraform d&#xE9;crit nos infrastructures de d&#xE9;veloppement, staging et production. Quand nous d&#xE9;ployons en production, nous savons que <em>&#xE7;a va marcher</em>, puisque nous avons d&#xE9;j&#xE0; d&#xE9;ploy&#xE9; la m&#xEA;me infrastructure en staging, bas&#xE9;e sur le m&#xEA;me code. Et avant cela, nous l&apos;avions d&#xE9;j&#xE0; d&#xE9;ploy&#xE9;e en environnement de d&#xE9;veloppement, o&#xF9; nous travaillons au quotidien !</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/08a6f80d512380367e2c51bc4b8ca692/e11df/slide-031.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABbUlEQVQoz6WRu4rCYBCFfStLHyGVgnY+SlS0kKA2WrggbuUjCGpjYRG7BRtD1LB4wRveb1GzX/5/WTesxYKnOMzMnzNzZuLzvQJFUQqFgqZp2Ww2l8ul0+lMJkOcTCbz+fybQLFYLJVK7wLlcrlSqfj9flecSCQcx9nv97vdbjQazWaz0+lk2zaVy+VyvV6JCe73uyNwu93gSCTiimOxGMnhcKDKF/LtL+QToBFpMBj8nswoXdeHw+F4PKYLz3KahC0gXcCyeygUcsWqqlLqdru9Xg+eTCaWZX0K9Pt9mKYEloBpmuv1+iGOx+Mkq9WKJc/nM/Zg5sPb7RZTxMfjEeYom80GfojlwZbLJSxNYgxG9nR/j+1UKkXearWYMxgMOp3OhwBn/znh78AjlrbRIJ5Op+gNw2DVxWLB/vP5nC7UscaPpIgpz7WlYed/kJPD4bArjkaj7Xa7Wq3WvWg0GvVnqNVqzWYzEAj4XsQXT2QVnip7dIEAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/08a6f80d512380367e2c51bc4b8ca692/50512/slide-031.webp" alt="Slide n&#xB0;031" width="163" height="102" layout="responsive" srcset="/static/08a6f80d512380367e2c51bc4b8ca692/50512/slide-031.webp 163w,
/static/08a6f80d512380367e2c51bc4b8ca692/aeba0/slide-031.webp 325w,
/static/08a6f80d512380367e2c51bc4b8ca692/001d9/slide-031.webp 650w,
/static/08a6f80d512380367e2c51bc4b8ca692/97fd0/slide-031.webp 975w,
/static/08a6f80d512380367e2c51bc4b8ca692/3cea3/slide-031.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/08a6f80d512380367e2c51bc4b8ca692/19bd1/slide-031.png" alt="Slide n&#xB0;031" width="163" height="102" layout="responsive" srcset="/static/08a6f80d512380367e2c51bc4b8ca692/19bd1/slide-031.png 163w,
/static/08a6f80d512380367e2c51bc4b8ca692/d3bcb/slide-031.png 325w,
/static/08a6f80d512380367e2c51bc4b8ca692/dbb61/slide-031.png 650w,
/static/08a6f80d512380367e2c51bc4b8ca692/6b691/slide-031.png 975w,
/static/08a6f80d512380367e2c51bc4b8ca692/e11df/slide-031.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/08a6f80d512380367e2c51bc4b8ca692/dbb61/slide-031.png" alt="Slide n&#xB0;031" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Un fichier Terraform, &#xE7;a ressemble &#xE0; &#xE7;a&#x2026; Bref, du code en HCL et des variables. Je ne m&apos;attarde pas plus que &#xE7;a dessus, c&apos;est pas super fun &#xE0; lire. Par contre, c&apos;est commit&#xE9; et &#xE7;a passe en pull-requests et &#xE7;a c&apos;est top \o/.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/ad395a685feb36fa26497fb892675488/e11df/slide-032.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABT0lEQVQoz6WQvW6CYBSGvStHL4BZEt24DgeNGkLqQpxcqQu3oLWQuOliQkpIjIMayq8CmqAign2BNimptk18hpN8h/Nwvu8tFB6BIIher9fpdFiWffqCYZhut9vv959/wHEcz/PFYjGRa7Wa4zjL5XK/33uet91uUdGJ4/h6iyiKUKvVaiK3222MTqdT27YNw3hPUVXVdd3T6YTRS57z+Qy5XC4ncr1eD8NwPp/D1DQN33zfPx6P+CP69zaTJJnIjUYDo5IkKYqyWCxM0wyC4HqfnEzTNA6z2QzmW4plWZvNBq/4W261WghpMpms12td1/FOPCxI+ZeMgyzLuDC27Xa766/k5GazicNqtULguDlC9lMOhwOyQGZRnizFz7SzzQgZ07gzaiagky25ublSqSQyRVHYORgMRFEUBAH19Ruj0eglz3A4HI/HpVKp8CAfc2oXkMdyvFEAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/ad395a685feb36fa26497fb892675488/50512/slide-032.webp" alt="Slide n&#xB0;032" width="163" height="102" layout="responsive" srcset="/static/ad395a685feb36fa26497fb892675488/50512/slide-032.webp 163w,
/static/ad395a685feb36fa26497fb892675488/aeba0/slide-032.webp 325w,
/static/ad395a685feb36fa26497fb892675488/001d9/slide-032.webp 650w,
/static/ad395a685feb36fa26497fb892675488/97fd0/slide-032.webp 975w,
/static/ad395a685feb36fa26497fb892675488/3cea3/slide-032.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/ad395a685feb36fa26497fb892675488/19bd1/slide-032.png" alt="Slide n&#xB0;032" width="163" height="102" layout="responsive" srcset="/static/ad395a685feb36fa26497fb892675488/19bd1/slide-032.png 163w,
/static/ad395a685feb36fa26497fb892675488/d3bcb/slide-032.png 325w,
/static/ad395a685feb36fa26497fb892675488/dbb61/slide-032.png 650w,
/static/ad395a685feb36fa26497fb892675488/6b691/slide-032.png 975w,
/static/ad395a685feb36fa26497fb892675488/e11df/slide-032.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/ad395a685feb36fa26497fb892675488/dbb61/slide-032.png" alt="Slide n&#xB0;032" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Pareil pour nos manifests Kubernetes, ils sont commit&#xE9;s, historis&#xE9;s, ils sont revus &#xE0; chaque modification. Comme le code des applications.</p>
<p>Par exemple, ici, nous avons un auto-scaler qui fait varier le nombre de <em>pods</em> d&apos;une application de 4 &#xE0; 50. Si nous voulons changer ces valeurs, la modification sera revue par nos coll&#xE8;gues. Et c&apos;est vraiment cool !</p>
<p>Autant les d&#xE9;veloppeurs sont habitu&#xE9;s &#xE0; ce principe depuis des ann&#xE9;es, autant c&apos;&#xE9;tait encore un peu nouveau pour certains ops.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/93c9a1331e9ddaae6d76aeb38ff1df0b/e11df/slide-033.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABYElEQVQoz2NgoAQwMzOzc7CzsrKys7OzsbGxwgALEDCzsLGzcXJyApnYNYuJi+kZ6MnLy+vq6aqoKKuoqmhqaWpoaCgpK2lpawGlTExNpKSkcNoMBExMTHCSmQVMsLAA7YcIYgWMjIwUeZnBw9PD1dXVxcXZBUiAKGcQ5eoCFPRw93CGiLu6OLvCGC7OQODu7g7yy////z9++/Dn35//CPAPiH/++fni83Mw5x8QIMn+//MHpDgxMRGkeeHF2ZffXAAyvv7+/PDT3Qef7gLZ776/nXq679GnB0D28WeHP/x8B2T8/ff3xLPDxx4fArJTUlIYzl85W7uwsn5J9anTJ9fuWd25omXyugkHjx9YtmNJ2fyCxdsXnDlzesq6/o4VzbsO7zhy/FDd4sqmJbUnzh8P8A9gYGJmYgWGKwsrIxMjOKRZmMEhCWQDBYFcYMACGUAuUBComI2FDYggXIahCQBtSKvdq8jhLQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/93c9a1331e9ddaae6d76aeb38ff1df0b/50512/slide-033.webp" alt="Slide n&#xB0;033" width="163" height="102" layout="responsive" srcset="/static/93c9a1331e9ddaae6d76aeb38ff1df0b/50512/slide-033.webp 163w,
/static/93c9a1331e9ddaae6d76aeb38ff1df0b/aeba0/slide-033.webp 325w,
/static/93c9a1331e9ddaae6d76aeb38ff1df0b/001d9/slide-033.webp 650w,
/static/93c9a1331e9ddaae6d76aeb38ff1df0b/97fd0/slide-033.webp 975w,
/static/93c9a1331e9ddaae6d76aeb38ff1df0b/3cea3/slide-033.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/93c9a1331e9ddaae6d76aeb38ff1df0b/19bd1/slide-033.png" alt="Slide n&#xB0;033" width="163" height="102" layout="responsive" srcset="/static/93c9a1331e9ddaae6d76aeb38ff1df0b/19bd1/slide-033.png 163w,
/static/93c9a1331e9ddaae6d76aeb38ff1df0b/d3bcb/slide-033.png 325w,
/static/93c9a1331e9ddaae6d76aeb38ff1df0b/dbb61/slide-033.png 650w,
/static/93c9a1331e9ddaae6d76aeb38ff1df0b/6b691/slide-033.png 975w,
/static/93c9a1331e9ddaae6d76aeb38ff1df0b/e11df/slide-033.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/93c9a1331e9ddaae6d76aeb38ff1df0b/dbb61/slide-033.png" alt="Slide n&#xB0;033" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Ce screenshot date d&apos;il y a plus d&apos;un an : avant qu&apos;on commence notre migration. Il montre le nombre de d&#xE9;ploiements en production par jour : entre 20 et 30. Tous les jours de la semaine.</p>
<p>Depuis <em>toujours</em>, nos d&#xE9;veloppeurs ont l&apos;habitude de d&#xE9;ployer ce qu&apos;ils veulent, quand ils veulent. Une story n&apos;est pas termin&#xE9;e tant que la fonctionnalit&#xE9; n&apos;a pas &#xE9;t&#xE9; d&#xE9;ploy&#xE9;e. Jusqu&apos;en production.</p>
<p>Pour nos d&#xE9;ploiements <em>on-prem</em>, nous passions par <em>GoLive</em> : une interface Web, d&#xE9;velopp&#xE9;e en interne et jamais open-sourc&#xE9;e. Quelques clics et une application &#xE9;tait d&#xE9;ploy&#xE9;e, dans n&apos;importe quel environnement.</p>
<p>Hors de question de perdre cette souplesse en migrant dans <em>Le Cloud</em>. Hors de question que nos d&#xE9;veloppeurs ne puissent plus d&#xE9;ployer ce qu&apos;ils veulent quand ils veulent !</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/ec55409e474564903c0efb47ca38b016/e11df/slide-034.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABL0lEQVQoz8WRyW7CMBCGnaXAmUvuCVwiUWGTvE0WGwVesweq9o4QKr10oQshhWKWJE4o6UDFsVVVDv0v880/Ho09RugUybJcqVRKpdLZUZCWy2VwvvyfmqvVKiFE13VN0wzDaOImpKZp1uv1xnkDQFGUb5tVVYWyfBAwjFJ+J0mSTnoy6na7rusy2qY+9TzPcVzXgehRSvcmBdsHYJT5vs8Ya7M2VIMgqNVqqCiKPMs3KRfbZLcrolkYzp7BESLdZDwV6cd2t055ksVwcr5cRHwuUgHc6XRQnmezaDF8un4Ib1aL+HF6O3y5AphGr/3xRRhNlu/rwfjyfjLa8Lh/N+iNevM3niQxXATZtg0bbhGL4BaGVWNyAAhkb0KG8bGK994BLMuCbzptYdJfhf5Tn79OlDSbR+mRAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/ec55409e474564903c0efb47ca38b016/50512/slide-034.webp" alt="Slide n&#xB0;034" width="163" height="102" layout="responsive" srcset="/static/ec55409e474564903c0efb47ca38b016/50512/slide-034.webp 163w,
/static/ec55409e474564903c0efb47ca38b016/aeba0/slide-034.webp 325w,
/static/ec55409e474564903c0efb47ca38b016/001d9/slide-034.webp 650w,
/static/ec55409e474564903c0efb47ca38b016/97fd0/slide-034.webp 975w,
/static/ec55409e474564903c0efb47ca38b016/3cea3/slide-034.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/ec55409e474564903c0efb47ca38b016/19bd1/slide-034.png" alt="Slide n&#xB0;034" width="163" height="102" layout="responsive" srcset="/static/ec55409e474564903c0efb47ca38b016/19bd1/slide-034.png 163w,
/static/ec55409e474564903c0efb47ca38b016/d3bcb/slide-034.png 325w,
/static/ec55409e474564903c0efb47ca38b016/dbb61/slide-034.png 650w,
/static/ec55409e474564903c0efb47ca38b016/6b691/slide-034.png 975w,
/static/ec55409e474564903c0efb47ca38b016/e11df/slide-034.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/ec55409e474564903c0efb47ca38b016/dbb61/slide-034.png" alt="Slide n&#xB0;034" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p><em>GoLive</em> n&apos;&#xE9;tait pas adapt&#xE9; &#xE0; des d&#xE9;ploiements dans <em>Le Cloud</em> et commen&#xE7;ait &#xE0; montrer son &#xE2;ge&#x2026;</p>
<p>Nous avons cherch&#xE9; et essay&#xE9; quelques solutions open-source pour d&#xE9;ployer vers Kubernetes et autres, mais aucune ne nous a r&#xE9;ellement s&#xE9;duit&#x2026; Donc nous sommes rest&#xE9;s sur un <em>bon vieux pipeline Jenkins</em> qui lance des commandes bash. C&apos;est moche, mais &#xE7;a marche. On se reposera la question de l&apos;outil de CI/CD dans la futur, certainement, mais au moins, on a pu avancer.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/1f2e2be95053316501610384fd45d1f5/e11df/slide-035.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACnklEQVQozy1RiVLaUBTND3SRKsMaSEhCgGASIMgSIqsBxSoC1dbWBUXCZmVkkAKCVqzVWkXt8ru9YO+cufPeeee8e+Y9JBKTY4nF/1hYjC8sxeWlhJyOy+lEMg3byVEKEIkuhCNxSQqLoigIHsHjQq6uRzuFYvGgUixVD5TaGOVaSakplUOlUi/XjsrVz6Vyfadw8Gm7sPlxa2N9I7uW6Z92Rz9vkFJJYRgbz80GAz6v1+N2cy6eFQS33+d1Mnbg3S4Oumrq5dTrFzqtBkWNGo26WlF+P42QRqORlOVsNpvL5dYmlcvn0+llaV6KRSPheTEei6aSqWRSTqWS4bAkin4pFNx8v/6l1UTKZSUUEjOZTD6Xy2RWV1beQg8BFQx4PG6Om+VdHJTTyXAca6Mph502oYa93a3R3Q+ksLvNc2w0GkkkYpHIvCgGALFoOJWSvfAmPDfnFWARDPgZxkFRpNVKms1ovVb9++sRKe4XPG4XREqnlyBnSBKhx+MxnmcpinCBG4bzrHdOALOVImkrhWHmerXy5+kB+bDxzoQa7XaaIHAbbQWFk3E4HDbYEoSFJCyEBYeBJElQEydMxjFzraI83t8i+eyqXqelyLEIDBYLhmGmsdOCq6ZeqWdUWs0MTVM0bYWxVooAgKBaLt3ffkdyEzNQJIEbDFoU1Y+vwM1ardpsMsIax1DID7dT5FgDAF4p7t3dfEPWVpd1Og1QRr3OoNcQFgyk09Mq9cybsYciCAIjSciPP8cBAbz2/u7W9eU50m03m43DXqfVbh33e52zfg96p90a9LvD4fByOLz4enY+6A/6vcFp97Tb7pw0T46PLgbdq4sB4uJYn1fw++bgM8RgEBAMBKTQc4nw3c8MnAICfh8oQe/mWXaW+Qc6b8i8BYE3kAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/1f2e2be95053316501610384fd45d1f5/50512/slide-035.webp" alt="Slide n&#xB0;035" width="163" height="102" layout="responsive" srcset="/static/1f2e2be95053316501610384fd45d1f5/50512/slide-035.webp 163w,
/static/1f2e2be95053316501610384fd45d1f5/aeba0/slide-035.webp 325w,
/static/1f2e2be95053316501610384fd45d1f5/001d9/slide-035.webp 650w,
/static/1f2e2be95053316501610384fd45d1f5/97fd0/slide-035.webp 975w,
/static/1f2e2be95053316501610384fd45d1f5/3cea3/slide-035.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/1f2e2be95053316501610384fd45d1f5/19bd1/slide-035.png" alt="Slide n&#xB0;035" width="163" height="102" layout="responsive" srcset="/static/1f2e2be95053316501610384fd45d1f5/19bd1/slide-035.png 163w,
/static/1f2e2be95053316501610384fd45d1f5/d3bcb/slide-035.png 325w,
/static/1f2e2be95053316501610384fd45d1f5/dbb61/slide-035.png 650w,
/static/1f2e2be95053316501610384fd45d1f5/6b691/slide-035.png 975w,
/static/1f2e2be95053316501610384fd45d1f5/e11df/slide-035.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/1f2e2be95053316501610384fd45d1f5/dbb61/slide-035.png" alt="Slide n&#xB0;035" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Maintenant, comment est-ce qu&apos;on migre toute une plateforme ?</p>
<p>Et bien, on a commenc&#xE9; par une premi&#xE8;re application, la plus simple possible : une API sans d&#xE9;pendance, sans base de donn&#xE9;es, <em>stateless</em>, avec une seule route. Objectif : apprendre.</p>
<p>Ensuite, on est pass&#xE9; &#xE0; des applications plus complexes, avec des d&#xE9;pendances ; y compris des applications d&#xE9;pendant de services manag&#xE9;s.</p>
<p>Une fois qu&apos;on aura fait tout &#xE7;a (et c&apos;est &#xE0; peu pr&#xE8;s l&#xE0; o&#xF9; on en est de notre migration)&#x2026; Il nous restera les backoffices et les API internes&#x2026; Les trucs pas bien fun et pour lesquels l&apos;&#xE9;lasticit&#xE9; du <em>Cloud</em> ne servira pas tellement&#x2026; Mais pour vider notre salle serveur <em>on-prem</em>, on n&apos;a pas trop le choix.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/6b8da7492ef5e1928ac98153eb096b7c/e11df/slide-036.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAAwElEQVQoz82Qyw6CMBBF22kLLdTyEAxF0IWYsKhBFr5+wP//JAdi4g5CTIy302TS3NPbKSHfiHOulBJCSCkZY8vgTZ7frpemaU7ObctycTilFADoqFnnrIcIoD4HOdSkFSNLa4uiwI3zw2g+rOVjv7rv9PMYcUYJrqFoVVXW2g9sInPuurqu+77PswxZzsBnoAQIbDjgfchjn6Zp27bOuSRJ3o/3PC+OY8zUWodhODEtGowxSAZBgAfk15r/7b/XC/VBCrNT+VEMAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/6b8da7492ef5e1928ac98153eb096b7c/50512/slide-036.webp" alt="Slide n&#xB0;036" width="163" height="102" layout="responsive" srcset="/static/6b8da7492ef5e1928ac98153eb096b7c/50512/slide-036.webp 163w,
/static/6b8da7492ef5e1928ac98153eb096b7c/aeba0/slide-036.webp 325w,
/static/6b8da7492ef5e1928ac98153eb096b7c/001d9/slide-036.webp 650w,
/static/6b8da7492ef5e1928ac98153eb096b7c/97fd0/slide-036.webp 975w,
/static/6b8da7492ef5e1928ac98153eb096b7c/3cea3/slide-036.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/6b8da7492ef5e1928ac98153eb096b7c/19bd1/slide-036.png" alt="Slide n&#xB0;036" width="163" height="102" layout="responsive" srcset="/static/6b8da7492ef5e1928ac98153eb096b7c/19bd1/slide-036.png 163w,
/static/6b8da7492ef5e1928ac98153eb096b7c/d3bcb/slide-036.png 325w,
/static/6b8da7492ef5e1928ac98153eb096b7c/dbb61/slide-036.png 650w,
/static/6b8da7492ef5e1928ac98153eb096b7c/6b691/slide-036.png 975w,
/static/6b8da7492ef5e1928ac98153eb096b7c/e11df/slide-036.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/6b8da7492ef5e1928ac98153eb096b7c/dbb61/slide-036.png" alt="Slide n&#xB0;036" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>En d&#xE9;cembre 2017, alors que nous allions commencer notre migration, AWS a ouvert sa r&#xE9;gion Paris. Et cette r&#xE9;gion, c&apos;est super pour nous ! otre datacentre <em>on-prem</em> est en r&#xE9;gion parisienne&#x2026; Et nous n&apos;avons donc que 1.4 milliseconde de <em>ping</em> entre nos deux h&#xE9;bergements !</p>
<p>Cela nous facilite &#xE9;norm&#xE9;ment la vie : nous pouvons tr&#xE8;s bien avoir une application encore h&#xE9;berg&#xE9;e <em>on-prem</em> qui effectue des appels d&apos;API vers une second application d&#xE9;j&#xE0; migr&#xE9;e chez AWS.</p>
<p>Ou, plus <em>moche</em> mais extr&#xEA;mement pratique, nous pouvons migrer une application dans <em>Le Cloud</em> tout en conservant sa base de donn&#xE9;es <em>on-prem</em>, en effectuant des requ&#xEA;tes SQL cross-h&#xE9;bergement via un VPN. &#xC7;a marche tr&#xE8;s bien, nous l&apos;avons fait pendant plusieurs jours/semaines, le temps de migrer progressivement certaines applications.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/eda0b26fd2934f17d98c3c1b556927a5/e11df/slide-037.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAB2ElEQVQoz6WS32saQRDHV4o/ciD4JCiIED3P0uZfSTUaSOtr9JQUbF9a6D+SPJTSvpRCC+lzk5CXhARSbI13alpPzbm7d9pc1POMGiF2omDbkJRAvnxYhtn5zrDMInQXmc1mhmGsVusMw8yMZR3LZrNB3mKx3LtBJpMJQZHL5XK73RzHwenxeBwOh9PphNjr9YL/f5OfpdPx5eVUMplKpXieT/J8IpF4vLS0GI1EwuFwKPRofj4Wi/Hj/ETxePzpygrLsmg0GrWazY6uA0an0zWMU007yudz2ez3TEY4zOYFAcsyXE3R2+3RxQUMQGfd7nG1SmrA8RgZY0wJARRKVUWpqyoEBOMpNVlualpkYQENej2oJ/UBqfew2q/RFlxSfOkEJl0mjaaAv91qwbNQv39eq4j6YVrPvWx/S2qFVUJPFPpP9RX+mIfnQ40UhsUXhvhqIKb7lTda49Zm5bT7abf0+asm4bO9o87HfWUjU6GE3sp8UDUW13JPXgvZn/LaVim0Kj7/8ANqGqpavwHww2qi0SiSyMm7jdz77YJQLH3ZF99uCus7RakklaVLKuUy7OIKkPzVaMAnQPe5wMOgby7oZ/0+jp2dC/oecH7fX/Jfp0AgYLfbfwPoYbrTkeUwegAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/eda0b26fd2934f17d98c3c1b556927a5/50512/slide-037.webp" alt="Slide n&#xB0;037" width="163" height="102" layout="responsive" srcset="/static/eda0b26fd2934f17d98c3c1b556927a5/50512/slide-037.webp 163w,
/static/eda0b26fd2934f17d98c3c1b556927a5/aeba0/slide-037.webp 325w,
/static/eda0b26fd2934f17d98c3c1b556927a5/001d9/slide-037.webp 650w,
/static/eda0b26fd2934f17d98c3c1b556927a5/97fd0/slide-037.webp 975w,
/static/eda0b26fd2934f17d98c3c1b556927a5/3cea3/slide-037.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/eda0b26fd2934f17d98c3c1b556927a5/19bd1/slide-037.png" alt="Slide n&#xB0;037" width="163" height="102" layout="responsive" srcset="/static/eda0b26fd2934f17d98c3c1b556927a5/19bd1/slide-037.png 163w,
/static/eda0b26fd2934f17d98c3c1b556927a5/d3bcb/slide-037.png 325w,
/static/eda0b26fd2934f17d98c3c1b556927a5/dbb61/slide-037.png 650w,
/static/eda0b26fd2934f17d98c3c1b556927a5/6b691/slide-037.png 975w,
/static/eda0b26fd2934f17d98c3c1b556927a5/e11df/slide-037.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/eda0b26fd2934f17d98c3c1b556927a5/dbb61/slide-037.png" alt="Slide n&#xB0;037" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Pour migrer une application, plus en d&#xE9;tails, comment faisons-nous ? Au d&#xE9;part, notre applications est h&#xE9;berg&#xE9;e <em>on-prem</em>, les requ&#xEA;tes effectu&#xE9;es par nos utilisateurs arrivent directement sur cet h&#xE9;bergement historique.</p>
<p>Ici, une application typique pour nous : plusieurs serveurs nginx+php, avec Varnish devant qui fait du load-balacing et du cache HTTP.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/e111bb38a8b95ac53bd4de39e5d53447/e11df/slide-038.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACFElEQVQoz6WSzWsaQRjGV4r4hZiTHhQqrrta2vinJFE3JebuxgQx7aWF/A09ln6FUnpoemghh9JLJZSWFkNLk6q7Uau7rrvuqJt1/ViNGiF2jCAm2FMffrwz887zMMMwCPI/0uv1JpPJYDDodLpxhWuDwWg0wrlWq4UVNsxmM/RAw40ZaTQaBG74fD673W6xWGxW602n0+VyoSjqdDotCwuwWq1WDMMcDofNZhsHZrUdi22Q5MZEJLm1uQnH0NraKhG8SwQDKyvLS0vroRBJkpFIhLxUOByORqMYjiOj0ajZaHRUdUK301Hqci5zkvqdPPp1TCWTJxRVFgTYn3rardbo4gIegJx1uyWOEwVIiefYEscIvPBoj955kbr/+PhTgm0pkigCsVyeIvB8o14PBgLIoNcT+LJYGwCpz5TaubwItw8OmY9fCx++5FOZUq0CgCjCMgUaWs0mEQwi/f65UKTbqW01/VBNbim55yKQlVPQkKtNuSpVoRfMJq+Eh+fDupgZZh906J0BFeuxLxVJBuOLggnXklfCFaX7/nth/2edKZ8lcuq7RCV+VARgTmZO+AfXWX2aXt+lknn+2UFh+Ql97+0f6JGq1do/gHm13SYIAmFF+XU8/eZzhs4W4of0qzi1/y3LFBiWGVNk4ftz14DNU0ny+/3ILQ9+x4suet2YG/VgrkUvetvjRmfkniccx+HX/Avfk7kxbcAqeQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/e111bb38a8b95ac53bd4de39e5d53447/50512/slide-038.webp" alt="Slide n&#xB0;038" width="163" height="102" layout="responsive" srcset="/static/e111bb38a8b95ac53bd4de39e5d53447/50512/slide-038.webp 163w,
/static/e111bb38a8b95ac53bd4de39e5d53447/aeba0/slide-038.webp 325w,
/static/e111bb38a8b95ac53bd4de39e5d53447/001d9/slide-038.webp 650w,
/static/e111bb38a8b95ac53bd4de39e5d53447/97fd0/slide-038.webp 975w,
/static/e111bb38a8b95ac53bd4de39e5d53447/3cea3/slide-038.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/e111bb38a8b95ac53bd4de39e5d53447/19bd1/slide-038.png" alt="Slide n&#xB0;038" width="163" height="102" layout="responsive" srcset="/static/e111bb38a8b95ac53bd4de39e5d53447/19bd1/slide-038.png 163w,
/static/e111bb38a8b95ac53bd4de39e5d53447/d3bcb/slide-038.png 325w,
/static/e111bb38a8b95ac53bd4de39e5d53447/dbb61/slide-038.png 650w,
/static/e111bb38a8b95ac53bd4de39e5d53447/6b691/slide-038.png 975w,
/static/e111bb38a8b95ac53bd4de39e5d53447/e11df/slide-038.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/e111bb38a8b95ac53bd4de39e5d53447/dbb61/slide-038.png" alt="Slide n&#xB0;038" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>La premi&#xE8;re &#xE9;tape pour migrer cette application vers <em>Le Cloud</em> est d&apos;installer un proxy devant elle.</p>
<p>Nous utilisons HAProxy, logiciel open-source que nous exploitons depuis des ann&#xE9;es pour divers besoins et qui marche tr&#xE8;s bien, qui tient tr&#xE8;s bien la charge. Le trafic arrive d&apos;Internet sur HAProxy, qui le transf&#xE8;re vers l&apos;application. Nous avons ici juste ajout&#xE9; un composant.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/20447417fc602067fdf6d672f24cbf72/e11df/slide-039.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACpElEQVQoz6VSS2sTURidIqVpS0k3bRcJ5DGZpFXanX+jjySWRnAlTfrQKIKCbvwBiiiCtoqWburCgmIRhfRhldBqa9q8kyYzk3ncO9M8ZpJJ0iSNNN5Uwe49HA6H+53Dd+FeDPsfqFSqzs7O9vb2trY2pCqkKlVHRwfyra2tzROVqqurC2VQ4NwZtLS0YGgwNDSk0WjUanVfb69OpzMaDDiO6/V6dXc30p6eHrPZrNVq+3r7moWzuOG+7nI6XX/hnJmZdjldjomJSzbbuN0+Njo6Mjx82eFwOp1TU1POU0xOTl6bnSUIAms0GnlZLhWLf1guleRcLh6NBPb9vl1fKOCPRCI8D8olNM2XiwWUUQqFxskJWoAdlctMKgU4RIZNUQxNciz3cCl070Xg1tM9zxalgDg8CPC8wIE8D3KA51iWlXI5m9WK1SoVjuWBWIPpKskqB0kAeH7tO/nxW3JlMxGIMWmQggwtcomi3y3H56CQATxbyMt2mw2rVo85Oqz43cXgnaJ/WorPA5iV0lDOCvmsmBEhJ2bozC/IeBtrWHX7In2oUIKcLyjNcv24ngPReux2KXS3FnJXqFe5dBYCAAFEFABg0woj17lcMZtcOOQ2kKezFalwZLdZMUEqL3vJ9zsSyZe34sW324LHR0MIBdgspwUYZKQnq9yjz/QmWV/2FR58Si56oayclndSJfvzkONl2J9g59aSI8/CN98cQCimRVEQRCl9uEvJVxcTV14frASlx+twfD56/wOjlGroLTEKZBc9waWNaDiW9GyHF1bD77wxiiRpiqQoMkUm4wny6z795Uc4GAjt7oXWfya2/El0I+vYKDZgMQ/244P9JsKEWwgj8hcsJvwfjARuGDDjAyadWa/pN2jPE0aLyUgQOPqavwFgsa5fbaBLvQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/20447417fc602067fdf6d672f24cbf72/50512/slide-039.webp" alt="Slide n&#xB0;039" width="163" height="102" layout="responsive" srcset="/static/20447417fc602067fdf6d672f24cbf72/50512/slide-039.webp 163w,
/static/20447417fc602067fdf6d672f24cbf72/aeba0/slide-039.webp 325w,
/static/20447417fc602067fdf6d672f24cbf72/001d9/slide-039.webp 650w,
/static/20447417fc602067fdf6d672f24cbf72/97fd0/slide-039.webp 975w,
/static/20447417fc602067fdf6d672f24cbf72/3cea3/slide-039.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/20447417fc602067fdf6d672f24cbf72/19bd1/slide-039.png" alt="Slide n&#xB0;039" width="163" height="102" layout="responsive" srcset="/static/20447417fc602067fdf6d672f24cbf72/19bd1/slide-039.png 163w,
/static/20447417fc602067fdf6d672f24cbf72/d3bcb/slide-039.png 325w,
/static/20447417fc602067fdf6d672f24cbf72/dbb61/slide-039.png 650w,
/static/20447417fc602067fdf6d672f24cbf72/6b691/slide-039.png 975w,
/static/20447417fc602067fdf6d672f24cbf72/e11df/slide-039.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/20447417fc602067fdf6d672f24cbf72/dbb61/slide-039.png" alt="Slide n&#xB0;039" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Ensuite, nous d&#xE9;ployons notre application dans <em>Le Cloud</em>. Sans toucher &#xE0; quoi que ce soit <em>on-prem</em>. L&apos;ensemble du trafic qui arrive sur HAProxy continue d&apos;&#xEA;tre envoy&#xE9; <em>on-prem</em> et aucun utilisateur n&apos;est donc servi depuis <em>Le Cloud</em>.</p>
<p>Par contre, nous, qui connaissons l&apos;adresse directe du service d&#xE9;ploy&#xE9; dans <em>Le Cloud</em>, pouvons l&apos;interroger manuellement -- et, ainsi, valider que notre application a l&apos;air de fonctionner.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/16b06e52c30030e7ef88707dc2f31f69/e11df/slide-040.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACo0lEQVQoz6WSy08TURTGhxjS4dGwgi7apI/ptEWFnf8GYFsINXFlKGCw6kITVv4BGqMxUdQEwkJdSKKRGE0qICqhEQTaTmlLZ9rO497pYzrTdlpoqaHeogv2/vLl5tyT8+U7yb0Y9j/gON7V1dXR0YFrNP9OHO/s7ER1e3t7q4PjWq0WzWg0mnNnaGtrw7Td3YODg3q9vqenR9fXZzQaLWYzQRBmkwl1TCZTb28vSZIGg0Gn07UMZ7np8016vZN/8XqvT0+jm2d8fNTtGnO7nSMjw0NDVzwer9c7NTXlPWViYmJmZoa02bBms1lUlIqqIlWRKhW5UIhHo6G94M72LhUK7u/vCwKoVtRKuVhVS2isXCo1T05QAHZYrbLpNOCRWC7N8GyK54UHr6nZF6HbT3b9m8mSSAOaEgSRB0UBFIDAcxyHAlxOJ1Y/OuI5AWTrMFdLpIvJdBYCsBJgPn6nl9cToRibAyzk0hk+oQZ9SnwOinkgcKWi4na5sFrtmE9FykGfGr6rBqfl2ByAkpyHiiQWpUw+A/lMPpX/DdmN5gpWC1xKZctJUSmWyi1z47hRANFG7E6Fmq1TN2rJ+UJOQuEQQCQRAC5XZpUGL6kSvZDl11Cdko7k0qHb5cREubq0wbzfkhmhuhlX3wZE/04KQijCljknwjArP/7CP/ycWmcaSzul+5/oxQ2olE/NW+mK+xnleRkJJri5FXr4aeTWmwMIM7lMRhQzci67nVSuLSauzh8sh+VHq3DsefTeB7ZcqY+itRkgLfrDr9aiVIz2ByIL/si7HzGGZpJMizRDxxPMt73k159UOESht1v9ldgM0mgj5+URrN9uu+ggBhxW0krYScuAg7hgtxJnIAlzv83SbzXaTHqH2XCetNitFpIk0J/9A4N6rmncnPsZAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/16b06e52c30030e7ef88707dc2f31f69/50512/slide-040.webp" alt="Slide n&#xB0;040" width="163" height="102" layout="responsive" srcset="/static/16b06e52c30030e7ef88707dc2f31f69/50512/slide-040.webp 163w,
/static/16b06e52c30030e7ef88707dc2f31f69/aeba0/slide-040.webp 325w,
/static/16b06e52c30030e7ef88707dc2f31f69/001d9/slide-040.webp 650w,
/static/16b06e52c30030e7ef88707dc2f31f69/97fd0/slide-040.webp 975w,
/static/16b06e52c30030e7ef88707dc2f31f69/3cea3/slide-040.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/16b06e52c30030e7ef88707dc2f31f69/19bd1/slide-040.png" alt="Slide n&#xB0;040" width="163" height="102" layout="responsive" srcset="/static/16b06e52c30030e7ef88707dc2f31f69/19bd1/slide-040.png 163w,
/static/16b06e52c30030e7ef88707dc2f31f69/d3bcb/slide-040.png 325w,
/static/16b06e52c30030e7ef88707dc2f31f69/dbb61/slide-040.png 650w,
/static/16b06e52c30030e7ef88707dc2f31f69/6b691/slide-040.png 975w,
/static/16b06e52c30030e7ef88707dc2f31f69/e11df/slide-040.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/16b06e52c30030e7ef88707dc2f31f69/dbb61/slide-040.png" alt="Slide n&#xB0;040" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Si l&apos;application, d&#xE9;ploy&#xE9;e dans <em>Le Cloud</em>, a l&apos;air de fonctionner pour nous&#x2026; Passons &#xE0; de vrais utilisateurs ! On y va prudemment : on reconfigure HAProxy pour envoyer 1% du trafic vers notre nouvel h&#xE9;bergement et conservons 99% du trafic <em>on-prem</em>.</p>
<p>Vu la charge qu&apos;on prend sur nos services, avec 1% du trafic qui arrive sur notre nouvel h&#xE9;bergement, si un truc est mal configur&#xE9;, on s&apos;en rend g&#xE9;n&#xE9;ralement vite compte ;-).</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/07e386c170b2b19acd0a055cdb224fc9/e11df/slide-041.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACoElEQVQoz6WS3U/TUBjGSwzZgJB5tV1syT66jaHCnf8G4DYIM/HKUEAE9UITr/wHiNGYKGoCwUS9kEQj0ZhMQIhkC8JgX2xj7bqu7enWde3abrAxwzwDE7n3lydv3vOe58l7Lg6C/A9arbarq6ujo0Or0fytWm1nZyfs29vbWxOttru7G3o0Gs2Fc7S1tSHwor+/32g06nQ6g15vNpttViuKohaLRXdRB6ter3c4HSaTyWAwtALnuTM9PY5h42dg2K3JSXjyjY4Oez0jXq97aGhwYOC6z4dh2MTEBHbK2NjY7akph8OBNJvNsiRVVPVM1UpFLJVSiURkLxzaCcUikf39fYYBcF5RylVVhh5FlpsnJ3ABclitUtksS0NRuSxBUyRNM7PvYg9fRe492/UHMjLAQSzI0AzNygxbYhk6l8vBBR63G6kfHdE5hi3UAV/DKTmT5QHLrgSJLxv48no6kqR4lgJZIk8fqHszUmoOcEWWycllyevxILXaMU3GlfCMGn2ghifF1BwLBLEIJIErC/liHtD5Iin8BtRmcwWpBa+SBSXDSWVZaYUbx40Sm2gk71fiD+uxmVpmvsQLcDlgARTHsjleoaQGLagCvlCg12BPCkeifOj1uBFOrC5tEp9+iQRzGEipHwKcP0QCADjQCvMciFLi0+/042/kOtFYCsmzX/HFTSApp+GtbGX4Rcz3Oh5O5+ZW8MHn8bvvDwDI8/k8x+VFvrCdkW6+Sd+YP1iOik9WwcjLxKPPlFKpD8NnE4yw6I++XUvEk7g/GF/wxz/+TBI4kSFaZIl0Kk1shMkfW/FoJLq9G1vdSQfCOM+x7mtDSG+P84oL7XPZHXa0x2Hrc6GXe+zoP2wO1NrrRHvtZqfF6LKaLjlt0AbN8Gv+AWChrlaxSmfPAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/07e386c170b2b19acd0a055cdb224fc9/50512/slide-041.webp" alt="Slide n&#xB0;041" width="163" height="102" layout="responsive" srcset="/static/07e386c170b2b19acd0a055cdb224fc9/50512/slide-041.webp 163w,
/static/07e386c170b2b19acd0a055cdb224fc9/aeba0/slide-041.webp 325w,
/static/07e386c170b2b19acd0a055cdb224fc9/001d9/slide-041.webp 650w,
/static/07e386c170b2b19acd0a055cdb224fc9/97fd0/slide-041.webp 975w,
/static/07e386c170b2b19acd0a055cdb224fc9/3cea3/slide-041.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/07e386c170b2b19acd0a055cdb224fc9/19bd1/slide-041.png" alt="Slide n&#xB0;041" width="163" height="102" layout="responsive" srcset="/static/07e386c170b2b19acd0a055cdb224fc9/19bd1/slide-041.png 163w,
/static/07e386c170b2b19acd0a055cdb224fc9/d3bcb/slide-041.png 325w,
/static/07e386c170b2b19acd0a055cdb224fc9/dbb61/slide-041.png 650w,
/static/07e386c170b2b19acd0a055cdb224fc9/6b691/slide-041.png 975w,
/static/07e386c170b2b19acd0a055cdb224fc9/e11df/slide-041.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/07e386c170b2b19acd0a055cdb224fc9/dbb61/slide-041.png" alt="Slide n&#xB0;041" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Si tout a l&apos;air de fonctionner avec 1% du trafic servi par <em>Le Cloud</em>, nous montons progressivement en puissance : 5%, 10%, 15%, 25%, 50%, 75%&#x2026;</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/28897e62f3c1fca7af6a30e1c5ed952d/e11df/slide-042.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACmklEQVQoz6WSS08TURTHhxgChRB2JbEkfUynBRV2fg0eLRhq4sq0PEKqLozRjV+AGE2MoiYQWeBCFkSiMSkPUQkNQqEv2tLOTOdx7+1rZjrTFgqN1FtMDHt/+efcc885/5y7uATxP7S2tra3t+t0upaWlkbEd52ura0N583NzTjiQkdHB57BA1cu0dTUROBGf3//VYOhs7OzS683Go1ms5kkSZPJhCs46vV6iqK6DQZ9V1fDcJl7Xu+4xzP+F49nanISn66xsdERJ9bw0NDgwMBtl8vjcU9MTHgucLvd09PTlM1G1Ov1oqKUS6V/kiUpEYuFD4KBvUAkFDw8PBQBqpQrZa1YKal4QFPV+vk5XkAcVypcOg0ELE7gGJHnBF6YWYw8fht68HLf56dVxKCDTZFJCkgTgQREged5vMDpcBCnJycCL4LsKchWaU7lRQkCcc1Pf/6RWtlMhuJcDnCQTWa4eDnoVRKzEOWByKtFZcTpJKrVM4GNakFvKfyoFJyS47MAFuQ8VAqoWMjkM1DI5NnCb8ht1deIqv8mm9UYpBRVrWGundUkEKvFH5YjT6oRb5WZk3IFCAAEEAsBwOc0TqkJUqlAz2eFDZyzhRNZPR5xOggkV5a26OVfMi0ebydKH/3IF2AhhAg2zDkEw5z8YlV49pXdpGtLAXXmS+r9T6hoF+addHn0dcT1LhpM8rNrqcFX0fsfjrA3l8kglJFz2V1GubuQvDN3tBKWn6/DW29iTz9xWvl0FD+bAdKCL7K4EYvGUz5/dH41uryVYGiGZRqk6VQiSX8/YL7tRMKh8O5+eH3vaDuYyiHgGB4ieu22Gz1kX4+VspJ2ytLXQ163W8lLUKS512bptRptJoPd3H2NstitFooi8df8A1gprlyIrKptAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/28897e62f3c1fca7af6a30e1c5ed952d/50512/slide-042.webp" alt="Slide n&#xB0;042" width="163" height="102" layout="responsive" srcset="/static/28897e62f3c1fca7af6a30e1c5ed952d/50512/slide-042.webp 163w,
/static/28897e62f3c1fca7af6a30e1c5ed952d/aeba0/slide-042.webp 325w,
/static/28897e62f3c1fca7af6a30e1c5ed952d/001d9/slide-042.webp 650w,
/static/28897e62f3c1fca7af6a30e1c5ed952d/97fd0/slide-042.webp 975w,
/static/28897e62f3c1fca7af6a30e1c5ed952d/3cea3/slide-042.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/28897e62f3c1fca7af6a30e1c5ed952d/19bd1/slide-042.png" alt="Slide n&#xB0;042" width="163" height="102" layout="responsive" srcset="/static/28897e62f3c1fca7af6a30e1c5ed952d/19bd1/slide-042.png 163w,
/static/28897e62f3c1fca7af6a30e1c5ed952d/d3bcb/slide-042.png 325w,
/static/28897e62f3c1fca7af6a30e1c5ed952d/dbb61/slide-042.png 650w,
/static/28897e62f3c1fca7af6a30e1c5ed952d/6b691/slide-042.png 975w,
/static/28897e62f3c1fca7af6a30e1c5ed952d/e11df/slide-042.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/28897e62f3c1fca7af6a30e1c5ed952d/dbb61/slide-042.png" alt="Slide n&#xB0;042" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>&#x2026; Jusqu&apos;&#xE0; arriver &#xE0; 100% du trafic servi depuis notre nouvel h&#xE9;bergement. Mais en ayant encore HAProxy devant. Et nous pouvons rester dans cette configuration pendant quelques jours (ou quelques semaines si besoin), le temps de valider que tout marche bien, y compris le soir pendant notre pic de trafic.</p>
<p>Pendant toute cette phase de bascule, si l&apos;application cesse de fonctionner dans <em>Le Cloud</em>, si elle part en <em>timeout</em> ou commence &#xE0; retourner des erreurs 500, HAProxy rebascule automatiquement l&apos;ensemble du trafic vers notre h&#xE9;bergement <em>on-prem</em> (et, oui, nous avons test&#xE9; et valid&#xE9; ce comportement avant de le mettre en place sur une vraie application).</p>
<p>Cela signifie que la bascule d&apos;un h&#xE9;bergement &#xE0; l&apos;autre est progressive et quasiment sans risque : en cas de probl&#xE8;me, HAProxy revient 100% <em>on-prem</em>, o&#xF9; l&apos;application fonctionnait depuis des ann&#xE9;es.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/a2650c813af2a3f74ed9cb061f8afa31/e11df/slide-043.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAB60lEQVQoz6VQTW/aQBAN9M4NKT1xA0zSf5AAJaBG6U+rKqQo5rekDRcI6aWnSk3Uj6SIhBAMBnbtXa+9n521pZKc+/Q0ejO7b3Zndnb+B/lXFvl8PpfLQQoRdCagbtNtPZfd2aJcLrfb7VarVa/XDwCHB0dHrWbrLQCSRqMB9WazefL+pNPpHB+/cxynWCwWCgVrPv90rrTGQUApjaKIEBISkgnfX0IklDLGIsbgGO5ghIwx3W7XmkejESRSKmOA2jyHCo2W5iWEEBB7vZ41D4dDW1JGJb4Mf2udttEa2sj4SXOkbUudRkueml3XtebBYJC9rOhE+CNFx1orJUIliMTf5Oar5lg/A+d8a77o9yFJ0LXE3xV7lPRWxXOx/sIXfRn+lMGNWF1pGdln0++8MA8G9tscXSs2U/FChL8EnSg2l9FUMc/OQm5V9GDHTRtkM7tn6cIuL+3CROSp2DPcDzc/0PrGiLVOliZZ6mRh+BpmUdEkWx4nj8bcu6cfUvPoys7MngxfAkkwxuguodOYPtBwzMg9CDhV9I+OxppNk+DOGNpzT9OZLz7zONj4M7T2SLAK8AJjLyNCc4wgWoHwElt6q9UMVtTtfrTmUqnkOLVKpVquVKugansZHWfvn07TWgor9vff7O6+Bu9fhVfysWQw1QYAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/a2650c813af2a3f74ed9cb061f8afa31/50512/slide-043.webp" alt="Slide n&#xB0;043" width="163" height="102" layout="responsive" srcset="/static/a2650c813af2a3f74ed9cb061f8afa31/50512/slide-043.webp 163w,
/static/a2650c813af2a3f74ed9cb061f8afa31/aeba0/slide-043.webp 325w,
/static/a2650c813af2a3f74ed9cb061f8afa31/001d9/slide-043.webp 650w,
/static/a2650c813af2a3f74ed9cb061f8afa31/97fd0/slide-043.webp 975w,
/static/a2650c813af2a3f74ed9cb061f8afa31/3cea3/slide-043.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/a2650c813af2a3f74ed9cb061f8afa31/19bd1/slide-043.png" alt="Slide n&#xB0;043" width="163" height="102" layout="responsive" srcset="/static/a2650c813af2a3f74ed9cb061f8afa31/19bd1/slide-043.png 163w,
/static/a2650c813af2a3f74ed9cb061f8afa31/d3bcb/slide-043.png 325w,
/static/a2650c813af2a3f74ed9cb061f8afa31/dbb61/slide-043.png 650w,
/static/a2650c813af2a3f74ed9cb061f8afa31/6b691/slide-043.png 975w,
/static/a2650c813af2a3f74ed9cb061f8afa31/e11df/slide-043.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/a2650c813af2a3f74ed9cb061f8afa31/dbb61/slide-043.png" alt="Slide n&#xB0;043" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Ici, on voit le trafic sur les deux h&#xE9;bergements d&apos;une de nos application, le jour o&#xF9; nous avons commenc&#xE9; &#xE0; le basculer dans <em>Le Cloud</em> :</p>
<ul>
<li>Vers 10h, nous avons configur&#xE9; le DNS pour pointer vers HAProxy. L&apos;ensemble du trafic est alors envoy&#xE9; <em>on-prem</em>, en orange.</li>
<li>Vers 14h30, nous avons reconfigur&#xE9; HAProxy pour envoyer 10% du trafic de l&apos;application vers son nouvel h&#xE9;bergement dans <em>Le Cloud</em>, en vert.</li>
<li>Ne constatant pas de probl&#xE8;me, nous sommes mont&#xE9;s &#xE0; 50% une demi-heure apr&#xE8;s et les deux courbes oranges et vertes se chevauchant pendant un moment.</li>
<li>Vers 16h30, tout avait l&apos;air de bien se passer. Nous sommes toutefois revenus &#xE0; seulement 10% du trafic dans <em>Le Cloud</em>, en pr&#xE9;vision du pic de charge du soir et sommes rest&#xE9;s dans cette configuration jusqu&apos;au lendemain -- et tout s&apos;est bien pass&#xE9; pendant la soir&#xE9;e et la nuit.</li>
</ul>
<p>Sur les jours suivant, nous avons donc r&#xE9;-envoy&#xE9; 50% du trafic dans <em>Le Cloud</em>, puis sommes mont&#xE9;s jusqu&apos;&#xE0; 99% et y sommes rest&#xE9;s quelques temps.</p>
<p>J&apos;ai menti quand j&apos;ai parl&#xE9; de &quot;100%&quot; un peu plus t&#xF4;t. Nous avons plut&#xF4;t l&apos;habitude d&apos;envoyer 99% du trafic dans <em>Le Cloud</em> et de conserver 1% <em>on-prem</em> pour garantir que les caches de l&apos;application, <em>on-prem</em>, soient chauds. Ainsi, l&apos;application n&apos;a pas &#xE0; repartir d&apos;un cache froid en cas de re-bascule <em>on-prem</em>.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/6787f37087df9071728903debc332c9a/e11df/slide-044.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABr0lEQVQoz6WQy25aMRCGAyjds2EBlBUnkBXL5BXSffpehSTkUapSpIjAS0SJ2kCBY5+bLwebnIvdmYNKSrqqMvo1Go/9zcVHR++xcrl8/OEYgkqlUiqV/g/u9XqXny/Pzs8uPl10u916vd4srNFo7OM31mq1qtUqwqPvI2NMvClMqb1ELL3A36iDJOalsNb2B32EZ7MZHLIss4eWm2ybafuPpWkKfnh7i/B0Oi1SGfTPjSl8bo19yRIvJn+Sdq8kSRAeDhGe3N9j5xQ7G6iSp/AaYpVoItwc2VcSyh7A4/F4NwzXIjP5ii/n0TNgS7bwYroWS/N3Z4TTV/hucgcHT9In/2EePv5icyBdvibSZYr9DJ6oJDiUgV8Ab3YzDq4HxdjTCUujFVsJFUZiwbdSaA7iKCa2AqqEKjTFLrCYJ6i26ur6avdhsLPmsSu1L+K5UEQoX+hwL7ll/oYEGypfONMB5SsocjO8Qfjb6KuULiE/qPcchQvOloytOSecEc7dQlQIn3EaRGvGSBi68EX9/heEm82Pzkm33XbajgPBCarzRk7hOx28wkenp7VaDdjfRGrt58TjQJsAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/6787f37087df9071728903debc332c9a/50512/slide-044.webp" alt="Slide n&#xB0;044" width="163" height="102" layout="responsive" srcset="/static/6787f37087df9071728903debc332c9a/50512/slide-044.webp 163w,
/static/6787f37087df9071728903debc332c9a/aeba0/slide-044.webp 325w,
/static/6787f37087df9071728903debc332c9a/001d9/slide-044.webp 650w,
/static/6787f37087df9071728903debc332c9a/97fd0/slide-044.webp 975w,
/static/6787f37087df9071728903debc332c9a/3cea3/slide-044.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/6787f37087df9071728903debc332c9a/19bd1/slide-044.png" alt="Slide n&#xB0;044" width="163" height="102" layout="responsive" srcset="/static/6787f37087df9071728903debc332c9a/19bd1/slide-044.png 163w,
/static/6787f37087df9071728903debc332c9a/d3bcb/slide-044.png 325w,
/static/6787f37087df9071728903debc332c9a/dbb61/slide-044.png 650w,
/static/6787f37087df9071728903debc332c9a/6b691/slide-044.png 975w,
/static/6787f37087df9071728903debc332c9a/e11df/slide-044.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/6787f37087df9071728903debc332c9a/dbb61/slide-044.png" alt="Slide n&#xB0;044" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Quelques jours plus tard, nous avions 1% de trafic <em>on-prem</em> (en orange) et 99% dans <em>Le Cloud</em> (en vert). Sur ce graphe, on voit par moments la courbe orange remonter brusquement : notre application, ce jour l&#xE0;, partait parfois en erreur 500. Et HAProxy rebasculait l&apos;ensemble de son trafic <em>on-prem</em>.</p>
<p>Encore une fois, donc : avec HAproxy branch&#xE9; devant nos applications, nous avons pu les migrer quasiment sans risque. Au pire, en cas d&apos;erreur dans <em>Le Cloud</em>, HAProxy rebasculait automatiquement <em>on-prem</em>.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/25c0ea6f81e6169216416ed7f92fe5d2/e11df/slide-045.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACBUlEQVQoz6WRS2sTURTHJ0jM5LUIRGiMSZtMpmPc+z2aRCEpXUnzIkL9BH4BQXQnbkpdu+pCEAxW8AFa08fE0NhJpvO4M5PXTOaRxjbQeCaroJUu/PPjcO+5538OnIth/yOn0+nxeFwul9vtcc/ksnUdkj6fDyJkIHq9XjeOX5uTw+HAcBwPLSyEQqHbFBUO34xEIoFAIBgMQiaZTMaWlkiSjEYXo5HIjWDwz8mPNjby6+vlUqlcLheLxVKxWCgUcrlcOpUCUisrwNrqKmTth5ny+fzDSgWaYtPpdKhppmEAlmmOLEsdDI4ajR80Te/V6rVvDfpAFAQLZOojU4caQ9enFxfZbBY7HY24kxMkinMgRVYUWZYlSZFQF/GywIo8J6ChiAZIFHiehwHpdBo7G4/hBnXzSAgBsh3ts92Fb1r7Fa35QpJ7SOT1oZbJZC43z4FEucv2Joj7NK1iv77cZTtGW9aGunEvk77azHcNTpsIfbPPbHaE97w6YftjVT+9wgzqyhLNqc/fCU/fsjutyeua/uQNs/VR0oyZeXJ+DkvqKMrfwNrUXme3rT14xaxt/tym1WdV6f7Lo8fbnGGd2WbYe4thYOGXwrOt5nHrw35752v98LC+u1evfj/+fMB0ZQT/j1EURRBE4l8iCJKIJZfjycTicixMxW/dIeNUIk6ShN/v/w1/G72jTau1QgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/25c0ea6f81e6169216416ed7f92fe5d2/50512/slide-045.webp" alt="Slide n&#xB0;045" width="163" height="102" layout="responsive" srcset="/static/25c0ea6f81e6169216416ed7f92fe5d2/50512/slide-045.webp 163w,
/static/25c0ea6f81e6169216416ed7f92fe5d2/aeba0/slide-045.webp 325w,
/static/25c0ea6f81e6169216416ed7f92fe5d2/001d9/slide-045.webp 650w,
/static/25c0ea6f81e6169216416ed7f92fe5d2/97fd0/slide-045.webp 975w,
/static/25c0ea6f81e6169216416ed7f92fe5d2/3cea3/slide-045.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/25c0ea6f81e6169216416ed7f92fe5d2/19bd1/slide-045.png" alt="Slide n&#xB0;045" width="163" height="102" layout="responsive" srcset="/static/25c0ea6f81e6169216416ed7f92fe5d2/19bd1/slide-045.png 163w,
/static/25c0ea6f81e6169216416ed7f92fe5d2/d3bcb/slide-045.png 325w,
/static/25c0ea6f81e6169216416ed7f92fe5d2/dbb61/slide-045.png 650w,
/static/25c0ea6f81e6169216416ed7f92fe5d2/6b691/slide-045.png 975w,
/static/25c0ea6f81e6169216416ed7f92fe5d2/e11df/slide-045.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/25c0ea6f81e6169216416ed7f92fe5d2/dbb61/slide-045.png" alt="Slide n&#xB0;045" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Quand nous avons valid&#xE9; que l&apos;application fonctionnait bien sur son nouvel h&#xE9;bergement, y compris pour les services dont elle d&#xE9;pend, il ne nous reste plus qu&apos;&#xE0; faire pointer le DNS directement chez AWS et supprimer tout ce que nous avions <em>on-prem</em>, y compris HAProxy.</p>
<p>F&#xE9;licitations, nous venons de migrer une premi&#xE8;re application \o/. Maintenant, il suffit de faire pareil pour toutes les autres ^^.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/05ea9defe85fce87bc23eac03ea75609/e11df/slide-046.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACsUlEQVQozxVQS3PiZhAUDuj95tOnTw/Q+42EQAitBTYG1uDdsh17l01qbVfFqRxSySGbc3ZzzDW/OcpUH2a6pmumG0sXbYesXk3qdTp747ieoQJdVeLAj31fR+okDqtpUZXTaZYWaTIv8shzksD3rDH2/Mdfu7vTzenl+PF5f3da1HUR+0XklZNsnmdZ5F8s5/fXV9tVu12362W9bZf7tjpcvPn16RP2/fMv+SSrmybL86IssyQOXDsOvbC7HAazaaFBGQ15lqFIfEDifYbCu8414U8fbrHfvv6zObwv82w/dfab9byqz2eTtkzLSZo4hsyRAkv5I21kmpFjBoacjIGvSXViP90fsdfX18P128u2eThcPtzsdrvt9mK1OV9eb6+aajo2kKqAka515ovYjV0zdAxbh8uJfzpssJfH29C1F0WahnYZWZEzNnU0MnXPtuLA8+wxUqGmIQ3C0LW60RqZCCqhM9o3M+yH2xvfsbqQDCh6uuhpEk+TBuB1wEkchWFYD/u/+t+dcTTBkAQ+6J+d9SxN2VcZ9nDcRWHQLussdEdQmDioiyeyYOpAXREGg3633ev1WJoSOIYicJog8H4fAalJbGw9LzQVppGfhg4CQjyG8Vj1jGFiQQ3wIk9zDElThCILQ4EBIjMU2I7sbOeegT2uU0mggSxJAi/wrA543+xknDYUFImTRUbgKCCynSl1yOlQ0CAPAbM5d1e5h/1+7MSMxNIiS3Umu89kgTaRwLEkRRAcTbE02QEf4CROdKQOeUsXP74kn09r7N2dc7i13z+695/8D0/Rjz9nD5+jt0e7XmqBi5LAdEZqHlnzqeM6YNnYX761f/69+vbv1Zevl1iQyWmpZHNYLNSyQVWrFxVyfVFRGABohDgA2KFMyyLFs4QsM7NGr1ZGsUDpTPkP0P9vUdDMSCoAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/05ea9defe85fce87bc23eac03ea75609/50512/slide-046.webp" alt="Slide n&#xB0;046" width="163" height="102" layout="responsive" srcset="/static/05ea9defe85fce87bc23eac03ea75609/50512/slide-046.webp 163w,
/static/05ea9defe85fce87bc23eac03ea75609/aeba0/slide-046.webp 325w,
/static/05ea9defe85fce87bc23eac03ea75609/001d9/slide-046.webp 650w,
/static/05ea9defe85fce87bc23eac03ea75609/97fd0/slide-046.webp 975w,
/static/05ea9defe85fce87bc23eac03ea75609/3cea3/slide-046.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/05ea9defe85fce87bc23eac03ea75609/19bd1/slide-046.png" alt="Slide n&#xB0;046" width="163" height="102" layout="responsive" srcset="/static/05ea9defe85fce87bc23eac03ea75609/19bd1/slide-046.png 163w,
/static/05ea9defe85fce87bc23eac03ea75609/d3bcb/slide-046.png 325w,
/static/05ea9defe85fce87bc23eac03ea75609/dbb61/slide-046.png 650w,
/static/05ea9defe85fce87bc23eac03ea75609/6b691/slide-046.png 975w,
/static/05ea9defe85fce87bc23eac03ea75609/e11df/slide-046.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/05ea9defe85fce87bc23eac03ea75609/dbb61/slide-046.png" alt="Slide n&#xB0;046" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Migrer progressivement comme nous venons de le faire, c&apos;est bien : &#xE7;a permet de valider, au fur et &#xE0; mesure, que notre nouvel h&#xE9;bergement tient la charge. Mais, pour une grosse application, ce n&apos;est pas forc&#xE9;ment optimal : avant de compl&#xE9;tement s&apos;&#xE9;crouler, elle peut ralentir&#x2026; Peut-&#xEA;tre au point que nous utilisateurs en souffrent&#x2026;</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/e94ef7ca6801c68f3833015e7e7176f7/e11df/slide-047.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAB50lEQVQoz6WSUWvaUBTHIwMzFR8EFaegsMRY2fZZ1mkL2brHJjo65l7GYB9kKwzG+jAYbLA9z8FeOlbKcBNNtatRm9ybRNe0GpOpFeqOCau0rDDYnx+Xc889/3u591yC+B+53W6fz+f1ej0ejzNeduSxIUkogDxJkj5bsHLJlsvlImBOU1Q8Hg+FQldsBYPBSCQSjUYpiqJpOhwOJxKJQCAAcTqdjsVi85MLhQK3usrzfI6fKZ/L8Rx3m2Wz2eySza3FxbsrK7O8vXovn+c47v7aWpJhiOl02js6MgcDB8s0D3V9t1arlMvfSyUYd6pVJEnWnwLA6PenJycsyxK/LGu/3cYysG8jIYQUjAFVUTRV7WgaBBihU2RJggMymQwxHg6hHnfGuDNE2khWehjJGM2cgLOLs9Ep4O/3enAvYjQ6lluCUX5gVB73v+X12jpWDlTlTPU55ubJ8UTHtUn9kSk8GQuFUeuF3v1ns3povf3ceP9VF5H1ZXfwZkstllrKxc4z5u22ufyscud5tbwnrX9s3HwqPHz9A16qq2mdCwD/wDCgi4SIDzaKlVefdoT63oct4WWx+m6zLjbEpjij1WxCL84ByZ/dLvSfSKeY6wvUjQU6SVOp5FUIrqXgy81F/00Mw/j9/t86tL223RVhgAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/e94ef7ca6801c68f3833015e7e7176f7/50512/slide-047.webp" alt="Slide n&#xB0;047" width="163" height="102" layout="responsive" srcset="/static/e94ef7ca6801c68f3833015e7e7176f7/50512/slide-047.webp 163w,
/static/e94ef7ca6801c68f3833015e7e7176f7/aeba0/slide-047.webp 325w,
/static/e94ef7ca6801c68f3833015e7e7176f7/001d9/slide-047.webp 650w,
/static/e94ef7ca6801c68f3833015e7e7176f7/97fd0/slide-047.webp 975w,
/static/e94ef7ca6801c68f3833015e7e7176f7/3cea3/slide-047.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/e94ef7ca6801c68f3833015e7e7176f7/19bd1/slide-047.png" alt="Slide n&#xB0;047" width="163" height="102" layout="responsive" srcset="/static/e94ef7ca6801c68f3833015e7e7176f7/19bd1/slide-047.png 163w,
/static/e94ef7ca6801c68f3833015e7e7176f7/d3bcb/slide-047.png 325w,
/static/e94ef7ca6801c68f3833015e7e7176f7/dbb61/slide-047.png 650w,
/static/e94ef7ca6801c68f3833015e7e7176f7/6b691/slide-047.png 975w,
/static/e94ef7ca6801c68f3833015e7e7176f7/e11df/slide-047.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/e94ef7ca6801c68f3833015e7e7176f7/dbb61/slide-047.png" alt="Slide n&#xB0;047" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Dans certains cas, pour certaines applications, nous voulons valider la tenue &#xE0; la charge avant de commencer &#xE0; migrer. Sans risquer de causer des ralentissements qui impacteraient nos clients et utilisateurs. Nous ne l&apos;avons fait que pour quatre ou cinq gros projets, parce que cela repr&#xE9;sente une charge de travail non-nulle, mais, pour ceux-ci, &#xE7;a nous a vraiment beaucoup aid&#xE9;.</p>
<p>Donc, comment on fait ? Repartons d&apos;une application h&#xE9;berg&#xE9;e <em>on-prem</em>, avant de commencer &#xE0; travailler sur sa migration avec HAProxy.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/4a2aea02f6a24ea3edade0123e51dcf9/e11df/slide-048.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACfklEQVQoz6VS3U/TUBQvMRnCwgNxIjJxsrZjw/Dov2FwxWQE3mRjBuPigzHhwX/AxOiDIWqC4oMxkYREE2PClyQgijIYXR2wtV2/bruxrmu7sY0Z5l0hfjz7yy/3nnvO+d1zcu5FkP+BzWaz2+2tra0tLS3H6+m/0dzcbLNBP9ztFqDvlIWmpiYEnjEUvdjdfdbhOG/B4TjT2XnO2eVEURTHsI6ODpfL1d7ejmGYz+dzOrv+VI5EIsHR0VAoNBZqIDw2FgoGhwKBQYI45rWBgZHh4Ybfit4Mh4PB4K3xcdzjQer1ekHTiqZ5zFKxmFfV3UQiHottRaNkbOtHPC7yfKkR1S2ahq7Xj44CgQByUCpx6bQkQHIWeVEQgSRBygAospxRFGiIIhCALkqqJAo8z8MCfr8fqZbLMF/KVKVMWVQqAihIIg/EhhLSukWUJVmRGJO8o+0+BfI+TNALGkEQSKVyKLCUuR0xyHvGZlhNTEogJ4MTMTREJcvu1wC3Ul9EKl+vsBmDkbWCbgwSfqR2WFOlxM+du0VqokrdrrBT+ew/Yi5rcFpNUM0c/TIjLPFajc2V8/pBQyznSzOr9Ow3lRYP1nbNt2vyXJQFJz2DrAxILv94nn/4kVmmazNR/cGH1PQK0AxLvJ4uEpPxoedULMlPLqSuPqEib/bgpLJwTrKSz2Y2GO3Gq+TI1N57Mv9oAVx/lrj/jtOL1YaYkXLTc+TrpQS1k5r7Qr2Yp2ZXdxiaZhmaYeg0ndpL0stbzKf1OLlNft+ML24kP8dSsCP4/oiv19PvRfu9GI6hXtwN7cu9GPxzv4mjPT6Puw9zeS5d8PZ09+FuL+b24GhbW9svTrazPN8y24IAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/4a2aea02f6a24ea3edade0123e51dcf9/50512/slide-048.webp" alt="Slide n&#xB0;048" width="163" height="102" layout="responsive" srcset="/static/4a2aea02f6a24ea3edade0123e51dcf9/50512/slide-048.webp 163w,
/static/4a2aea02f6a24ea3edade0123e51dcf9/aeba0/slide-048.webp 325w,
/static/4a2aea02f6a24ea3edade0123e51dcf9/001d9/slide-048.webp 650w,
/static/4a2aea02f6a24ea3edade0123e51dcf9/97fd0/slide-048.webp 975w,
/static/4a2aea02f6a24ea3edade0123e51dcf9/3cea3/slide-048.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/4a2aea02f6a24ea3edade0123e51dcf9/19bd1/slide-048.png" alt="Slide n&#xB0;048" width="163" height="102" layout="responsive" srcset="/static/4a2aea02f6a24ea3edade0123e51dcf9/19bd1/slide-048.png 163w,
/static/4a2aea02f6a24ea3edade0123e51dcf9/d3bcb/slide-048.png 325w,
/static/4a2aea02f6a24ea3edade0123e51dcf9/dbb61/slide-048.png 650w,
/static/4a2aea02f6a24ea3edade0123e51dcf9/6b691/slide-048.png 975w,
/static/4a2aea02f6a24ea3edade0123e51dcf9/e11df/slide-048.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/4a2aea02f6a24ea3edade0123e51dcf9/dbb61/slide-048.png" alt="Slide n&#xB0;048" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Le but &#xE9;tant de valider la tenue &#xE0; la charge de l&apos;application dans <em>Le Cloud</em>, d&#xE9;poyons-l&#xE0; sur son nouvel h&#xE9;bergement -- sans lui envoyer de trafic r&#xE9;el.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/0aaadee23274d76483d513c86583aacc/e11df/slide-049.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAClklEQVQoz6WP3U/TUBjGS0yGsHBB5CNjEj7ask3l0r9D2DBAglcywGBALwyJN/4DJhovBGMCkQs1kRiiiTHyMTUSCCDQdXWMre3W9px2W9euXcc2ljAPI0bv/eXNm3Oe8z55n4Nh/4PNZrPb7fX19XV1def94r/U1tbabEhHJ3sVpF2oUlNTg6E7juPt7e3Nzc0Oh6OtzXGpqam1tdXZ5kQ6SRItLS0dnR2NjY0EQXg8HqfT+Xfz9PS0f3R07A8T4+Njfv/Q4OCAz+fz+lDv7+sbGRk506uvdyYm/H7/3clJkiSxSqWS1XUrlzuvvGVpmQx7FGaCFEPtBw8OfoVoSRDy6NU0rByqnGkYldPT4aEh7DifT8TjQESVQF0SBRlK7wPRmTkqsM2paUWRFRlCSYIiNCSQAWhCENACn9eLlQoFUZBAsgSSBUkpiSCrQHEnyL/9EglHRQUC5JOBrAAuR9/XI3NQTgNJMLI6+hFWLJ6IPGNSUyY9Y+6PZ8KzAKpqEhoZJaXIMgSSkuLTZZj4UVnDilvX+aTJyXrWMM/M5ZNyBoTLhw8s5mEpNFXk57W0KgMERGmROZEyE3pZyuRUdiEpBgS9zKsFzTge8HkxWcsvbbDLOxorHW9Gcu825ZU9Hp7ZIIqckiGd0J6tik8+89/Y8tKe8fhT7NUG1M2qeSduDcyGhl8yVFSYW4vdeM7ce3MEIcqMQitaKrnL6bcXY7fmjz7S2tN1OPgi/OhDwrRKN1FsDqiLK/TrQJg5jK1sMQurzPLGIceyPMdyHBtno5Eo+53iv24zdJDe3Q+t/4xuUrGUDLz9fZjH1XPNjfe6CZLAXWR3rxu/6iLwv3STeJenB/cQHT2dTnfX5Ssk7iK60XBDQ8NvxOmxOIvUKEcAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/0aaadee23274d76483d513c86583aacc/50512/slide-049.webp" alt="Slide n&#xB0;049" width="163" height="102" layout="responsive" srcset="/static/0aaadee23274d76483d513c86583aacc/50512/slide-049.webp 163w,
/static/0aaadee23274d76483d513c86583aacc/aeba0/slide-049.webp 325w,
/static/0aaadee23274d76483d513c86583aacc/001d9/slide-049.webp 650w,
/static/0aaadee23274d76483d513c86583aacc/97fd0/slide-049.webp 975w,
/static/0aaadee23274d76483d513c86583aacc/3cea3/slide-049.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/0aaadee23274d76483d513c86583aacc/19bd1/slide-049.png" alt="Slide n&#xB0;049" width="163" height="102" layout="responsive" srcset="/static/0aaadee23274d76483d513c86583aacc/19bd1/slide-049.png 163w,
/static/0aaadee23274d76483d513c86583aacc/d3bcb/slide-049.png 325w,
/static/0aaadee23274d76483d513c86583aacc/dbb61/slide-049.png 650w,
/static/0aaadee23274d76483d513c86583aacc/6b691/slide-049.png 975w,
/static/0aaadee23274d76483d513c86583aacc/e11df/slide-049.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/0aaadee23274d76483d513c86583aacc/dbb61/slide-049.png" alt="Slide n&#xB0;049" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Ensuite, <em>on-prem</em>, nous installons un logiciel nomm&#xE9; <a href="https://goreplay.org/">Go Replay</a> -- le binaire s&apos;appelle <code class="language-text">gor</code>, donc j&apos;utilise souvent ce nom.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/20044d88e099bc2f97f91181c9b85bcf/e11df/slide-050.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACkklEQVQoz6WS30/TUBTHS0xAWHggIEFm+LG2Y8Pw6N8hbkRn0CfZmIFkvhgSX/wHjNEXRU0g+GBIJIZoYoxTFgwEyQy4dWWwruv64952Y21p17GNGebdiNF3P/nm5OTc8805N/di2P/Q2tpqs9k6Ojra29vP4vl/aWtDDaiOElsTVDvXpKWlBUNGAscHBgYu9PRcbNLT3d3X19dvt+M4ThJEb2/v4OBgV1cXQRBut9ve3/93cigU8k9NBQKB6UCD4PR0wO/33fBNeL1ejxfFa+PjtyYnG/Xm6d1g0O/3z87MkCSJ1ev1I123isUzlSxLU1U2ldyj4nRsl4rF9hIJSRBLFjo1miqahlE/PfX5fNhxqcRns0BE4pEkUZCh9C7CzM3HIttpVRYUAGQgSaIkAl0CKkAdgoAGeDwerFoui4IEclWQK0tKBXUoQIzGs8ufU0lGUKAEBU4WeIVPFn/O6gcvoHwIJME40tG1sErlRORoMx4yqTljN6gmnwNYKOSgoSp5RZYhkJRD7vAXFDbra1hl+wqXMzOyfmSYE14PVjupqWCvtn/foh9U6VCFW9DyBRkgoAyRAJ83eb0mqsUCu5gTIyjnCmXNOG6YZa20ssmuRlVWOt46KL7dksM7HGzYIAQwL0OK155+ER9/4tbZ2sqO8ehjemkD6mbTHOWsifnEzVd0jBHmv6avPqPvLacgRDujpRUtn/uR0e+8Zm4vpD5Q2pM1eP1l8uF73rCqDXMGFJbC1JtIkt5Ph7/Ti2F6dWM/k2Y5ls2wbJZlUgz7LcatRxNUnIruJiI7zFYsnYcAvT/mHnGOufAxF0ESuIt0oPzyCIH+3B85SHzY7cRHiSHnkN01fGmUdLgIh5PAOzs7fwNksbD9T/cGVgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/20044d88e099bc2f97f91181c9b85bcf/50512/slide-050.webp" alt="Slide n&#xB0;050" width="163" height="102" layout="responsive" srcset="/static/20044d88e099bc2f97f91181c9b85bcf/50512/slide-050.webp 163w,
/static/20044d88e099bc2f97f91181c9b85bcf/aeba0/slide-050.webp 325w,
/static/20044d88e099bc2f97f91181c9b85bcf/001d9/slide-050.webp 650w,
/static/20044d88e099bc2f97f91181c9b85bcf/97fd0/slide-050.webp 975w,
/static/20044d88e099bc2f97f91181c9b85bcf/3cea3/slide-050.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/20044d88e099bc2f97f91181c9b85bcf/19bd1/slide-050.png" alt="Slide n&#xB0;050" width="163" height="102" layout="responsive" srcset="/static/20044d88e099bc2f97f91181c9b85bcf/19bd1/slide-050.png 163w,
/static/20044d88e099bc2f97f91181c9b85bcf/d3bcb/slide-050.png 325w,
/static/20044d88e099bc2f97f91181c9b85bcf/dbb61/slide-050.png 650w,
/static/20044d88e099bc2f97f91181c9b85bcf/6b691/slide-050.png 975w,
/static/20044d88e099bc2f97f91181c9b85bcf/e11df/slide-050.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/20044d88e099bc2f97f91181c9b85bcf/dbb61/slide-050.png" alt="Slide n&#xB0;050" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Gor &#xE9;coute le trafic qui passe sur le serveur ou il est install&#xE9; (en gros, il fait un <code class="language-text">tcpdump</code>) et rejoue l&apos;ensemble de ce trafic <em>aileurs</em>. Ainsi, nous reproduisons dans <em>Le Cloud</em> l&apos;ensemble du trafic re&#xE7;u par notre application <em>on-prem</em>.</p>
<p>Les r&#xE9;ponses HTTP retourn&#xE9;es aux utilisateur sont celles g&#xE9;n&#xE9;r&#xE9;es <em>on-prem</em>. Celles g&#xE9;n&#xE9;r&#xE9;es depuis <em>Le Cloud</em> sont totalement ignor&#xE9;es. Mais cela nous permet de d&#xE9;terminer si l&apos;h&#xE9;bergement dans <em>Le Cloud</em> tient ou non la charge.</p>
<p>L&#xE0; o&#xF9; nous avons &#xE9;t&#xE9; <em>fourbes</em> sur certains projets, c&apos;est que nous pouvons installer <code class="language-text">gor</code> sur nos serveurs Varnish et lui faire &#xE9;couter le trafic qui entre sur ces machines. Ainsi, nous capturons l&apos;ensembles des requ&#xEA;tes entrantes, <strong>avant</strong> le cache HTTP, pour les rejouer sur AWS ! Si notre application avait un cache-ratio de 90% <em>on-prem</em>, nous allons envoyer <strong>10 fois plus de trafic</strong> dans <em>Le Cloud</em> que ce qui arrive sur nos serveurs applicatifs <em>on-prem</em> (puisque 90% des r&#xE9;ponses, <em>on-prem</em>, sont directement renvoy&#xE9;es par Varnish). Et &#xE7;a, &#xE7;a fait un <em>sacr&#xE9; test de charge</em> : si notre nouvel h&#xE9;bergement tient le coup quand on fait &#xE7;a, nous savons qu&apos;il r&#xE9;pondra &#xE0; nos besoins pour les prochains ann&#xE9;es. Et, encore une fois, nous avons obtenu cette information sans risque et sans impact pour nos utilisateurs.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/7bcafb3a664f7f32954603f4119be5a0/e11df/slide-051.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACmUlEQVQozzWQ3U/TUBjGe29MBGFstPtot7aDdV330W5sXdZ1yAJR9km7YTR8bUNhcCFRxsY2twkXGqOXEsCAxFsJXmrin2GMiBFu/DN8u+HJL0+f85z39Jz3IJnsjJJTATWXU1RNgVw+30PN5zS6odItUBR1RlGTqfT0dBI5Pfu8Va22Op1mq9XqtFvtzvN2u95sajSaPbPdaAC1er22rfFss/Ll67fLq7/Ii51dp9MZCoUEQQiLYlSSXBxHkpTVBkKTZBcwFGUjNcCbzOZ3e/sXv6+Q90dHC4uLq+Xy45WVMoy1tdVy97u+vrRUKJZKpeVlAAxMgGKxNDc//+n07Of5H+T1m7eJRGIJCgsFaDKZSqXT6Uw2A21KkUhUluXYuDweA6KyBkzFcPjDycdfF5cIdMiyrkRiOh6Py9paLBgMcm6P2+1xOEa9Pm2AerzXeH0843QeHB5p1251dji3W1Fm4HXhyeEX/kCAFwSGcWCogWEYH8/DBkh8vAYv+FmXa2//8PuPc6SQSxh0/byblSNhSRyLiGNSOOjlWMJi0usGQV3MqNflGCHxEZtFg7RYzdjT4uzJqxqykI77OOaOJMYiIjdKcQ6ac1BuhmbsNnTYwI6Q4CGnLShlGabMw7RlGMd06/mpg2oRmUtOuBz2qYmYJAbg5KAAxbgVGyKwIaN+ANRq1JMmA4Wj3f0ojaM4pn9y/95x/RHyYDJMmFHR7xE8bEjwsnYbjWN2q9FOGMHQhNFuNfWg/yeEybAxO3m8tYi8nI9X0qFaFhCBRi7ayMvNfKyhStVsqJq5zqsZcTPpr6QCldTYxl2+oUZ2H04gPD4oELqAdchP6MDwlgGveQDUZ77tMfUDbmNP+zisr6cseovS3cRv3/gHIKrhSJUFsP8AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/7bcafb3a664f7f32954603f4119be5a0/50512/slide-051.webp" alt="Slide n&#xB0;051" width="163" height="102" layout="responsive" srcset="/static/7bcafb3a664f7f32954603f4119be5a0/50512/slide-051.webp 163w,
/static/7bcafb3a664f7f32954603f4119be5a0/aeba0/slide-051.webp 325w,
/static/7bcafb3a664f7f32954603f4119be5a0/001d9/slide-051.webp 650w,
/static/7bcafb3a664f7f32954603f4119be5a0/97fd0/slide-051.webp 975w,
/static/7bcafb3a664f7f32954603f4119be5a0/3cea3/slide-051.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/7bcafb3a664f7f32954603f4119be5a0/19bd1/slide-051.png" alt="Slide n&#xB0;051" width="163" height="102" layout="responsive" srcset="/static/7bcafb3a664f7f32954603f4119be5a0/19bd1/slide-051.png 163w,
/static/7bcafb3a664f7f32954603f4119be5a0/d3bcb/slide-051.png 325w,
/static/7bcafb3a664f7f32954603f4119be5a0/dbb61/slide-051.png 650w,
/static/7bcafb3a664f7f32954603f4119be5a0/6b691/slide-051.png 975w,
/static/7bcafb3a664f7f32954603f4119be5a0/e11df/slide-051.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/7bcafb3a664f7f32954603f4119be5a0/dbb61/slide-051.png" alt="Slide n&#xB0;051" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>En r&#xE9;pliquant le trafic avec GoReplay (ou en montant progressivement en charge avec HAProxy), nous d&#xE9;couvrons les adaptations requises pour tenir la charge.</p>
<p>Sous tous nos projets, cela signifie <em>fine-tuner</em> les r&#xE9;servations / limites de CPU et de RAM au niveau Kubernetes, par exemple. Sur certains cas, nous avons atteint les limites de capacit&#xE9; de Redis, ou d&apos;Elasticsearch. Ou alors, nous avons r&#xE9;alis&#xE9; que nos instances de bases de donn&#xE9;es &#xE9;taient clairement sur-dimensionn&#xE9;es.</p>
<p>C&apos;est aussi l&apos;occasion de travailler sur l&apos;auto-scaling de nos applications. Pour certaines, scaler en fonction de la consommation CPU est suffisant. Pour d&apos;autres, nous devrons peut-&#xEA;tre scaler en fonction du nombre de requ&#xEA;tes, ou du nombre de messages dans une file de jobs.</p>
<p>Dans tous les cas, &#xE0; nous de trouver le juste milieu entre r&#xE9;pondre <em>parfaitement</em> &#xE0; la charge et limiter les co&#xFB;ts.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/26803baf6db45ca42c4a0cdb44f5ddda/e11df/slide-052.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAC4klEQVQoz1WQ60tTcRjHz+voRUilTvO4nV3cdjzn7Nx/5+jW5tm8tHk2dVu70rLUvBCmEWqJircXldGr7ELiBYPSIjSzlNLUtBtEJI2CCLqY/ROdiQTBh4eHBz58vzyQsVg2u6vMbj/q9pv/B/UE/oHJQYs3RMlB+Wg4Eov5/IGychmKXL/raDznau2WznS6Wrqk5tRM0dqlXBTspzsczRdc9a1liTpfc/vZnr7O7u6FtfXPW9uQp60vnyBIsVCLERgHcA4QQGStNotQAKN4thFNU2sPIvqctH3pe/eo9qchCJKr0QyPjiV/bUNVl28JocTh6kZboqEwUW8/0QTitSBaY43XeKvrgidPOY83lEePFZN4iVRkoym/z1vb2DTzdPHTz9+Qv++qXa5wBCKuYKwkFHcFQpRUarQWkXanKLk4hwtIxYLVZoazOZ6ncJwlLTapaHzqflKp7T0/WFjktHnkglI3Jlr1FjqPZPJpVk+yaoI1USzNcRhB5KYfUKYpz2DQ6vJJy/DEZHLrD+Rp70cwC1roMAo2mOQ0FG9gAMoCPQ1MDE8DwIkiRdNIlgrHcZ1GrYNz8knq2sSdzR9bkNw+kKE35dJAMdUUrzgYm5JR5XO8wAGBF0WGYbRZKgzDDDqd9lBKHh6f/PDtO+TrGFAZzFpWVDI1NEBoYGQAAwAQRUEUeSEl0zSFqDIJkkLNZi0MoyQ5dHt0NflVSe7flWmwC5VK5gSBFVLJO7UpdUY6QZJ5ej0CwyacuHhjZHnzCyS39WbqTQgrKp3VJK+jUmAszwHA8IBgOYLjcYtFk5lhNJk0cK46O1uRh26OPH//EepZeNMxvdg7+6L/0crEs9X5lbW5lZdLGxtzK2szy2sPl1Yfr7+amr7XUukZm3oweOlKa3X1+OyThdfv5jfeQswRX0FlyF4VdvjDFeFoIBIJRKLhWNwfie4ssWAsLssym6cr8cg2h8Rh2JEKv9PtsUrOv8Ms+hRPIDKIAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/26803baf6db45ca42c4a0cdb44f5ddda/50512/slide-052.webp" alt="Slide n&#xB0;052" width="163" height="102" layout="responsive" srcset="/static/26803baf6db45ca42c4a0cdb44f5ddda/50512/slide-052.webp 163w,
/static/26803baf6db45ca42c4a0cdb44f5ddda/aeba0/slide-052.webp 325w,
/static/26803baf6db45ca42c4a0cdb44f5ddda/001d9/slide-052.webp 650w,
/static/26803baf6db45ca42c4a0cdb44f5ddda/97fd0/slide-052.webp 975w,
/static/26803baf6db45ca42c4a0cdb44f5ddda/3cea3/slide-052.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/26803baf6db45ca42c4a0cdb44f5ddda/19bd1/slide-052.png" alt="Slide n&#xB0;052" width="163" height="102" layout="responsive" srcset="/static/26803baf6db45ca42c4a0cdb44f5ddda/19bd1/slide-052.png 163w,
/static/26803baf6db45ca42c4a0cdb44f5ddda/d3bcb/slide-052.png 325w,
/static/26803baf6db45ca42c4a0cdb44f5ddda/dbb61/slide-052.png 650w,
/static/26803baf6db45ca42c4a0cdb44f5ddda/6b691/slide-052.png 975w,
/static/26803baf6db45ca42c4a0cdb44f5ddda/e11df/slide-052.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/26803baf6db45ca42c4a0cdb44f5ddda/dbb61/slide-052.png" alt="Slide n&#xB0;052" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Jusqu&apos;&#xE0; pr&#xE9;sent, j&apos;ai parl&#xE9; de migrations. J&apos;ai parl&#xE9; de projets qui tournaient <em>on-prem</em> et que nous avons migr&#xE9;s vers <em>Le Cloud</em>. Si je veux faire complet, je dois maintenant parler de projets pens&#xE9;s pour <em>Le Cloud</em>, de projets <em>Cloud Native</em>.</p>
<p>Tous nos nouveaux projets, depuis plus de six mois maintenant, sont d&#xE8;s le d&#xE9;part d&#xE9;ploy&#xE9;s dans <em>Le Cloud</em> et n&apos;ont jamais &#xE9;t&#xE9; d&#xE9;ploy&#xE9;s <em>on-prem</em>. J&apos;aimerais en parler plus et vous raconter des <em>batailles &#xE9;piques</em>, mais, en fait&#x2026; Bah, &#xE7;a se passe bien ^^.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/6187539ee4b4306310b0b713c6257e4b/e11df/slide-053.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACjklEQVQozyWSzW/TMBjGHTtx4jixHcdN0jZp+pm2Sbt2W7d1H0yTNiSQEAcOCJAmgYZAiBtCwOCANCQkxAkuXDjBn8Bh/x4OSD+9em2/jx7rsQEkHBJmWLaBTA1yqMWUYXuwhgKbuj5TYcikQi6Hjq/5f2qxBoB+jPykHsUEQFv2ZrS7AH7ToAnUVaSu6qi077VGZtiFQQZFBlkTsdjXY8iPLNE0WWwQmfTGdx8+2D27pTVJsUFbhaFHZW7IHMouCjIku7VYtKGnSLsEFo8xU5YXQiLy8XS82FwdHaXDye7xSa9aACJNHps8QX4Deg3tBGkIqd5MnPYUYD80kAVNbGGHej71mEtZs50ORkVvOAxCVQdhYl2haf1D9wgHLaLFDo8QdiB2HNfzuUizrD8czubzYlq28y4TwibEdgi0MLJsqDHrxuIJTgpAZayjRraLrFouZDgYjfJeT0WxhvKg1cm7/YGJ6+fQM7VeV6+hcwHd8ayaL/LBaL7c2l0f9Iejbq+v/bFNAqkCFeWDYTWbD4vCF8IwtZIgTKAbQj8BeVFWG8tqsTVbbjeaWSNpNeJ4udoOVCMI61usD/fXhwcnZ6cHN46KssSeAAjrp0baWSYZ8TgLlC+UQzn1OXG9LM+jZstjPFRR2ukU00lZVdp8UpbFZBrFCeHKjArAo5ZDmVAJZYHHpRZjh/AgYFwvQ6kiJgIeSNv1VJzo/Mv5bHNz+ebd24+fv4A7T57de/nq/PLq/P2np1dfb95/VG5uJ2kHu8zyJOaRQYQGYPb68sPP37/On188fnHx/ce36+s/oNo/7s+XWTGZ7B2uTm+Pt3aiNKNC1r/VxMByDItodLOzf7Ba76X9Xj4aFdV0ubX8CybLUAzJysG0AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/6187539ee4b4306310b0b713c6257e4b/50512/slide-053.webp" alt="Slide n&#xB0;053" width="163" height="102" layout="responsive" srcset="/static/6187539ee4b4306310b0b713c6257e4b/50512/slide-053.webp 163w,
/static/6187539ee4b4306310b0b713c6257e4b/aeba0/slide-053.webp 325w,
/static/6187539ee4b4306310b0b713c6257e4b/001d9/slide-053.webp 650w,
/static/6187539ee4b4306310b0b713c6257e4b/97fd0/slide-053.webp 975w,
/static/6187539ee4b4306310b0b713c6257e4b/3cea3/slide-053.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/6187539ee4b4306310b0b713c6257e4b/19bd1/slide-053.png" alt="Slide n&#xB0;053" width="163" height="102" layout="responsive" srcset="/static/6187539ee4b4306310b0b713c6257e4b/19bd1/slide-053.png 163w,
/static/6187539ee4b4306310b0b713c6257e4b/d3bcb/slide-053.png 325w,
/static/6187539ee4b4306310b0b713c6257e4b/dbb61/slide-053.png 650w,
/static/6187539ee4b4306310b0b713c6257e4b/6b691/slide-053.png 975w,
/static/6187539ee4b4306310b0b713c6257e4b/e11df/slide-053.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/6187539ee4b4306310b0b713c6257e4b/dbb61/slide-053.png" alt="Slide n&#xB0;053" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Avant de finir, passons &#xE0; un sujet &#xE0; propos duquel j&apos;ai toujours des questions&#x2026; Et sur lequel nous avons en r&#xE9;alit&#xE9; &#xE0; peine commenc&#xE9; &#xE0; bosser. Un sujet qui pourrait mener &#xE0; une conf&#xE9;rence enti&#xE8;re l&apos;ann&#xE9;e prochaine : la gestion des co&#xFB;ts.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/bee0954d4a526043584c1e6e7872e28a/e11df/slide-054.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABi0lEQVQoz12Sa46DMAyEq/YvvUwfVGp7/wOUR0ISILRFlQrsGfZLDIu0Rgp27PEk42ySJDlHS9P0dDr98/925C/h4XDY7XYb7Hg8aq0rY3RVlUWplKpwFF/wy2BK9rMsL4qyaZrH47Hf7wOYZsYY5xwYHNZKV6Ebf63ZAQzAWqsU/Sv8oihmMMeIiUDorDWVKaNvjYnIUi8mIZblWZIs4L7v6Ueuadrn8+m9t8623retd86+Xq+6rn0IgxEqrWfm9Jw+u440ibpucMDHK9hQ6z07tJaC6AQaZJ6Zu64DQA6e0MI5MDDIKSSLKEL7+XxWMIJRARMySG84hQoADmdgn7PAydq/30g43xkwdWiW5znVKBc1Nwge8bVWygZzhEFIa9FsPTZ8TCYMzLqoaxiSDI8VmEyIAuZMmGXZemyaBbY4ba20zNOI8WDK8DAYvlqM17I+ErmeTBKHKzGWcRy/3+84DqzTNPEbCIbhZ5qQYGbmx0u+XC7pYlyE8BbtKuv1eluc+/1OzXa7BfsLI8YANsi5ChUAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/bee0954d4a526043584c1e6e7872e28a/50512/slide-054.webp" alt="Slide n&#xB0;054" width="163" height="102" layout="responsive" srcset="/static/bee0954d4a526043584c1e6e7872e28a/50512/slide-054.webp 163w,
/static/bee0954d4a526043584c1e6e7872e28a/aeba0/slide-054.webp 325w,
/static/bee0954d4a526043584c1e6e7872e28a/001d9/slide-054.webp 650w,
/static/bee0954d4a526043584c1e6e7872e28a/97fd0/slide-054.webp 975w,
/static/bee0954d4a526043584c1e6e7872e28a/3cea3/slide-054.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/bee0954d4a526043584c1e6e7872e28a/19bd1/slide-054.png" alt="Slide n&#xB0;054" width="163" height="102" layout="responsive" srcset="/static/bee0954d4a526043584c1e6e7872e28a/19bd1/slide-054.png 163w,
/static/bee0954d4a526043584c1e6e7872e28a/d3bcb/slide-054.png 325w,
/static/bee0954d4a526043584c1e6e7872e28a/dbb61/slide-054.png 650w,
/static/bee0954d4a526043584c1e6e7872e28a/6b691/slide-054.png 975w,
/static/bee0954d4a526043584c1e6e7872e28a/e11df/slide-054.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/bee0954d4a526043584c1e6e7872e28a/dbb61/slide-054.png" alt="Slide n&#xB0;054" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Chez AWS, c&apos;est <em>simple</em> : vous payez les serveurs en fonction du nombre de minutes (ou de secondes) pendant lesquelles ils sont allum&#xE9;s. Mais aussi, bien s&#xFB;r, en fonction du type d&apos;instance que vous exploitez -- qui conditionne la quantit&#xE9; de CPU et de RAM (et les performances disque et r&#xE9;seau) dont vous disposez. Ces instances ne co&#xFB;tent pas le m&#xEA;me prix dans toutes les r&#xE9;gions, il peut &#xEA;tre int&#xE9;ressant de faire tourner certaines applications aux US plut&#xF4;t qu&apos;en France. Vous payez aussi l&apos;espace disque r&#xE9;serv&#xE9;. Ainsi que le r&#xE9;seau. Au moins le trafic sortant. Pas toujours le trafic entrant&#x2026; Bref, je pourrais &#xE9;crire une page enti&#xE8;re sur le sujet -- d&apos;ailleurs, je l&apos;ai fait -- et &#xE7;a ne serait pas fini ^^.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/a0a516bde8d08737164d687be2476d60/e11df/slide-055.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACZUlEQVQoz12SyXLTQBCGRzMaLSNbsmRL8iKvUmTZsmzLceIklmQ7i0NScEgIBQRSEFIsOeQQLlw5kBs58AzcqILH4LmQl3JR+evvvkx/1V09DRAFKDAzz2JJTIiEVWWpRuDl0733715/uHy1X00rFOBphCGFKGpVHxtgBAnHxpaSRM/IhYxUK2hNAr6+nd5/+/Lj/u72eNvkqARGDIIPYUlMrllWrVopF43YjlVrWLU0A4sYmApptepd31c5TEOKmmHUUguYoZHA8/PMxgUSj7McdVBKn2bw9cnB55uPt1fPj+2iGM84Q5ZawhzGtmX2up2+3zVy2WJWtQv64br7xCmdRIOLi/MXJ48nDbOa0/J6JqdrWU1Ny/ISjkNRZMe262tW13NbTn0a9KfjwXhvd7TVH0fBKAr6Jc0QSSopJAWSIEQgPKQWnVkm7uzYa3XL6rXdtlXdaxiTfjXYaoXBZhhGYRRtNSsGAvwC+H/sWGIy2W17ntvwXWfYbm5WsgODDC0m9NVguB1FYbgz8FJMKYUJpuAcQytYzaT9jtfxWq2GE/jeo0Fv3zUOXGm6qR0F3ng8DAed0JEndW5YYGUmxkH8YXAxAINxShRTyUReVysZyZSFnqHuOurEko/C7ij0g7q4o9MDBe4oSHsAr8QAQM8fahxoC6DEgb7JD1tqYNBjHW6I0CUUOwcWpzILkaXPq9pVs/zJN5+pXI8F13b6z2H6poy+l9DPIfm7y/1y8G+HvTN5gmF8p/RqearAjvJKqKcmhhoqJEeDhsS9bCROi9RZAZ3l0Zsy3BDgOkEOT9PzC1+s7R/u4FLUzP+JmgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/a0a516bde8d08737164d687be2476d60/50512/slide-055.webp" alt="Slide n&#xB0;055" width="163" height="102" layout="responsive" srcset="/static/a0a516bde8d08737164d687be2476d60/50512/slide-055.webp 163w,
/static/a0a516bde8d08737164d687be2476d60/aeba0/slide-055.webp 325w,
/static/a0a516bde8d08737164d687be2476d60/001d9/slide-055.webp 650w,
/static/a0a516bde8d08737164d687be2476d60/97fd0/slide-055.webp 975w,
/static/a0a516bde8d08737164d687be2476d60/3cea3/slide-055.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/a0a516bde8d08737164d687be2476d60/19bd1/slide-055.png" alt="Slide n&#xB0;055" width="163" height="102" layout="responsive" srcset="/static/a0a516bde8d08737164d687be2476d60/19bd1/slide-055.png 163w,
/static/a0a516bde8d08737164d687be2476d60/d3bcb/slide-055.png 325w,
/static/a0a516bde8d08737164d687be2476d60/dbb61/slide-055.png 650w,
/static/a0a516bde8d08737164d687be2476d60/6b691/slide-055.png 975w,
/static/a0a516bde8d08737164d687be2476d60/e11df/slide-055.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/a0a516bde8d08737164d687be2476d60/dbb61/slide-055.png" alt="Slide n&#xB0;055" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Version courte : c&apos;est l&apos;enfer ! <strong>Tout se paye</strong>.</p>
<p>Les instances, le r&#xE9;seau, le volume de trafic, les requ&#xEA;tes avec des prix diff&#xE9;rents en lecture et en &#xE9;criture, les logs, les m&#xE9;triques&#x2026; Tout. M&#xEA;me, des crit&#xE8;res suppl&#xE9;mentaires interviennent, comme la taille des messages ou la durabilit&#xE9; des donn&#xE9;es.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/118d524a1748f2130acdebb120326429/e11df/slide-056.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABxElEQVQoz8WPzW7aQBSFXQkQSyTKolJbG9tplzwCz9M8TLoAmrxAFYJEHIxBipR0E6qqalM1P6SkpC4pGFPjmYnHzo8d7OkFV9lUURdd9Gh05rszc+fMcNy/KJlMplKp2O8APJ1OJxIJOPDgHs2bM5nMkizxPF8sFiVZymazgiDIslwoFHK5XNx8b/KTp8KjxxIviEvPnguCyPN5IS+JeQl4MfKwwt/5AmBRFCHmIWdMyNvDqWlRjKmNKCYuwi4AOCKUOO4C3CmihHgOubSRi/EFY2xl5SUHk399yaKI/U23bOZE3oyFwW0AZaVSmTeHYRiB4IIIcBbjvIoBtLAr39XR8Vd8RK/nyeVy+XfznznxS2AjYDchmwFT/+aITD+Oevq4B2WpXOL8AP+c9s1JF5Oh+ePkvP/JGp8N9f2z7q457I2+vz94t65/2R/rHw4Od/e+desnn193tuEHpcorjvkhMWz73PQQHQ+dwalNrCtrQCZ9bJseMbB56hDTRwNi9BCxgpHhDfoUktfWVrmdnTcb1S2loWhNrdZs1Lc2VU1tq0pLVdR2q91aVxo12FWqNUWpa5q60awqzc1OZ+/F8jL33/QLY3aA/ZlEHi0AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/118d524a1748f2130acdebb120326429/50512/slide-056.webp" alt="Slide n&#xB0;056" width="163" height="102" layout="responsive" srcset="/static/118d524a1748f2130acdebb120326429/50512/slide-056.webp 163w,
/static/118d524a1748f2130acdebb120326429/aeba0/slide-056.webp 325w,
/static/118d524a1748f2130acdebb120326429/001d9/slide-056.webp 650w,
/static/118d524a1748f2130acdebb120326429/97fd0/slide-056.webp 975w,
/static/118d524a1748f2130acdebb120326429/3cea3/slide-056.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/118d524a1748f2130acdebb120326429/19bd1/slide-056.png" alt="Slide n&#xB0;056" width="163" height="102" layout="responsive" srcset="/static/118d524a1748f2130acdebb120326429/19bd1/slide-056.png 163w,
/static/118d524a1748f2130acdebb120326429/d3bcb/slide-056.png 325w,
/static/118d524a1748f2130acdebb120326429/dbb61/slide-056.png 650w,
/static/118d524a1748f2130acdebb120326429/6b691/slide-056.png 975w,
/static/118d524a1748f2130acdebb120326429/e11df/slide-056.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/118d524a1748f2130acdebb120326429/dbb61/slide-056.png" alt="Slide n&#xB0;056" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Pour s&apos;en sortir, la premi&#xE8;re chose &#xE0; faire est de <strong>tout tagguer</strong> : chaque ressource doit porter une information qui indique, au minimum, &#xE0; quel projet elle est rattach&#xE9;e.</p>
<p>Par exemple, ici, on voit que le projet en <em>vert moche</em> a un co&#xFB;t faible tous les jours&#x2026; Sauf trois jours, sur la droite de l&apos;&#xE9;cran. Trois jours qui ne se suivent m&#xEA;me pas. Une telle variation de prix, sans savoir de quel projet il s&apos;agit, &#xE7;a serait difficile &#xE0; comprendre. L&#xE0;, il a suffit d&apos;aller voir les d&#xE9;veloppeurs du projet en leur demandant ce qu&apos;il s&apos;&#xE9;tait pass&#xE9; ces trois jours (des imports de donn&#xE9;es en masse, en l&apos;occurence).</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/e23bc569ebacfc05e715cd678ec13b24/e11df/slide-057.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACL0lEQVQoz7WSXVMSURjH1xlR7iLyolH2RcAu7SPYN+JLNE3TRXpRbqKZWVO+MbXC6gbLCkqAOhkhgkCKrYAJuy4gEPvCng4wTV020/Sb/zzzf97OmTlzEORfMBgMAwMDvfinGRwc7EVDF6PR2N/fD+f7ftFZvmky3RmzEwR+b2LCbrMPDd0iCMJms47Z7aPWURzDCBy3Wq13x8dNphu95d83D49Ybg/jKAonbBiGj4ygKIqhFgztgFugRzsnwJbFgkKhsAQTnDCbzUj+shbLVkSpURbr4lVdEKGuS1JTrCuC1BCvrstCTRBrotQUuoKmIlV1AB5PTiEAaLquAa0CNAnoLQDaAKigxoOTCNCq3VQDEKUMflyAVgnIgqrKsECSJAKyn7WgS3a/aO4FWmG67V2UY9t8iDmgX4MIq+1uNrglNb6t+6m263kzwtZ3GIVZAJUCOeNEwkV+9VNoMhp0nWQW4wdkmPVkjua+JB8EYt5MfC2+/ygapNKJd4f701FuOXv8KpmY3vIUa4Kzs7xXnXdln5Bp1nOxsnw2NZ9iPhQ9LwsLD0/dXP7t+7Ppp183mOKb9dzkXIqhitRK/v6zeLKgzs6QiFwF5ZyaP1aky7ZwrvOHsljQznMtPi0L35TyqXp+VBfzisi3CylV+q6XeDWfUOBTOGdnkNDHIBfwBYKsn/MFdliaZtzu9bVNyg1FUwxN+emlDWaVhd1tltuC8nEBb3Q37HA4/uYT9iH/g58zCGiIej+oIQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/e23bc569ebacfc05e715cd678ec13b24/50512/slide-057.webp" alt="Slide n&#xB0;057" width="163" height="102" layout="responsive" srcset="/static/e23bc569ebacfc05e715cd678ec13b24/50512/slide-057.webp 163w,
/static/e23bc569ebacfc05e715cd678ec13b24/aeba0/slide-057.webp 325w,
/static/e23bc569ebacfc05e715cd678ec13b24/001d9/slide-057.webp 650w,
/static/e23bc569ebacfc05e715cd678ec13b24/97fd0/slide-057.webp 975w,
/static/e23bc569ebacfc05e715cd678ec13b24/3cea3/slide-057.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/e23bc569ebacfc05e715cd678ec13b24/19bd1/slide-057.png" alt="Slide n&#xB0;057" width="163" height="102" layout="responsive" srcset="/static/e23bc569ebacfc05e715cd678ec13b24/19bd1/slide-057.png 163w,
/static/e23bc569ebacfc05e715cd678ec13b24/d3bcb/slide-057.png 325w,
/static/e23bc569ebacfc05e715cd678ec13b24/dbb61/slide-057.png 650w,
/static/e23bc569ebacfc05e715cd678ec13b24/6b691/slide-057.png 975w,
/static/e23bc569ebacfc05e715cd678ec13b24/e11df/slide-057.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/e23bc569ebacfc05e715cd678ec13b24/dbb61/slide-057.png" alt="Slide n&#xB0;057" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Une fois que toutes les ressources sont taggu&#xE9;es, on peut zoomer sur les d&#xE9;penses d&apos;un projet.</p>
<p>Par exemple, ici, les co&#xFB;t de chacun des services AWS utilis&#xE9;s pour notre application de g&#xE9;n&#xE9;ration de miniatures d&apos;images. On paye du CDN et du stockage, OK, normal. Mais un tier du co&#xFB;t du service qui correspond &#xE0; de la base de donn&#xE9;es, c&apos;est <em>&#xE9;trange</em> vu ce que fait cette application&#x2026; En fouillant, effectivement, les instances de base de donn&#xE9;es &#xE9;taient au maximum &#xE0; 1.5% de CPU consomm&#xE9;, elles &#xE9;taient nettement sur-dimensionn&#xE9;es et nous avons pu les redimensionner &#xE0; la baisse pour payer moins cher.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/07a4909ca8a6f2fde3b5e3f43bccbbbf/e11df/slide-058.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAADJElEQVQozwEZA+b8AC4pJjYxLzQwLhsWEyUeGD85OFJPTz85NhQNBiQaE0A4MlBMTFtYV0VBQkdERFxaWVpYV1pYV1pYVlpXVgCaioOfkY2ZjIdaTUaVg3XVycbRx8mIdmhwWEJvVkBpVUSdiXm3qZ7Hv8G6sbP/+/j79/L79vP69fL59PEApZaQoZKMlX1rg2hUo5aN183Lw7i3XU9Ecl9OSDUmXkg0hmREg2tXua2rraKk8ezq7+rm7unm7Ojl7OfkAJiKhaCQiJZ+a49vVYBqWKmfnaaZlm1UPkYvG0AvIHFcSWdON3JXPHReUK+jpO3o5unk4enk4enk4erl4gCsnZi5qqKfjYFyXUuGbVhyYlmaj5B2YE5oSi5jSzRzWUJCLyBhTTqEbV3Qxsb17erz7Ojz7Ons5OHn39wAgnZxbWNebGJdRzszXE5DVkxEWFBPVkxGTDstRjQkRjQmRjQlTT80bFxRf3l3h4F/iYOBhn99xr686+PhAH93dC4pJz86N0A8Ojo2NEA5Nj43Mj46OTk0Mjw3Njw5ODEtLDs2NkE9PCYiISAeHCUiIBwZGKSdm/Pr5wCxqqhwaWZaUU00KyZDOzdUSkRCMiYnHRUMCQgPCwlGOzNOQztFOTJFOzR6c3GBfHqBfHp9eHXHwb7x6+gA7unm8uzp6uPgxLq2mY6KmY6KlYZ+i3VjXEc1RjUnXkw+YU4/bFhJfWxf5N7a/fr3/fn2/Pf18u3p8OzoAPDs6vDt6vHv7fn29v37+t/b2KKRgmREKH1jSnBbSVxLPEI1Kkg6Ll5OQYBtXaCNfballuPd1/b08fLv7QDy8PDy8fDx8PDv7u3Y1tVtV0NCJAlGLxtbRjRYRzhaSDhsWEVpU0FgSzmFaVBxVT58Z1WnkoDVzMb29fYA//////7+////9vXzsqWasqKUoIx8e2NOiHJdaFE7WToek18tgVYucVhBrpR8v66e6ujo6+Xh9/Pw////AF1cXF1cXF1cXF5dXWJgYGlpa0xJRiscEC8hFCEUCTolEjkkEScXCC0gFU5KR19eXmJhYmBgYl9eX11cXLP/flNp3cgGAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/07a4909ca8a6f2fde3b5e3f43bccbbbf/50512/slide-058.webp" alt="Slide n&#xB0;058" width="163" height="102" layout="responsive" srcset="/static/07a4909ca8a6f2fde3b5e3f43bccbbbf/50512/slide-058.webp 163w,
/static/07a4909ca8a6f2fde3b5e3f43bccbbbf/aeba0/slide-058.webp 325w,
/static/07a4909ca8a6f2fde3b5e3f43bccbbbf/001d9/slide-058.webp 650w,
/static/07a4909ca8a6f2fde3b5e3f43bccbbbf/97fd0/slide-058.webp 975w,
/static/07a4909ca8a6f2fde3b5e3f43bccbbbf/3cea3/slide-058.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/07a4909ca8a6f2fde3b5e3f43bccbbbf/19bd1/slide-058.png" alt="Slide n&#xB0;058" width="163" height="102" layout="responsive" srcset="/static/07a4909ca8a6f2fde3b5e3f43bccbbbf/19bd1/slide-058.png 163w,
/static/07a4909ca8a6f2fde3b5e3f43bccbbbf/d3bcb/slide-058.png 325w,
/static/07a4909ca8a6f2fde3b5e3f43bccbbbf/dbb61/slide-058.png 650w,
/static/07a4909ca8a6f2fde3b5e3f43bccbbbf/6b691/slide-058.png 975w,
/static/07a4909ca8a6f2fde3b5e3f43bccbbbf/e11df/slide-058.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/07a4909ca8a6f2fde3b5e3f43bccbbbf/dbb61/slide-058.png" alt="Slide n&#xB0;058" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Nous avons &#xE0; peine commenc&#xE9; &#xE0; travailler sur l&apos;optimisation des co&#xFB;ts, mais j&apos;ai d&#xE9;j&#xE0; quelques exemples d&apos;am&#xE9;lioration &#xE0; vous partager ;-)</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/030fe7cd1f91912269ab3b8b5c64a171/e11df/slide-059.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACOElEQVQoz6WSa2/SUBjHOzfigLj3hMwP4E6BZELci3207SsgLDHRzZnNGS+JYWzt6hxBKSZu2SVRcMK4tLS0MHoDKT1lLeDhEuMb9YX/8+R3npzkl+d5cTDsfzIzM+NwOKanp6emphBvjYL6Mf8hz8/fDYVCPtzn8XgWF+8vPVgKBoOBQGB5ednr9brd7rm5uTujuFyu27OzqJwul9PpRCOxYqlweZll2HKxdFUV+GZLVRRJlmRZkRu/RZKkMsN8zWQy2WwulxMEYWV1FdO1QUu222q/rfXbaq8pW3qrNxgM+v3Bn2JZFuLa2hp2ltDfPq4Q2yKxJe5vicR2jXgpXpVaQ7/3NzkajWLnST22zpM7NfI5MkVyRyQ2xXiMPyxV6Fo1yXP5tqLZULNNxTJUG/7odW3Lnsinic6bR5U4EjaF3afCmLsbwuuNyost5tUm+4zIbxx/W0f1ecgnx1ma4ZH8MBLB6hxk8+1qyfhVfKnDlTtCEYoFKCLmYbUA+YIxrKJRyXdETh9OjkSx4hfz+Ei6SGkXKfU8pZ0j0mo6UzsU2HcCg0jVGOqaoeoMWS8f1MtHDZY1NCRH0Nq5MzMZu6b3pU+knNprpEmJ3pNoopE4Et9/qCY+ilSao0458oSlTvmDk0r8hE195yZrowuO0r3pQhOaXdPsQqMDJaEpK2pdUW86pmXcdHVoD2ki6lobWeFwGPP5/QAAHMcBPrzAuAFgYQGgcw8s4D4AfGDy7sNHPfD7/ehH/gT7m+JxsiI6twAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/030fe7cd1f91912269ab3b8b5c64a171/50512/slide-059.webp" alt="Slide n&#xB0;059" width="163" height="102" layout="responsive" srcset="/static/030fe7cd1f91912269ab3b8b5c64a171/50512/slide-059.webp 163w,
/static/030fe7cd1f91912269ab3b8b5c64a171/aeba0/slide-059.webp 325w,
/static/030fe7cd1f91912269ab3b8b5c64a171/001d9/slide-059.webp 650w,
/static/030fe7cd1f91912269ab3b8b5c64a171/97fd0/slide-059.webp 975w,
/static/030fe7cd1f91912269ab3b8b5c64a171/3cea3/slide-059.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/030fe7cd1f91912269ab3b8b5c64a171/19bd1/slide-059.png" alt="Slide n&#xB0;059" width="163" height="102" layout="responsive" srcset="/static/030fe7cd1f91912269ab3b8b5c64a171/19bd1/slide-059.png 163w,
/static/030fe7cd1f91912269ab3b8b5c64a171/d3bcb/slide-059.png 325w,
/static/030fe7cd1f91912269ab3b8b5c64a171/dbb61/slide-059.png 650w,
/static/030fe7cd1f91912269ab3b8b5c64a171/6b691/slide-059.png 975w,
/static/030fe7cd1f91912269ab3b8b5c64a171/e11df/slide-059.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/030fe7cd1f91912269ab3b8b5c64a171/dbb61/slide-059.png" alt="Slide n&#xB0;059" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Ici, le co&#xFB;t par jour de notre cluster Kubernetes de staging. Au d&#xE9;part, nous n&apos;utilisions que des instances <em>on-demand</em>. Des instances pay&#xE9;es &#xE0; la minute (ou seconde ?), mais qu&apos;on paye plein tarif.</p>
<p>Mi-octobre, nous avons commence &#xE0; utiliser des instances <em>spot</em> pour tous nos worker nodes, en ne conservant des instances <em>on-demand</em> que pour nos master nodes. Le r&#xE9;sultat ? On le voit bien : des &#xE9;conomies ! Les instances <em>spot</em> peuvent co&#xFB;ter 60 ou 70% moins cher que des instances <em>on-demand</em>, c&apos;est plut&#xF4;t sympa !</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/a2853e0027fc33c15150c84037d27563/e11df/slide-060.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACSElEQVQoz23R22vTUBzA8YDsyYFiUbzg2qHCLmndXNcuc+oehDZpO9bNB2/Viq3IkFKc8zYUa4cThog63INYOqGgosIU3ZNuveV6Tm5NL5Ntf4snTYwKwufhcMj3/HISLBgY+YMKhUZGQ0FrJxT4jaKCBpIKkKTOTwawWvWnoaqtNRqbkAaKpNVr69amVtGpSl2Wa4gkVyWpKooagBVMhKpFUuvPwuO5B2kVnSLIaAcCBQg6npc4VmSbGAbSDCiVeUwSK4gIFK2x8e1V5kn86uzYKfp7XlHrxol6DxRBkHle5jiJ5UQG9SxEzFjvoTp/OZ5KzZzs6l6cnFIbG2g4BKqgjzUz098xFBRtbXNpfuF5Inln+v6Wlpa401X8siypDYGXeA6VZsM2mzINSrRQRK+tXwmoPAufxq5kXi+Onz6LYdjBHbaXF6ICrOhXRTNZkUb3pEG52RRKXL7IrhYYjGdFpb6+9GLhRr83QQYiuOtcR+fEAHGPIJY/fQZilWFQA4zGygzY3VuTM+lU4lJ0Ihycm7p+Mx5D669v3xVWitaHLdLmNIsZ2w84du/bs33XzkN4Zz/h7vX0eYcIt7fvWjKJXtWYafhPvLetbWCQ6DnSu9/h2GazdXR3EUcHTwwPj4VHM5ksy0vNpznj6ZU8QiM/VssIhve4IufPzD1+NJt+OH17KnoxEo/FctlsLvvmw/uPAlR5oHCCjLA8IiEMh4gItrW1Ff2bdofDieOHnXg7WtntXrfb6/EcHzrm81N+P+X7B+nzmX4BpmPVjileaasAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/a2853e0027fc33c15150c84037d27563/50512/slide-060.webp" alt="Slide n&#xB0;060" width="163" height="102" layout="responsive" srcset="/static/a2853e0027fc33c15150c84037d27563/50512/slide-060.webp 163w,
/static/a2853e0027fc33c15150c84037d27563/aeba0/slide-060.webp 325w,
/static/a2853e0027fc33c15150c84037d27563/001d9/slide-060.webp 650w,
/static/a2853e0027fc33c15150c84037d27563/97fd0/slide-060.webp 975w,
/static/a2853e0027fc33c15150c84037d27563/3cea3/slide-060.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/a2853e0027fc33c15150c84037d27563/19bd1/slide-060.png" alt="Slide n&#xB0;060" width="163" height="102" layout="responsive" srcset="/static/a2853e0027fc33c15150c84037d27563/19bd1/slide-060.png 163w,
/static/a2853e0027fc33c15150c84037d27563/d3bcb/slide-060.png 325w,
/static/a2853e0027fc33c15150c84037d27563/dbb61/slide-060.png 650w,
/static/a2853e0027fc33c15150c84037d27563/6b691/slide-060.png 975w,
/static/a2853e0027fc33c15150c84037d27563/e11df/slide-060.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/a2853e0027fc33c15150c84037d27563/dbb61/slide-060.png" alt="Slide n&#xB0;060" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Bien s&#xFB;r, <em>pas de magie</em>.</p>
<p>Le c&#xF4;t&#xE9; <em>moins sympa</em> des instances <em>spot</em>, c&apos;est qu&apos;AWS peut vous les <em>reprendre</em>. N&apos;importe quand. Il nous est arriv&#xE9; de perdre un tier de nos instances d&apos;un coup. Au d&#xE9;but, &#xE7;a faisait mal&#x2026; Depuis, on a retouch&#xE9; pas mal de configuration et notre cluster tient bien mieux &#xE0; la perte d&apos;autant de machines (du coup, notre plateforme a gagn&#xE9; en r&#xE9;silience.).</p>
<p>&#xC0; vous de voir si perdre des instances n&apos;importe quand est acceptable. Dans les faits, m&#xEA;me si &#xE7;a fait peur, c&apos;est souvent jouable. Actuellement, en production, 20% de nos worker nodes sont des instances <em>spot</em> et nous allons augmenter ce pourcentage dans les prochaines semaines.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/f4641c20ede06f54348ac4d88dab8726/e11df/slide-061.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACTElEQVQoz6WQ208TQRTG918UFBJB6KsJCZFEHzQmiMTEoMRHNSa+eEMiQTACJkI0DYFAKbbd7e7szOzM7Oylu9t2uttyCRc9UOTFR09OJr853zf5ZkYb/ltDQ8P/Vi53CReUuzCflfb7P0qLkjrClDI3qitMmWlTmzIhPRNhmwpEKGECVMumpUoVJOwwwngrzY5OTrWRd2j0A5pYpNPfxNhHdG8O358no+/R+AJ9siLGZuw7s/bUCr81Y08skMdf2e1ZPPLWuvnGvDuHtclF9nCBPlvhr37IR1/o9DKDhsnTJefFqpgEWGYv1/jUEnu+6r7+KUF98JmMz4OTa/kCKuNEZ60SbZoiLdpRwQyQzLYNb23TRLK9vks/LeUrtAGesqMMpqpc6VzZMtUsHvNaht16yXJlvAeAeBw0Dg0SbBYtv76vY/97vsCCFsx3KtSN2m7UEVHHTzqaYYtY7VuiqdMEeyn2Mlu2iJ+Zomk4dexnlqvKOALJ5A2dxgC2lyIvdYK2ZhEvVge2qP8yz5J3q2K7TAEQT3Z0JuP9Kq2tF6oszEwn3ioRUetA81rHizvaZkGHw1Y3x0sNluhOQrwMcirkLNASqgwgIRk8CQC8FrmQnGmY12SoLBYVq1xE7aLBNnYR/AL1VJWGMtkzSJjf0qmvdBJuFC0eZnALJ8zc6PywGzRFcuiEe746gRXe6atj2Tji8UHQOhHxAUR5zWPYdiVg2Tiupafa4FBu4MZwT98A9JVr13v7Bnr7BwGguxNYr/YP9pxDb9+F1HX+Ad8IYyzN9Ki5AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/f4641c20ede06f54348ac4d88dab8726/50512/slide-061.webp" alt="Slide n&#xB0;061" width="163" height="102" layout="responsive" srcset="/static/f4641c20ede06f54348ac4d88dab8726/50512/slide-061.webp 163w,
/static/f4641c20ede06f54348ac4d88dab8726/aeba0/slide-061.webp 325w,
/static/f4641c20ede06f54348ac4d88dab8726/001d9/slide-061.webp 650w,
/static/f4641c20ede06f54348ac4d88dab8726/97fd0/slide-061.webp 975w,
/static/f4641c20ede06f54348ac4d88dab8726/3cea3/slide-061.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/f4641c20ede06f54348ac4d88dab8726/19bd1/slide-061.png" alt="Slide n&#xB0;061" width="163" height="102" layout="responsive" srcset="/static/f4641c20ede06f54348ac4d88dab8726/19bd1/slide-061.png 163w,
/static/f4641c20ede06f54348ac4d88dab8726/d3bcb/slide-061.png 325w,
/static/f4641c20ede06f54348ac4d88dab8726/dbb61/slide-061.png 650w,
/static/f4641c20ede06f54348ac4d88dab8726/6b691/slide-061.png 975w,
/static/f4641c20ede06f54348ac4d88dab8726/e11df/slide-061.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/f4641c20ede06f54348ac4d88dab8726/dbb61/slide-061.png" alt="Slide n&#xB0;061" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Une autre option est de travailler avec des instances <em>r&#xE9;serv&#xE9;es</em>.</p>
<p>Ici, un tableau de co&#xFB;ts d&apos;instances <code class="language-text">c5.4xlarge</code> &#xE0; Paris -- les instances que nous utilisons comme worker nodes dans notre cluster Kubernetes de production. 16 CPU et 32 GB de RAM. Une instance de ce type, en tarification <em>on-demand</em>, co&#xFB;te quasiment 7000 USD par an, si elle est allum&#xE9;e en permanence.</p>
<p>En s&apos;engageant pour un an, nous pouvons r&#xE9;duire ce prix de plus de 30%. Hey, si nous savons qu&apos;une instance sera allum&#xE9;e en permanence pendant un an, &#xE7;a vaut le coup ! Nous avons r&#xE9;serv&#xE9; de la sorte nos trois master nodes, plus six worker nodes (nous ne descendons jamais en-dessous de six worker nodes). Ca fait tout de m&#xEA;me plus de 10000 USD d&apos;&#xE9;conomies sur un an, en quelques clics !</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/8508a39a5856e0db366b9164b4f496f4/e11df/slide-062.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACXklEQVQoz6VQW08TQRjdn+cFpFQLEbT01QfiLfpiNAQwMcELr14efPAGGsVitBojKYKAUKBbtu3OzszO7s7udtttu5cWgtz8XKIx8dEvJ5Mz3zn5zjcjDPyuZDI58E+lUn9I6u9+Mirh4D9KqLp1hCllRrXhYcrKClWopnOrjAimGiIqZTqo4BElEBlWNej4Qbi7tycMPkMXXqCRaXrvk3ZpAl17jW9MkfPP0VCa3v6oXZ5EV18pYxnt4oQynCa33rMrL/HgU/ncE/n6G0UYnWajaTr+UXuUNW5O07sZBhhJ0zsZ9mBGH43Iwxlt7AO7/8V4PGuCOvyWDE3R8QwT5nJKAbsS89Zxvaz7a7KzUrIRD5cl/nmhKPNwfo1Mvstu0MaG6uVJo8i8kuaBH/FAQJqrVUIANT1e22R2oFq+6W7BtaxWeW2L8IYoG7rTAgkbdaPaPoRZawtFpLv+jzyy5lZK2AqLqlvAjuq0oTOfk4ndyiv2zIIo6808ssGjmAE2A2QG1A4FmVo1bxsbjQIyjVobRpVUh7tbil6HQO5uQie3ocJqQPJlHTL1CBySl3KSG+z8Ss6VidVaXMdfl4tACooDnFihiOzsd0nhQV6OtuMBcGREyVhzeMVXdFdEXHfCEq2IMtecFuHNIrEhQdZqq5IKD4bfgV1gBRYBzAJmFV6FYb6o2BV//9uqPLsk2d6+7m4j7jvhgcK9hTVkNnYkUs0uFixvz2zu8uYumIWzydSZZKor3tvRlYgn+o92xI4cj8UTfbFTp0/Ee+M9/XAe64x3J/o6Y4lDqTvCyZ7+n62eX+4y3rqYAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/8508a39a5856e0db366b9164b4f496f4/50512/slide-062.webp" alt="Slide n&#xB0;062" width="163" height="102" layout="responsive" srcset="/static/8508a39a5856e0db366b9164b4f496f4/50512/slide-062.webp 163w,
/static/8508a39a5856e0db366b9164b4f496f4/aeba0/slide-062.webp 325w,
/static/8508a39a5856e0db366b9164b4f496f4/001d9/slide-062.webp 650w,
/static/8508a39a5856e0db366b9164b4f496f4/97fd0/slide-062.webp 975w,
/static/8508a39a5856e0db366b9164b4f496f4/3cea3/slide-062.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/8508a39a5856e0db366b9164b4f496f4/19bd1/slide-062.png" alt="Slide n&#xB0;062" width="163" height="102" layout="responsive" srcset="/static/8508a39a5856e0db366b9164b4f496f4/19bd1/slide-062.png 163w,
/static/8508a39a5856e0db366b9164b4f496f4/d3bcb/slide-062.png 325w,
/static/8508a39a5856e0db366b9164b4f496f4/dbb61/slide-062.png 650w,
/static/8508a39a5856e0db366b9164b4f496f4/6b691/slide-062.png 975w,
/static/8508a39a5856e0db366b9164b4f496f4/e11df/slide-062.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/8508a39a5856e0db366b9164b4f496f4/dbb61/slide-062.png" alt="Slide n&#xB0;062" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Et si vous &#xEA;tes s&#xFB;r d&apos;avoir besoin des m&#xEA;mes instances pendant plus longtemps, vous engager pendant trois ans peut mener jusqu&apos;&#xE0; 58% de r&#xE9;duction -- si vous payez les trois ans en avance.</p>
<p>Bon, par contre, vous perdez <em>quelque peu</em> en souplesse ; finalement, vous en revenez &#xE0; acheter des machines et les amortir sur trois ans, comme vous faisiez <em>on-prem</em>. Mais dans <em>Le Cloud</em>.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/006b274492ca47a87318078efa2dd96c/e11df/slide-063.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACWklEQVQoz6VQW08TQRjdH6ip3BW01B9giJrog/FBgWjiNfEJg+FNRYwxgAoabUoIBGptabu32dnZue222+5uu72AioAfTTQkPnoy+XLmfN/kfGeU8T9IJpPj/yCV+ktSJ/VkD8rRf0CpBRHChFBeC5uYUNMiFmFCugbCmHBkH7dAgJmialiEYodhwhpxe//XgXLpOZp4iSaXyKOP7Mo8uvEG33xrT7xAtxbJg1V29RW6/tq6t8Iuz1u3F+277+m1BTy97Nx5R+GqTC3RqUXyeJXNZsT0Enm4QuFMwssV+jTNp3pkNs3uf6AzaTG35j75xGe+iGcZObcmlPWcVbIDlTaLJDJ4K2/6Ob1iik5WlZ83NSQ6G9/sheVMmURlp1m0I5g8JqRh8FixeMD8ti0bKvZkfZdWWo4Xu+F3UHRSdYM9LKKCzrjfgRZiwbHCgx2Du/WuoiEWtvbzhsxslbHbRrxpsMiudDQnKJiu7bV1GuZUhmQMSl4XpNrNqjS9WSKVtmISN4h/GE4tW8Si3kU80B0fVgBnza6I+i6WUdEUrNqxZVS2XDfcA30jp8OMspVTw9bPgiHXshr22kXLgy1wz3DH9GAXHQw1bsmWRgJokUr3q8rA2al2FEyr0o8h3nbBgvBgW0Iu99vEayJWF7WuxUNICIHhd0qmBMOSJde3VVHrKDaturUW4lHecL3mARINgwVAZPiT+rvV+BCq6tTcaN/xuzqt+60jzalv5JEfHyoXkhfPJ1OJgbOn+4b7h0YTAyNwgPQNjZ4ZPNffq4n+kRNkDOqpxODA8Nhv88Rg4k0lgqoAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/006b274492ca47a87318078efa2dd96c/50512/slide-063.webp" alt="Slide n&#xB0;063" width="163" height="102" layout="responsive" srcset="/static/006b274492ca47a87318078efa2dd96c/50512/slide-063.webp 163w,
/static/006b274492ca47a87318078efa2dd96c/aeba0/slide-063.webp 325w,
/static/006b274492ca47a87318078efa2dd96c/001d9/slide-063.webp 650w,
/static/006b274492ca47a87318078efa2dd96c/97fd0/slide-063.webp 975w,
/static/006b274492ca47a87318078efa2dd96c/3cea3/slide-063.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/006b274492ca47a87318078efa2dd96c/19bd1/slide-063.png" alt="Slide n&#xB0;063" width="163" height="102" layout="responsive" srcset="/static/006b274492ca47a87318078efa2dd96c/19bd1/slide-063.png 163w,
/static/006b274492ca47a87318078efa2dd96c/d3bcb/slide-063.png 325w,
/static/006b274492ca47a87318078efa2dd96c/dbb61/slide-063.png 650w,
/static/006b274492ca47a87318078efa2dd96c/6b691/slide-063.png 975w,
/static/006b274492ca47a87318078efa2dd96c/e11df/slide-063.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/006b274492ca47a87318078efa2dd96c/dbb61/slide-063.png" alt="Slide n&#xB0;063" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Cela dit, si vous n&apos;&#xEA;tes pas s&#xFB;r du type exact d&apos;instance dont vous aurez besoin &#xE0; l&apos;avenir, vous pouvez aussi vous engagner, mais sur des instances convertibles -- vous pourrez changer de taille d&apos;instances. Le gain est alors un peu plus faible. Mais c&apos;est plus souple.</p>
<p>Alors, sur l&apos;&#xE9;cran, combien de tarifs diff&#xE9;rents rien que pour un seul type d&apos;instance ? Quand je disais, <em>l&apos;enfer des co&#xFB;ts</em>. Bon courage !</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/17fd0e4875c3aeee7e0028c53a0417b8/e11df/slide-064.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACbUlEQVQoz6WSz0/TYBjHCwOUK55IBNZ2cMIDSEiW4AX/oh10wBQwGdxMTDRiYGMzcoHIHMLGUBAThzBkLSjl7dvCWujarmVAGD8G+9H6DqKJB734zTdPnueb9/PkObwY9j+qrKysqqqqqKgoKyu77lFF43VosVjKy8v/CtfW1ra3t99pbq6rq2tpbbnX0XG/s7Opqam1taWt7a7dbsdxHC26cfMPVVdXo9VYLLZK0zQHORYJIEOO4wFgAQAQwm1+m0MVcsiQhddmNhktpTkcDsw0zUKhYP5TWcPIGMXfYz6fR3VwcBDLn5tpNXugXurJCyWRTWyegujJEqMHVPGtLI6I8NkO0w9p7y6HAMMwikXjMpdDvdvtxtjlwtQrZc6vz47qYY82PayFX+jeoPCAXesC8R5APWKpLkB5Rc48OzMvLxCdy2YRPIBguFIIvizBkdEr+/V5T3osLPbx9BO43s8i0z3chmd9pfh+0pgLGQsfcjNBMx4b6O4qwVNDV7Cv5Fm//nEk/SYkPubp/l+wi//uo76ak+MlByby42Nm9POA04mBaD7wXEYHz4xooWFt2qNFhvb9U0LPFuUCFDq7G8SdkHq6sby0GJFD74qB8fMS/MntfIilePNL4PBbJLMaPomFM2vhTDyUic4fLUTTE6zk20283hV8e4JXEoYkMbjDLwFmcZ3e0bXe3j5MYE7VlCpJSSkpp2Tlh6auSHsHqiaLipJUNCWF4mNRON5iVG1/T0oKaiohK0fnF90uF2att5Ekib4RTuAkQdSTxG0CR5GVsBIoIVFG2HBrY0MDabMRVit6aiOIRpK8VVPzE0LoyDrGH6irAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/17fd0e4875c3aeee7e0028c53a0417b8/50512/slide-064.webp" alt="Slide n&#xB0;064" width="163" height="102" layout="responsive" srcset="/static/17fd0e4875c3aeee7e0028c53a0417b8/50512/slide-064.webp 163w,
/static/17fd0e4875c3aeee7e0028c53a0417b8/aeba0/slide-064.webp 325w,
/static/17fd0e4875c3aeee7e0028c53a0417b8/001d9/slide-064.webp 650w,
/static/17fd0e4875c3aeee7e0028c53a0417b8/97fd0/slide-064.webp 975w,
/static/17fd0e4875c3aeee7e0028c53a0417b8/3cea3/slide-064.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/17fd0e4875c3aeee7e0028c53a0417b8/19bd1/slide-064.png" alt="Slide n&#xB0;064" width="163" height="102" layout="responsive" srcset="/static/17fd0e4875c3aeee7e0028c53a0417b8/19bd1/slide-064.png 163w,
/static/17fd0e4875c3aeee7e0028c53a0417b8/d3bcb/slide-064.png 325w,
/static/17fd0e4875c3aeee7e0028c53a0417b8/dbb61/slide-064.png 650w,
/static/17fd0e4875c3aeee7e0028c53a0417b8/6b691/slide-064.png 975w,
/static/17fd0e4875c3aeee7e0028c53a0417b8/e11df/slide-064.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/17fd0e4875c3aeee7e0028c53a0417b8/dbb61/slide-064.png" alt="Slide n&#xB0;064" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Nous stockons de gros fichiers -- des vid&#xE9;os -- sur S3. Un de nos buckets grossit d&apos;environ 2 TB par jour. Cela repr&#xE9;sente un co&#xFB;t vraiment pas n&#xE9;gligeable. Un moyen de r&#xE9;duire les co&#xFB;ts sur S3 est de changer de classe de stockage. Par exemple, en basculant les fichiers en <em>acc&#xE8;s infr&#xE9;quent</em>, o&#xF9; le stockage co&#xFB;te moins cher (mais o&#xF9; l&apos;acc&#xE8;s co&#xFB;te plus cher).</p>
<p>Effectuer cette bascule <em>&#xE0; la main</em> demande de savoir pr&#xE9;cis&#xE9;ment quels fichiers sont utilis&#xE9;s souvent ou non. Pas &#xE9;vident. Fin 2018, Amazon a sorti une fonctionnalit&#xE9; qui changement automatiquement la classe de stockage de fichiers, en fonction d&apos;un apprentissage effectu&#xE9; sur 30 jours.</p>
<p>Sur le screenshot ci-dessus, on passe de violet &#xE0; vert lorsque nous avons activ&#xE9; cette fonctionnalit&#xE9; sur ce bucket. 30 jours apr&#xE8;s, passage de vert &#xE0; rouge, avec une r&#xE9;duction de 30% du co&#xFB;t de stockage : un tr&#xE8;s grand nombre de fichiers ont &#xE9;t&#xE9; pass&#xE9;s en <em>acc&#xE8;s infr&#xE9;quent</em>. <strong>Une case &#xE0; cocher, 30% d&apos;&#xE9;conomies</strong>. Sur un bucket qui grossit de 2 TB par jour, &#xE7;a vaut le coup !</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/d96cfa6836c7a2fc8c7ea0ae1f802284/e11df/slide-065.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAB0ElEQVQoz6VSW4vTQBhNL/Sxb6X9Aa4LUlyxa9NAIUlT6A/0QcV/4JPIKvhkdVFxhXWXvdWqddvubjdJm21qkrlkpvGbpMRFRAQPw+R8Z3LmzE2S/gf5fD6Xy2Wz2VTJxshkMol4feh3rN9cN1qGpmrValVRFKPVaul6u92u1+uqqnY6HU0V0HX9zsbG2o21UqlUqVTK5XKhUJAcxzk/v0AI+TEwxkEQ+Ct4UMIHRhM9QIHneaAAhRmlKIoYY9E/IKRLb84FW4oOlrgyL2MI/RpJbQlFPrPHRJRc1LCRP5uBci76tAGwz2cTQjBn4V/NaWY8xTJJc6ehNcanx75jinxNS81xQGqAFZpDPOoF48/Bx5dXwxOfYj4ZoMtTdPjWPXq/+JVMUEgJh/OgSMSc9fHWQ3PrkfXsgfn8sfX0vtl9MvMXfO/VYtRDwD+8mK/MjETfe87gxBl9mY/67rA/P96Z7XanB+/s/e3p3hv702sL2tnA3d+2vh5c7XbNox37h4sNwxDJcK8IBZhgSgnGKGRA6LfD2aU5Me0LP1gwDjqmDIt/GMIUEULhMUnNZlOWZXhbjRgxUWS5cfvWvdrdzVptU67LsSx0paEkHFAsFn8CKwMGSwvFh5cAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/d96cfa6836c7a2fc8c7ea0ae1f802284/50512/slide-065.webp" alt="Slide n&#xB0;065" width="163" height="102" layout="responsive" srcset="/static/d96cfa6836c7a2fc8c7ea0ae1f802284/50512/slide-065.webp 163w,
/static/d96cfa6836c7a2fc8c7ea0ae1f802284/aeba0/slide-065.webp 325w,
/static/d96cfa6836c7a2fc8c7ea0ae1f802284/001d9/slide-065.webp 650w,
/static/d96cfa6836c7a2fc8c7ea0ae1f802284/97fd0/slide-065.webp 975w,
/static/d96cfa6836c7a2fc8c7ea0ae1f802284/3cea3/slide-065.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/d96cfa6836c7a2fc8c7ea0ae1f802284/19bd1/slide-065.png" alt="Slide n&#xB0;065" width="163" height="102" layout="responsive" srcset="/static/d96cfa6836c7a2fc8c7ea0ae1f802284/19bd1/slide-065.png 163w,
/static/d96cfa6836c7a2fc8c7ea0ae1f802284/d3bcb/slide-065.png 325w,
/static/d96cfa6836c7a2fc8c7ea0ae1f802284/dbb61/slide-065.png 650w,
/static/d96cfa6836c7a2fc8c7ea0ae1f802284/6b691/slide-065.png 975w,
/static/d96cfa6836c7a2fc8c7ea0ae1f802284/e11df/slide-065.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/d96cfa6836c7a2fc8c7ea0ae1f802284/dbb61/slide-065.png" alt="Slide n&#xB0;065" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Et puis, pour finir&#x2026; Puisque tout a un co&#xFB;t dans <em>Le Cloud</em>, juste&#x2026; <em>Ne faites pas n&apos;importe quoi</em> !</p>
<p>Ce screenshot, o&#xF9; je n&apos;ai pas enlev&#xE9; les montants sur l&apos;axe &#xE0; gauche, montre le co&#xFB;t par jours des &#xE9;critures de logs vers Cloudwatch -- le service manag&#xE9; de logs d&apos;AWS. Ici, on voit deux moments o&#xF9; nous avons pay&#xE9; <em>anormalement cher</em>.</p>
<p>Au d&#xE9;part, d&#xE9;but f&#xE9;vrier, nous payions environ 15 USD/jour, consid&#xE9;rons que c&apos;est <em>la normale</em>. Apr&#xE8;s quelques jours, nous avons un premier plateau, au milieu du graphe, entre 75 et 100 USD/jour. <em>Bizarre</em>. Nous avons fini par fouiller : qu&apos;est-ce qui pouvait &#xE9;crire autant de logs, pour que &#xE7;a nous co&#xFB;te aussi cher tous les jours ? Et bien, le 20 f&#xE9;vrier, nous avons d&#xE9;ploy&#xE9; une nouvelle application (ex&#xE9;cut&#xE9;e plusieurs fois en parall&#xE8;le) qui, dans ses logs, &#xE9;crivait toutes les secondes &quot;je suis vivante&quot;, &quot;je suis vivante&quot;, &quot;je suis vivante&quot;&#x2026; Toutes les secondes. Des dizaines de fois toutes les secondes, puisque nous avions beaucoup de replicas ! En supprimant ce log compl&#xE8;tement inutile, en changeant un <code class="language-text">-v=4</code> en <code class="language-text">-v=2</code>, plus de 50 USD/jour d&apos;&#xE9;conomie !</p>
<p>Quelques jours plus tard, des pics &#xE0; 100 USD/jour. Voire m&#xEA;me 200 USD/jour. Whoa ! Le lendemain, c&apos;&#xE9;tait retomb&#xE9;, nous avons laiss&#xE9; filer sans chercher, nous avions autre chose &#xE0; faire. Mais, quelques jours plus tard, &#xE0; nouveau plus de 100 USD/jour. Juste pour &#xE9;crire des logs. Bon, l&#xE0;, nous avons cherch&#xE9;. Et nous avons fini par r&#xE9;aliser qu&apos;une application, &#xE9;crite dans une techno dont je tairai le nom, plantait plusieurs dizaines/centaines/milliers de fois par secondes pendant notre pic de charge, en produisant &#xE0; chaque fois une stack-trace longue <em>comme &#xE7;a</em> <em>(mouvement d&apos;&#xE9;carter les bras tr&#xE8;s large)</em>, chaque ligne se terminant par <code class="language-text">.js</code> <em>(petite pause)</em>, qui &#xE9;tait loggu&#xE9;e vers Cloudwatch. <em>Ah ou&#xE9;</em>. Plus de 100 USD par jour, pour des stack-traces, que nous ne regardions m&#xEA;me pas ? <em>S&#xE9;rieusement</em> ? Bon, on n&apos;a pas cherch&#xE9; plus loin, on a fait disparaitre les logs de cette application en les redirigeant vers <code class="language-text">/dev/null</code> et probl&#xE8;me r&#xE9;gl&#xE9;. Malgr&#xE9; cette stack-trace, l&apos;application fonctionne. Non, je ne sais pas l&apos;expliquer.</p>
<p>Avec ces deux exemples, ce que je veux montrer, c&apos;est que si vous faites <em>n&apos;importe quoi</em>, vous allez le payer. Cher. Et faire <em>n&apos;importe quoi</em>, &#xE7;a arrive, il n&apos;y a que ceux qui ne font rien qui ne se plantent jamais. Donc, suivez vos co&#xFB;ts, r&#xE9;guli&#xE8;rement !</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/f3b87a9e36023cba7a85d929330546c1/e11df/slide-066.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACQUlEQVQoz32PS08aURzF+RxdmFhTKdAZQBjmwb3zgpAIg49BbMWpAgqYmNpEGGv9AG1so5A+giQs2659NPHV1kiabuzGpOmgfgZXrqv9X0eTNrE9OTlz5t753f8dh2EY2fFxYpBdiC979o9Fu1zLMEYzmRHH19b+4vNnr2q16tJSbXn50napQlahVEmBhE6+qS6/fLHYtn5eXFw43r55HfD7IooSVVUJYyTwGIVVWYauSJLA8yLG8KrIMkJhJAiyKDLBwNrqGoE31tcfTU8vzM8vPJ1/MjcHZc40K+VyeXYW8sqVikmibJom7D6emfl+cEDgD+/ej46MFAuFyYmJyXx+fGxM1/V4PK5dKyHhRFTVEnEtkdCikWS8NxaL7X3ZI/BKvQ4XA35I1++n0/HeXkEQMMZhW4LAUW7G7WS9FONyct23UYgJMsz29jaBG40GQsjIZPTBwXQq9WB4OD00lNL1vmRSkmU4A7Mh1u/jaE8ASNotSRLLsrs7OwRuNpsRVdEHBmBmUtPA/clkf18frERUFXEcDgVRwMdTbuy5i2jPNbx7NZmiKFiC+XBNO22JoogFHkgY29PdxTm7sPeeJMl/wV6vV1EU8SZhOCzgA0akXMjVjYM9IkxmmK3NTQLX6ys0TcvwezdKFMNMMHink+q45e/s4AN+xIYYv29jdfX8/Jfj9PS0bbVPjk/+5SOr/a21v/VxvfX504/DQ8uyjizr7OyMTM7l8sViqVAo/selUmlqagoehSIRZDabM4yHvwFEID62E4Tn6AAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/f3b87a9e36023cba7a85d929330546c1/50512/slide-066.webp" alt="Slide n&#xB0;066" width="163" height="102" layout="responsive" srcset="/static/f3b87a9e36023cba7a85d929330546c1/50512/slide-066.webp 163w,
/static/f3b87a9e36023cba7a85d929330546c1/aeba0/slide-066.webp 325w,
/static/f3b87a9e36023cba7a85d929330546c1/001d9/slide-066.webp 650w,
/static/f3b87a9e36023cba7a85d929330546c1/97fd0/slide-066.webp 975w,
/static/f3b87a9e36023cba7a85d929330546c1/3cea3/slide-066.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/f3b87a9e36023cba7a85d929330546c1/19bd1/slide-066.png" alt="Slide n&#xB0;066" width="163" height="102" layout="responsive" srcset="/static/f3b87a9e36023cba7a85d929330546c1/19bd1/slide-066.png 163w,
/static/f3b87a9e36023cba7a85d929330546c1/d3bcb/slide-066.png 325w,
/static/f3b87a9e36023cba7a85d929330546c1/dbb61/slide-066.png 650w,
/static/f3b87a9e36023cba7a85d929330546c1/6b691/slide-066.png 975w,
/static/f3b87a9e36023cba7a85d929330546c1/e11df/slide-066.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/f3b87a9e36023cba7a85d929330546c1/dbb61/slide-066.png" alt="Slide n&#xB0;066" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Au niveau des bons c&#xF4;t&#xE9;s, tout tagguer permet de savoir exactement combien chaque projet co&#xFB;te. Cela permet de facturer l&apos;h&#xE9;bergement par projet, mais aussi de d&#xE9;velopper en fonction des co&#xFB;ts. De d&#xE9;velopper le business en fonction des co&#xFB;ts.</p>
<p>Par exemple, nous pouvons d&#xE9;sormais aller discuter un product owner d&apos;un projet qui co&#xFB;te <em>une fortune</em> mais qui ne rapporte <em>pas grand chose</em> : peut-&#xEA;tre qu&apos;arr&#xEA;ter ce projet serait une bonne id&#xE9;e ? Ou, plus fr&#xE9;quemment, nous pouvons identifier qu&apos;un projet extr&#xEA;mement important pour le bon fonctionnement de notre plateforme est fort co&#xFB;teux et d&#xE9;cider d&apos;investir du temps pour l&apos;optimiser.</p>
<p>En plus de cela, les co&#xFB;ts ont d&#xE9;sormais un impact sur nos choix techniques. En fonction des besoins d&apos;un projet, ses d&#xE9;veloppeurs vont choisir une base de donn&#xE9;es relationnelle avec RDS ou du cl&#xE9;-valeur &#xE9;volu&#xE9; avec DynamoDB. Mais, d&#xE9;sormais, le co&#xFB;t de ces solutions entre dans les crit&#xE8;res de choix.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/e29549c15e9ee109a36bbb0096c428a2/e11df/slide-067.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAC30lEQVQoz2OIj49LSkpEoEQwAjESEAhNNjExLjYmOjqK4dixYx3t7ZMmTuzv75vQ3z8RiPv6+vt6gXR/Xz+QBAn09vZ0d0NQb08PUP3169f+///PMG3KFFMjQxsrSztrSwcbKwdbaysLC0tzc1dnJ3tbGwc7GzsbGwN9fQ11dS1NTSDS0dZWUlRcv24dSPPmTZvy8/JKcjIyQjzSw7xjvOzT4yIrKyoqykorykvLy0orK8qB7JKiouLCQhAqKsrNyT5x4vi/f/8YFs2eGRMZkZGcGOHr7udi62plEhnkl5mRnpGanJmWGhcdBURADwb4+Xl5enp7e/v4+Li6uOzbtx9kc39Bsr2NpaeTvbONuYOFiYWhrpWpkYuzk6O9nZODvaWFhamJsamhgbmpsYWZqZmhnpmBjp66ysoFM//9/slQFedvZqRvZqDrYGHsZmthbaxvZ2kWGBAQFBgYFBjg5uJiqqtppqtuqqthpquhoyxnpKmkr6bQnR/17OpJhuqEQAtjA1N9XStjPU8HazM9LVszYy9XJ0tjA1tzU1tLM3MDHVNddRNtVX1VeSEeDg05CaARtfFet0/uYSgKdJAWExLi5VaRFjfVUpYTE1KUFDVWV9RWkNRXkdVWktFXUwTqNASJSAlys6vJiuuoyJVGON8+tZ8hx99OhIeDm41JnJ9LV1FKmIddTlzYVFtFW1EKaIkAN7u8hIi5vqaxloq+ipwAF5uihLCWgnSGr9Xy3kqGwmg/CQFeRWlxZVkJNVkJoE4VaTF1KSFZQW4JXnZmBgYedhY1KRF1GVEZQS5+DhYZYT4FMcFoF5P+4niGly+eX7xw/uqVy5eB1NkzQHT2xNFNC6dNaSzpLM+Z3de2au7U6R11ExtKJ7fWbl42b8/G1bs3rLp24uCHZw8ZEhMS0lJTU5KTwSgpOSkJxEhJSYyPA6KUpITkxPikBGAOiElMiEuIi4mPjQai6MiIiPAwAGhbC72+Qow+AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/e29549c15e9ee109a36bbb0096c428a2/50512/slide-067.webp" alt="Slide n&#xB0;067" width="163" height="102" layout="responsive" srcset="/static/e29549c15e9ee109a36bbb0096c428a2/50512/slide-067.webp 163w,
/static/e29549c15e9ee109a36bbb0096c428a2/aeba0/slide-067.webp 325w,
/static/e29549c15e9ee109a36bbb0096c428a2/001d9/slide-067.webp 650w,
/static/e29549c15e9ee109a36bbb0096c428a2/97fd0/slide-067.webp 975w,
/static/e29549c15e9ee109a36bbb0096c428a2/3cea3/slide-067.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/e29549c15e9ee109a36bbb0096c428a2/19bd1/slide-067.png" alt="Slide n&#xB0;067" width="163" height="102" layout="responsive" srcset="/static/e29549c15e9ee109a36bbb0096c428a2/19bd1/slide-067.png 163w,
/static/e29549c15e9ee109a36bbb0096c428a2/d3bcb/slide-067.png 325w,
/static/e29549c15e9ee109a36bbb0096c428a2/dbb61/slide-067.png 650w,
/static/e29549c15e9ee109a36bbb0096c428a2/6b691/slide-067.png 975w,
/static/e29549c15e9ee109a36bbb0096c428a2/e11df/slide-067.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/e29549c15e9ee109a36bbb0096c428a2/dbb61/slide-067.png" alt="Slide n&#xB0;067" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Dit comme &#xE7;a, &#xE7;a a presque l&apos;air simple&#x2026; Mais rappelez-vous ce que je disais il y a quelques minutes : <em>l&apos;enfer des co&#xFB;ts</em>. En r&#xE9;alit&#xE9;, ce n&apos;est pas exactement <em>simple</em>.</p>
<p>Au lieu de nous torturer l&apos;esprit et d&apos;essayer de deviner combien nous allons payer, nous avons admis que nous ne savons pas pr&#xE9;dire exactement et nous suivons une approche plus pragmatique. Pour la migration de nos applications ou pour un nouveau projet, nous estimons <em>&#xE0; la louche</em> les co&#xFB;ts de nos choix techniques, nous d&#xE9;veloppons, nous d&#xE9;ployons&#x2026; Et une fois l&apos;application en production, nous suivons r&#xE9;guli&#xE8;rement son co&#xFB;t. Apr&#xE8;s quoi, nous optimisons et nous it&#xE9;rons. Et ce tant que le co&#xFB;t est <em>trop &#xE9;lev&#xE9;</em> ou tant que nous avons des id&#xE9;es d&apos;optimisations pas trop co&#xFB;teuses &#xE0; mettre en place. N&apos;oublions pas que le temps de d&#xE9;veloppement, &#xE7;a co&#xFB;te cher aussi.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/72dc6fec0756dfdbcd38654515a1ffa8/e11df/slide-068.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAADIUlEQVQoz2NgZWHh4mAX5OMRFuAT4ucVFeKXlRRTlZdRU5DRUJZXkZcREeDn4ebk5eYCqpEQFVaQkdBWUTDRVTfQVGHwcbIMdLd1szU11lZVlpOUFhdRlJHQUVMw19cw01PXVJETFuQH6hQR4geyHS2NPR0svRwsHC0M9TSUGdbO7lo/t3d+X313TV5LaUZTcXp5VlxFdnx3bX53TX5beVZZRkx8sKenvbmFoZa1sY6FobaaogwvDxcDAyPD4+tnXty99Pbh9fdPb71/fPPDExB6+/DqyzsXn908+/TGmSfXTt0+tef0juWbFvRPbirKSwjxdrQ00lFVVZBh+Pbm0f+f7///+fz/31cQ+v3p/6+P/7+//ffl1c93T94+uHLl6PY1cydObC6vK0xJCvcB6vRzsY7wdQr3cWI4sG1tf3vD9P72qb2tU3pap3Q3A7k9zdUt1UWVeamZcaG+zlYq8lIc7KzMjIzMTEwsLCwc7GxcHBwc7OwME9vrrM0MnGzMHKxNnW0tDHXU1ZTk1JRkleWl5aTERAT52FhZgd4DAgYkAORwcbIz7N60squxcubEDqC1QDs7m6o6GipbaoprirOK0mPjgj3N9DXlpcWBMWRuqO3tbBPq4xod5FNdkDahqYxhUkv5hJaKxdO6T+xe9/Le6W+vHn57/fDN/avXjm7bsXTKlKai+GAPIx01PxerWR0VZ3evfHBu/6sbp9/cOffq5mmGB1dP7d6wdFZ/a21RWscEgw3Lay4d2vXwyskHl06c3bNu1Yz2CfUFLSVpDQVJPdU5U1pKJzaW9DaU9DWWTmmrZPj3/f2/v1/+///18Pr5k4c2vntx/cPz+x+e3Xl1/+rd80dO7Fi1YW7v1OaSsvSohGDPIA87YPIAJidVBSlxEQGGLy/vfXp2++e7p78/Pv//48P/n5/+f3398/3Td4+vP75y4tqRbQfWzpnZUV6eHpUVE1CYHF6dG1+ZFZMVGxAb5MYQFRYUFugbGRIQ5OMR4OUW4ucZ7OsR6O3m7WLvamdha2ZgYaSjq66kJCulJCsJTBiaoAQvDUzCSnJSALwyUl2l7+osAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/72dc6fec0756dfdbcd38654515a1ffa8/50512/slide-068.webp" alt="Slide n&#xB0;068" width="163" height="102" layout="responsive" srcset="/static/72dc6fec0756dfdbcd38654515a1ffa8/50512/slide-068.webp 163w,
/static/72dc6fec0756dfdbcd38654515a1ffa8/aeba0/slide-068.webp 325w,
/static/72dc6fec0756dfdbcd38654515a1ffa8/001d9/slide-068.webp 650w,
/static/72dc6fec0756dfdbcd38654515a1ffa8/97fd0/slide-068.webp 975w,
/static/72dc6fec0756dfdbcd38654515a1ffa8/3cea3/slide-068.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/72dc6fec0756dfdbcd38654515a1ffa8/19bd1/slide-068.png" alt="Slide n&#xB0;068" width="163" height="102" layout="responsive" srcset="/static/72dc6fec0756dfdbcd38654515a1ffa8/19bd1/slide-068.png 163w,
/static/72dc6fec0756dfdbcd38654515a1ffa8/d3bcb/slide-068.png 325w,
/static/72dc6fec0756dfdbcd38654515a1ffa8/dbb61/slide-068.png 650w,
/static/72dc6fec0756dfdbcd38654515a1ffa8/6b691/slide-068.png 975w,
/static/72dc6fec0756dfdbcd38654515a1ffa8/e11df/slide-068.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/72dc6fec0756dfdbcd38654515a1ffa8/dbb61/slide-068.png" alt="Slide n&#xB0;068" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Au bout d&apos;un moment, la question que tout le monde se pose : est-ce qu&apos;un h&#xE9;bergement dans <em>Le Cloud</em> co&#xFB;te moins cher qu&apos;un h&#xE9;bergement on-prem ?</p>
<p>Et bien, <em>&#xE7;a d&#xE9;pend</em>. Si vos machines <em>on-prem</em> &#xE9;taient sous-utilis&#xE9;es et que vous faites quelques optimisations sur votre nouvel h&#xE9;bergement, peut-&#xEA;tre. Si vos machines <em>on-prem</em> &#xE9;taient utilis&#xE9;es &#xE0; 97% et que vous les aviez d&#xE9;j&#xE0; amorties&#x2026; Probablement pas tellement.</p>
<p>Cela dit, le co&#xFB;t des machines n&apos;est pas le seul &#xE0; prendre en compte. Et, selon vos besoins business, l&apos;&#xE9;lasticit&#xE9; du <em>Cloud</em> peut &#xEA;tre un avantage certain, au-del&#xE0; du co&#xFB;t.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/e54cd1f9313ee99e9df7fe3788f98eb6/e11df/slide-069.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAC/0lEQVQozw2QW2/TZgCGfUPS5tD48Pkcf7ZrO1/sOLETx3GcQ5vSZhmUgtq1HCsalVKVqKEVhQ0QSDshrWirRmGlaF3QtAlNG9JuuJi0iatJu9gP2N+ZpUfv3fvq1YNNNZthELaCoF0PamXP9wKIAsEIRMPndZ/XfE6rMqpHy2UguxQsUVKJlKK0gWRjG2vDX0++f//7L3/+9ubt6IdXB8/v3ttfvf38wvbJ+cGrc7dentk8mls/nL5+0Lr6df3SV7XlJ9WlzyuLn9kLn2JmYXqwtvX68Nnf797+98/7f/9698ebH4++PR4+HvU/Hl3be31xd7S8fXx+42Bu42im/6y9+k398tPw4pf97X1MN8q67oRO8MXezk/HL35+eXhysP/k/r29we3NG8MzKzuzizu9xUF3YbM5PwjP3vJ7m6VOv/HRo+GD7zAo5dKJBKQpmWWLyHLypmtaeT2vq0YElDRBVGFWVbIwy4oCJ/G8TAPe621N9V9gORVR6TSDEwCnNKhYuq5LkiwbsmpCJS8rSFHzdr7gICSxrCKp0aLIw3B+eHbrGIOCNHYqNpGM+jhPUghKpqbldISMwqRmKaoZlQPHrTslmaVhVlFkXRSUmaU7K7sjzEQlM4dqFa8dhB90ZnpT06HrVAq2jSwL2QVkRTQrXuA4Cgs4gphIpgDFnLu0u/7JCPPKjZJVLBfdRrUWen4nCLpBdXG2M396znP9dtntVqwL062FqVaANIWlaYJkALuwdHN9+BTTFIRncJoEDAUEmtFEwchmTSgWJ6EhSdVIHMuYEl+AvCHwPGA4mmUIstdbfvj4EON4JZlIkRkKEEz0S2R5mRMgy0k0zRG4QJF0Boc0ECmCJQiQwSmcBATV8sOb19YxM1fMa+akGmlya27j8mx348PelbnuWvf0aqex0vSvtmtX2v5SvdyxUUnOWqrsW1a1YBdyJhaPnUrE4+OxWCIemxgfI1MJZiJFpRIcnpnkaJUFGkcrDADpZCYxlh6PE6kkR2Z4Ek8nk/8D8Z+qxYBXSSAAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/e54cd1f9313ee99e9df7fe3788f98eb6/50512/slide-069.webp" alt="Slide n&#xB0;069" width="163" height="102" layout="responsive" srcset="/static/e54cd1f9313ee99e9df7fe3788f98eb6/50512/slide-069.webp 163w,
/static/e54cd1f9313ee99e9df7fe3788f98eb6/aeba0/slide-069.webp 325w,
/static/e54cd1f9313ee99e9df7fe3788f98eb6/001d9/slide-069.webp 650w,
/static/e54cd1f9313ee99e9df7fe3788f98eb6/97fd0/slide-069.webp 975w,
/static/e54cd1f9313ee99e9df7fe3788f98eb6/3cea3/slide-069.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/e54cd1f9313ee99e9df7fe3788f98eb6/19bd1/slide-069.png" alt="Slide n&#xB0;069" width="163" height="102" layout="responsive" srcset="/static/e54cd1f9313ee99e9df7fe3788f98eb6/19bd1/slide-069.png 163w,
/static/e54cd1f9313ee99e9df7fe3788f98eb6/d3bcb/slide-069.png 325w,
/static/e54cd1f9313ee99e9df7fe3788f98eb6/dbb61/slide-069.png 650w,
/static/e54cd1f9313ee99e9df7fe3788f98eb6/6b691/slide-069.png 975w,
/static/e54cd1f9313ee99e9df7fe3788f98eb6/e11df/slide-069.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/e54cd1f9313ee99e9df7fe3788f98eb6/dbb61/slide-069.png" alt="Slide n&#xB0;069" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Ca fait une grosse demi-heure que je parle de notre migration dans <em>Le Cloud</em>, de comment nous nous y sommes pris&#x2026; Alors, au final, quel r&#xE9;sultat ?</p>
<p>Et bien, <strong>on a fait un truc qui marche</strong> ! &#xC7;a nous a pris un moment, nous avons parfois eu du mal, je pourrais en parler pendant des heures&#x2026; Mais &#xE7;a marche et &#xE7;a r&#xE9;pond &#xE0; nos besoins !</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/345d11273dbee9c23b4329fb9677ab9f/e11df/slide-070.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABzElEQVQoz6WRTVPaQBjHJQnOcIcZBjhwYHDSAfXgh/Bj+Ql608HasZ5aueBZpbSOVUcJL+ZNScJmyYsTUKrWpESTFDdQGXRy83f459nN/mafPJmZeQ8EQYTD4dkXiBHjOhKJoAyPXmM4HiBHo9FcLkeSZN4nl8/PZ7PZTCaDcmFxkSQ/oFxayM8lY7P+8dArORTy1/F4fG2tsP5p4+u37S9bW6Wdne+Vyt7+/m65fHzw42OpvFzYXSkdbH7eCGHYWzmdTjdrNADwyXUdxx2+4P3zs2kOVxXvzB6KlxfooybW/0cymVRVVZahKEpCq8VIkFGvG0ATurdCWwaXfA+07rpXFEUFyKlUSmpLPH+B4DiWFSQOXgmaQUsdQQLN83O5o6IWWJbFR5N7KwuiyHE8hNAwDF3ToAx01AtoK4rS6Si6riOZZpgAGbVtdLs3/f6T4wyD8DwPJRMoJxKJ/u9b6+/g7v6P/fhoWdbAtlGapvlgPtiDgev6U6RpOlg2TWt8g+O6mqbf925URQWyDGTYM4zx/TzPBwwsFosdHv6q1+sn1Gm1WqVQ9fOofnJardWajQZaoU00rWKxiE3/5wn4FOgERuDYuMCw6f1p5RkYNDzZ/IDuhgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/345d11273dbee9c23b4329fb9677ab9f/50512/slide-070.webp" alt="Slide n&#xB0;070" width="163" height="102" layout="responsive" srcset="/static/345d11273dbee9c23b4329fb9677ab9f/50512/slide-070.webp 163w,
/static/345d11273dbee9c23b4329fb9677ab9f/aeba0/slide-070.webp 325w,
/static/345d11273dbee9c23b4329fb9677ab9f/001d9/slide-070.webp 650w,
/static/345d11273dbee9c23b4329fb9677ab9f/97fd0/slide-070.webp 975w,
/static/345d11273dbee9c23b4329fb9677ab9f/3cea3/slide-070.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/345d11273dbee9c23b4329fb9677ab9f/19bd1/slide-070.png" alt="Slide n&#xB0;070" width="163" height="102" layout="responsive" srcset="/static/345d11273dbee9c23b4329fb9677ab9f/19bd1/slide-070.png 163w,
/static/345d11273dbee9c23b4329fb9677ab9f/d3bcb/slide-070.png 325w,
/static/345d11273dbee9c23b4329fb9677ab9f/dbb61/slide-070.png 650w,
/static/345d11273dbee9c23b4329fb9677ab9f/6b691/slide-070.png 975w,
/static/345d11273dbee9c23b4329fb9677ab9f/e11df/slide-070.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/345d11273dbee9c23b4329fb9677ab9f/dbb61/slide-070.png" alt="Slide n&#xB0;070" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Tout d&apos;abord, un gain que nous n&apos;avions pas r&#xE9;ellement anticip&#xE9;, qui n&apos;est pas la raison de notre migration, mais qui est &#xE9;vident quand on y pense apr&#xE8;s-coup.</p>
<p>Comme l&apos;a not&#xE9; Olivier, notre CTO adjoint, depuis que nos d&#xE9;veloppeurs sont maitres de leur infrastructure, une des premi&#xE8;res choses qu&apos;ils font sur leurs projets, c&apos;est les d&#xE9;ployer. On ne lutte plus pour mettre en prod apr&#xE8;s trois mois de d&#xE9;veloppement ! &#xC0; la place, trois jours apr&#xE8;s la cr&#xE9;ation d&apos;un projet et alors que sa route de statut est fonctionnelle, il est d&#xE9;j&#xE0; d&#xE9;ploy&#xE9;e en production -- &#xE9;ventuellement, <em>cach&#xE9;e</em>. &#xC0; chaque fois qu&apos;un nouveau d&#xE9;veloppement est effectu&#xE9;, &#xE0; chaque pull-request merg&#xE9;e, &#xE7;a part imm&#xE9;diatement en production.</p>
<p>Donc, plus d&apos;effet <em>&quot;il faut d&#xE9;ployer en production&quot;</em> apr&#xE8;s des mois d&apos;efforts : la mise en production est non-&#xE9;v&#xE9;nement.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/abbed9d2139ac041d4665f53500d6b22/e11df/slide-071.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABh0lEQVQoz6VSy27CQAwMFNTAlVO5pxKlID6LCz8A/UgOvAKkQUilpe9ASbK7ftQbVBBIVQ8dOdaM47E30TrOf5DP5y8yFAqFXC5XLBb3lcIPpPir+apabbVatdpNvV6vVCrNZtPzPOGNRsPzrm9vG1KUiZencF1XFjjL5XI8Hk8yjEajPfd9fzgc9vt90cInpxgMBuv1ut1uO8wMAHwE8V/QWkvu9XpOJgwKZAYSmAQgkwcAniFNU3F1u11rNgYIDZqYiCUjGjoD4oHJo5Q6bCYZTahJR/bQKiJQ2fEpS/LKSttAuCdaH83aAIgBxcaMyZMlkLJ0i1QRJs9CyHzZo1myUyo5mNHIamlSG5Sv3a0QEpvjJ2mFTYDpSzblHU1CBJC+KpUefxhAzPDK9MW4ZXhj3DF82KDYStoxxmyemVKmLeOn1ltrvus5j6uH6XQ8m078yWg+8+ezaXg/X4TB4j7YE8lZBGE4D0WGgTRH0Wen03FKpZIr4br21rhCpFA+j/J5RSA39xuuEv8gAWjxawAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/abbed9d2139ac041d4665f53500d6b22/50512/slide-071.webp" alt="Slide n&#xB0;071" width="163" height="102" layout="responsive" srcset="/static/abbed9d2139ac041d4665f53500d6b22/50512/slide-071.webp 163w,
/static/abbed9d2139ac041d4665f53500d6b22/aeba0/slide-071.webp 325w,
/static/abbed9d2139ac041d4665f53500d6b22/001d9/slide-071.webp 650w,
/static/abbed9d2139ac041d4665f53500d6b22/97fd0/slide-071.webp 975w,
/static/abbed9d2139ac041d4665f53500d6b22/3cea3/slide-071.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/abbed9d2139ac041d4665f53500d6b22/19bd1/slide-071.png" alt="Slide n&#xB0;071" width="163" height="102" layout="responsive" srcset="/static/abbed9d2139ac041d4665f53500d6b22/19bd1/slide-071.png 163w,
/static/abbed9d2139ac041d4665f53500d6b22/d3bcb/slide-071.png 325w,
/static/abbed9d2139ac041d4665f53500d6b22/dbb61/slide-071.png 650w,
/static/abbed9d2139ac041d4665f53500d6b22/6b691/slide-071.png 975w,
/static/abbed9d2139ac041d4665f53500d6b22/e11df/slide-071.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/abbed9d2139ac041d4665f53500d6b22/dbb61/slide-071.png" alt="Slide n&#xB0;071" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Pour ce qui est de l&apos;&#xE9;lasticit&#xE9;, qui &#xE9;tait la raison principale de notre migration dans <em>Le Cloud</em> : et bien, <strong>objectif atteint</strong> !</p>
<p>On voit ici le nombre de pods Kubernetes d&apos;une de nos nombreuses applications. La nuit, en p&#xE9;riode de faible charge, une dizaine de pods tournent. Le soir, en plein pic de charge, des centaines. Et &#xE7;a marche nickel, &#xE7;a scale sans probl&#xE8;me en fonction de la charge.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/65ea19df55ee9f5849d7c5a7c0d58b68/e11df/slide-072.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABXklEQVQoz62Rz07CQBDGt4XCiQPcuNADBMJbyJmnMDEGEu2rSKImtuXIGxAJV97FgwelKG23+2d2nV1AYuRi8Jfp7NfpfrOzKSHnUCqVKpWK53mYy+VytVrdCc+yE1hxXfeEudFo9Pv9drvd6XRqtRrqXq+HxWazicL3/VbL73a79XodNzuOQ/6N5XL5bFlYfutvFgfm8/lqtRoOh0RrDQD6gFSaHt9OI4TAHAQBKUAzxiXAOqXYhXGBQisFFlyYkFKCAMAVK/hwztE8Go2MmXLTaZ0xUKrg8pNiL5UzHEILUC9JppTGSpIxc6xUtDDm8XhMqNRJSlPK11uaFfx9Sz9yhnmTFQlGaiJn4m1LMSgTr5t8k+Zovry6NnfGScTPeyqbwQbClbZzaA4alC7spDe3Abl/eJzcTcKnMI7jabwHRRhFUysim82naC/CMJzNZoPBxXn/2f0LjnPU6P0CsDJwdMRsCoQAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/65ea19df55ee9f5849d7c5a7c0d58b68/50512/slide-072.webp" alt="Slide n&#xB0;072" width="163" height="102" layout="responsive" srcset="/static/65ea19df55ee9f5849d7c5a7c0d58b68/50512/slide-072.webp 163w,
/static/65ea19df55ee9f5849d7c5a7c0d58b68/aeba0/slide-072.webp 325w,
/static/65ea19df55ee9f5849d7c5a7c0d58b68/001d9/slide-072.webp 650w,
/static/65ea19df55ee9f5849d7c5a7c0d58b68/97fd0/slide-072.webp 975w,
/static/65ea19df55ee9f5849d7c5a7c0d58b68/3cea3/slide-072.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/65ea19df55ee9f5849d7c5a7c0d58b68/19bd1/slide-072.png" alt="Slide n&#xB0;072" width="163" height="102" layout="responsive" srcset="/static/65ea19df55ee9f5849d7c5a7c0d58b68/19bd1/slide-072.png 163w,
/static/65ea19df55ee9f5849d7c5a7c0d58b68/d3bcb/slide-072.png 325w,
/static/65ea19df55ee9f5849d7c5a7c0d58b68/dbb61/slide-072.png 650w,
/static/65ea19df55ee9f5849d7c5a7c0d58b68/6b691/slide-072.png 975w,
/static/65ea19df55ee9f5849d7c5a7c0d58b68/e11df/slide-072.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/65ea19df55ee9f5849d7c5a7c0d58b68/dbb61/slide-072.png" alt="Slide n&#xB0;072" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>On retrouve cette &#xE9;lasticit&#xE9; au niveau des instances EC2, les machines de notre cluster Kubernetes, les machines que nous payons chez AWS : tout au long de la journ&#xE9;e, pour r&#xE9;pondre au trafic et &#xE0; la charge, des machines se lancent ou sont &#xE9;teintes.</p>
<p>Nous ne payons que pour les machines dont nous avons besoin, &#xE0; tout instant. Et plus pour <em>&quot;toutes les machines&quot;</em> toute la journ&#xE9;e. En cas de pic de trafic, nous aurons plus de serveurs pendant quelques minutes ou heures, sans les payer plus longtemps.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/21985ae865723167a42961b824a70301/e11df/slide-073.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABQUlEQVQoz4WS2XKDMAxFzWpsjBcMLg90e8n0JST9gaT9/5/qFYa0JOlkOKORbV1LFmJC1ELIqnqE+EUQtZA168PQ+j7i2u6Wy+lM8F3wfejCEMLAsNgeXwM9YpCDZCtd/wSYMU6pRjV6Qc2syxpHSo/jC/LAb7RpGgI3kljWKk2zHB+RpbODndmmnHPnvJR13InA1caiFhJjnedFpChKkOUFotEY13ohJd2+BgDEL2IUg7NIkqSAkqQZ3mKtK0sOP5sFV+KuH9jr2/t+OhD7aZoOx+MnNFpbY12+1dzJjIZpbYyx0MC2rR/HZ9i/r7giL0pt3PxmqRhLUC1jDEU610qxaQ8lj/bumxEItaP2B84rCOn6m2ovtcAu4jgJp9PX+fxtnUfhsP+B5sexw08mMa+E7/rd7gOzyrmIo/4IGmzwAyedJdmEis6DAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/21985ae865723167a42961b824a70301/50512/slide-073.webp" alt="Slide n&#xB0;073" width="163" height="102" layout="responsive" srcset="/static/21985ae865723167a42961b824a70301/50512/slide-073.webp 163w,
/static/21985ae865723167a42961b824a70301/aeba0/slide-073.webp 325w,
/static/21985ae865723167a42961b824a70301/001d9/slide-073.webp 650w,
/static/21985ae865723167a42961b824a70301/97fd0/slide-073.webp 975w,
/static/21985ae865723167a42961b824a70301/3cea3/slide-073.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/21985ae865723167a42961b824a70301/19bd1/slide-073.png" alt="Slide n&#xB0;073" width="163" height="102" layout="responsive" srcset="/static/21985ae865723167a42961b824a70301/19bd1/slide-073.png 163w,
/static/21985ae865723167a42961b824a70301/d3bcb/slide-073.png 325w,
/static/21985ae865723167a42961b824a70301/dbb61/slide-073.png 650w,
/static/21985ae865723167a42961b824a70301/6b691/slide-073.png 975w,
/static/21985ae865723167a42961b824a70301/e11df/slide-073.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/21985ae865723167a42961b824a70301/dbb61/slide-073.png" alt="Slide n&#xB0;073" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>En conclusion, donc ?</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/4e94a217644aeb7426aa0e25831a62da/e11df/slide-074.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACrklEQVQozx1SSVLbQBTVjmDAg2xjW9bYmgc02fIAWJJBsuURYsA2YCBJFdkQUqGSDWGbRRapyiLnyDp3yB1yl3zoxa/u+tN7rx9WIelUKpXL4bVareMH+UKxVC4Xi0VN11zXzWazm1tbW5sQ0jRFcSybhtfGBpTxPI/Fw+NCIc/QjOd5g9FI1XReEAxjp9FozGYzhmVzOJ7JZAiCcBxHUeRKuVQliNns5OnxEbt6e9tutXVdlxVZU1VIw05FlhVFgXGWZeE4vvZqrVwpp9bXAUTp5UTd8ObqAkuSfqPhxXHP70aO47Za7Y7vK4pq6Lpt24C/Wq1KokBWCcTzddc1NIWiyHqtNp4eYcfn190wPIwiPwx7vZ7v+3Ec+0HQbDYBx3apVMgXSBJ6iWqVgDaKJGmamS+WXx4esNO7z57rJoNBt3sQdmFOGASBZdkO7LUsmmELheflJElRNAuCIYRYJJyt3nz98Qsbfnx0bas/GB5G8WHcj+JeEPj+/m7g71umyXJIkGQRlNBNzXRsy4QrLyrvn779/PsPOzxdhoHf6/eiKEoSQDDo9+LpdNLv9xt1oOa19zogRN1rSIoqCAj487w4v737/vsPFrY8xAuSKILCkiQBT90wvEYTdHYcW9c1hHjDMEzTZGj6mTBFZjJp11AuRiEWemY+X2AZhqIZEihyiEMIKswdw7FNUUCZdJrjOBAMfohl2SpRAZfc338YDRKsYyvFCsnxoiDKgigJgAxx28Vtgqi8aAtSkTAaTJJOp8GLYLVcLhcddIdJggWe6UfJ5erqZnVxuZwvTmfLs5PxcLC32665buB3JqPh/OT16nyxOl8eTcbTyXgxP3t3c/3p/g7Dc1mWZXQVyMqyKAoC/xJ4olLJ4zj8LeJYHiFI6aqyA9Z5tqGkqYqhqf8BJrqSZ6V/t3IAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/4e94a217644aeb7426aa0e25831a62da/50512/slide-074.webp" alt="Slide n&#xB0;074" width="163" height="102" layout="responsive" srcset="/static/4e94a217644aeb7426aa0e25831a62da/50512/slide-074.webp 163w,
/static/4e94a217644aeb7426aa0e25831a62da/aeba0/slide-074.webp 325w,
/static/4e94a217644aeb7426aa0e25831a62da/001d9/slide-074.webp 650w,
/static/4e94a217644aeb7426aa0e25831a62da/97fd0/slide-074.webp 975w,
/static/4e94a217644aeb7426aa0e25831a62da/3cea3/slide-074.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/4e94a217644aeb7426aa0e25831a62da/19bd1/slide-074.png" alt="Slide n&#xB0;074" width="163" height="102" layout="responsive" srcset="/static/4e94a217644aeb7426aa0e25831a62da/19bd1/slide-074.png 163w,
/static/4e94a217644aeb7426aa0e25831a62da/d3bcb/slide-074.png 325w,
/static/4e94a217644aeb7426aa0e25831a62da/dbb61/slide-074.png 650w,
/static/4e94a217644aeb7426aa0e25831a62da/6b691/slide-074.png 975w,
/static/4e94a217644aeb7426aa0e25831a62da/e11df/slide-074.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/4e94a217644aeb7426aa0e25831a62da/dbb61/slide-074.png" alt="Slide n&#xB0;074" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Migrer dans <em>Le Cloud</em>, pour nous, &#xE7;a r&#xE9;pond &#xE0; une volont&#xE9;, &#xE0; un besoin. De l&apos;entreprise.</p>
<p>&#xC7;a repr&#xE9;sente des centaines (milliers m&#xEA;me) de jours de travail, qui impliquent tout le monde. Cela a donc un impact sur les produits et sur les roadmaps. Et n&apos;est pas possible sans la volont&#xE9; ni le soutien du management.</p>
<p>Au risque de me r&#xE9;p&#xEA;ter : <strong>migrer vers <em>Le Cloud</em> n&apos;est pas un projet technique</strong> ! Migrer vers <em>Le Cloud</em> est un <strong>projet d&apos;entreprise</strong>, qui r&#xE9;pond &#xE0; un <strong>besoin business</strong>.</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/bd2b2df84abf84bd8308e86e6b9d6216/e11df/slide-075.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAADJElEQVQozwEZA+b8AAgJFg4PIRQWMRkaOh0hQR8jQxgaMxgdNCUvTC41UCszTRIVJwcHFQcHEwYHEwgIHSUoPkBHWzg6TC4rNwAaHkUrLmI0OHpCSJZOWLBKU6JDTJJWU5iGeL96itJyhMwtNFoHBxoNDyklLFohJmBxe7qtv/maodiLirUAFBc/IyZZODx3MjVwOj98OT12QEaEVUB0ejtmcVeLX26sHyI8DAwlEhQ5Jy1kY3G2p7fppbXpo7XroK3hABgcRI6Yv8/a9VZbjiorXTExWy8yWTs0U2dfh1M7WUpaiSMlRElSiD9IhCUpZHSAzLTF9bXG86Ky6Zam4ABnbZjDyunb5PuJkbYhIEgtL1AuJDszGCdOK0V/NFduTG0xNldYYZZodrc+Rok0No95htWuwPKFm99jer0AcnSZi4+yrLXXs7/jOT1hGx03fCI6ixUqcSJCo2GPnnikXWGZZXW8T1iiQ0ySNj6GbnvKlaTcbpDVWHm9AFFSc5un2cHR9cPV/HB3oG5id7qCmZMqUl9Np1FYvFBOo1JYoFxsv0ZPnz9KlXB8uKy455CYzVdyt1JtsABbZJShr+27y/jM3v+PnMxoYIVNLz9LL1Q1OY04OJZNTbdGTaRib7mIk9B5hMK0t+DS0vWlqNVPWZM/RnEAJChDUlmAanSXa3SXd4KjYWuPJhciKRkkKyxTLzFmODh5SU+IbnefgomqaG6Ob2+IgH+XbGuCNTdWMjVNAAAABQUECxISHxgaLCgpOEFCUS4tOD44Pjw6QjY2Qzw9TTg5S0JEU1NTXzM1QiUlMSwrNiQiKxkYJSosQAAGBg0GBgsHBw0TFCMcHTAlJjYjJDI3NT8tKzYzMj1AQFI2NkwjJTkzNUMhIzAQEBkUEhsLBwwREBklJjUAFBQiCAkYCAkYCAkaR05zXmOLPD1kQkRoWVyAP0FsWF2IY2eJcXaTYGN8TE1iPT5QPj9QOjlIIyItFBEYAAkJEwUGEQUGEAcIFCIoQBoePg8RKxcaNCYsRxYZOCkwTSYpPEBHWDtAUTo8TTU2RDM0QDIyPRoaIQYFCD9wDX2B6OL3AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/bd2b2df84abf84bd8308e86e6b9d6216/50512/slide-075.webp" alt="Slide n&#xB0;075" width="163" height="102" layout="responsive" srcset="/static/bd2b2df84abf84bd8308e86e6b9d6216/50512/slide-075.webp 163w,
/static/bd2b2df84abf84bd8308e86e6b9d6216/aeba0/slide-075.webp 325w,
/static/bd2b2df84abf84bd8308e86e6b9d6216/001d9/slide-075.webp 650w,
/static/bd2b2df84abf84bd8308e86e6b9d6216/97fd0/slide-075.webp 975w,
/static/bd2b2df84abf84bd8308e86e6b9d6216/3cea3/slide-075.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/bd2b2df84abf84bd8308e86e6b9d6216/19bd1/slide-075.png" alt="Slide n&#xB0;075" width="163" height="102" layout="responsive" srcset="/static/bd2b2df84abf84bd8308e86e6b9d6216/19bd1/slide-075.png 163w,
/static/bd2b2df84abf84bd8308e86e6b9d6216/d3bcb/slide-075.png 325w,
/static/bd2b2df84abf84bd8308e86e6b9d6216/dbb61/slide-075.png 650w,
/static/bd2b2df84abf84bd8308e86e6b9d6216/6b691/slide-075.png 975w,
/static/bd2b2df84abf84bd8308e86e6b9d6216/e11df/slide-075.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/bd2b2df84abf84bd8308e86e6b9d6216/dbb61/slide-075.png" alt="Slide n&#xB0;075" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Quand vous lisez des articles sur Internet o&#xF9; quelqu&apos;un vous explique tr&#xE8;s s&#xE9;rieusement qu&apos;il a migr&#xE9; dans <em>Le Cloud</em> en <em>cinq minutes</em> et que son nouvel h&#xE9;bergement co&#xFB;te <em>cinq dollars</em> par mois&#x2026; Heu. Ces gens essayent de vous en-fu-mer. Mais &#xE0; fond.</p>
<p>Moi aussi, je peux d&#xE9;ployer une application dans <em>Le Cloud</em> en <em>cinq minutes</em>. En deux minutes et demie &#xE0; trois minutes, m&#xEA;me, montre en main. J&apos;ai juste &#xE0; cliquer dans Jenkins et &#xE0; attendre un petit peu. Mais j&apos;ai eu l&apos;honn&#xEA;tet&#xE9; de vous parler des mois, des nombreux mois, de travail qui ont pr&#xE9;c&#xE9;d&#xE9;, pour mettre en place tout ce qui est en-dessous de ce simple bouton.</p>
<p>Pour la partie <em>cinq dollars</em> par mois, j&apos;ai plus de mal&#x2026; &#xC7;a inclut les backups, le monitoring, le logging, l&apos;alerting, l&apos;outillage, l&apos;&#xE9;criture de l&apos;infrastructure, la redondance, l&apos;auto-scaling et les personnes qui savent g&#xE9;rer tout &#xE7;a, vous croyez ?</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/f1093a4af46c74a9026c88b979f1445b/e11df/slide-076.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAC+ElEQVQozx1Q62/bdBT1B9bEbZqHEzvxM3FqJ33EsR3bie04qauEVHUezqMJa9WkoW1IS1krSjvCxDahMrGtwL6w8R34gFQJqAT/AaoEfxU/cXR0P1zde889Bxru74/G+3t7ew93d3uDHbf3Qb29XWt2N5yOVWsbVdeodoz3e2YNsG85O7Y7FlV9ZYVfDAahv+/vr1+8eHVzA+rTr64ff/n8Yvb09LMvJmez8ennw49ng8ll9+iyN7kaHD/pTWft/bPaZs3tuWwmA7398V3BKJTWy0bRtEqWpqm6oZtFUzcM07JK9np6dY1KJNnUMr3E+QO+UMBHU3haEgmOg/64+/30k5PLy4uz80fT44+OJkeHR4cHhwej8Yc7w3F/d9TfO9jqPCzYtbxh5uSsKGZwIoYm4mg8Ab1990O31z0+mQ5Hw5bb6na7lUql/D+sUtm0ymbJFnMaFostcSzPJxE04oVhhMDJ1VXo5uY1uFZv1Lccp1KtFvSCLMuiJAJks2ImKwqiBL4OISFAgsR9/sX35h6gDBNd4qDv3ny/bttAc6teb3faRauoqJqiqllJluRcTlGTHB8Ai2EkiITQaGTO45nzeojllehyGnr56iWY2e5vt9tup9tpNJtO3VFVDQim19aSPB9GI2E0jMUwmqHghXkPDHu8nrisJXQTen79dd7Q7Up1RRASqRSIlIizGMVEaYZMJIBVFENxEmfZOEESnnkY8IFnDhggMwL06dWM5VOWbSu6rhmmbllxPhXGCRTHMYIIhRGKJmlAhiIoYjHghxdgeB6OMPFYOg0dPzoXsoLTcIpFU81rgiQnU2kEi/oRZDEQ8M7DICSaoVk2wXGsPxj0+hZAkxIkzixD9//8e/vb3d2ff/16e/vTz79cPHmW33SXjI3GYJDXZEWRT6bj6WT0+ptnb769fnx1rujGck7h8vrqxiZUb7lbDXfTaTqN1vag32y1iCQfJOOCJNI0wTBUQctJ4pqeV+z1omlowANKkkEM84Uj/wHRJ7ZsZ+nspwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/f1093a4af46c74a9026c88b979f1445b/50512/slide-076.webp" alt="Slide n&#xB0;076" width="163" height="102" layout="responsive" srcset="/static/f1093a4af46c74a9026c88b979f1445b/50512/slide-076.webp 163w,
/static/f1093a4af46c74a9026c88b979f1445b/aeba0/slide-076.webp 325w,
/static/f1093a4af46c74a9026c88b979f1445b/001d9/slide-076.webp 650w,
/static/f1093a4af46c74a9026c88b979f1445b/97fd0/slide-076.webp 975w,
/static/f1093a4af46c74a9026c88b979f1445b/3cea3/slide-076.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/f1093a4af46c74a9026c88b979f1445b/19bd1/slide-076.png" alt="Slide n&#xB0;076" width="163" height="102" layout="responsive" srcset="/static/f1093a4af46c74a9026c88b979f1445b/19bd1/slide-076.png 163w,
/static/f1093a4af46c74a9026c88b979f1445b/d3bcb/slide-076.png 325w,
/static/f1093a4af46c74a9026c88b979f1445b/dbb61/slide-076.png 650w,
/static/f1093a4af46c74a9026c88b979f1445b/6b691/slide-076.png 975w,
/static/f1093a4af46c74a9026c88b979f1445b/e11df/slide-076.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/f1093a4af46c74a9026c88b979f1445b/dbb61/slide-076.png" alt="Slide n&#xB0;076" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Techniquement, migrer dans <em>Le Cloud</em>, pour nous&#x2026;</p>
<p>Kubernetes, c&apos;est un super outil. Riche, tr&#xE8;s riche. Mais aussi tr&#xE8;s complexe. Pour nous, qui avons une &#xE9;quipe de sysadmins, c&apos;est un outil adapt&#xE9;. Pour une entreprise plus petite ou sans comp&#xE9;tences ou personnes d&#xE9;di&#xE9;es, &#xE7;a se discute un peu plus, je pense.</p>
<p>Les services manag&#xE9;s, c&apos;est vraiment top. &#xC7;a nous fait autant de travail en moins. Au lieu de d&#xE9;penser du temps g&#xE9;rer MySQL, nous pouvons nous concentrer sur ce qui compte : apporter de la valeur &#xE0; nos coll&#xE8;gues et &#xE0; notre entreprise. L&apos;<em>infrastructure as Code</em>, c&apos;est g&#xE9;nial. Pouvoir d&#xE9;ployer la m&#xEA;me infra dans plusieurs environnements, ne rien avoir de fait &#xE0; la main sur des serveurs, &#xE7;a change la vie.</p>
<p>Et surtout, il faut savoir avancer petit &#xE0; petit, faire des compromis (m&#xEA;me si c&apos;est parfois difficile), am&#xE9;liorer et progresser. Faire <em>parfait</em> du premier coup&#x2026; M&#xEA;me plus en r&#xEA;ve :-D</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/7d7d7a16661fc26b710a3bbbc31737e5/e11df/slide-077.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABc0lEQVQoz51Ty27CMBCk0D8pV24QhBBSEriXT+BAb/RP4Ld6aiFIvVTqhQsCEVQgJLZ37bhrJ4HSqg915GzsyY531klKpUtc/Rkmu1wu57N/oNFwRqP7wWAwHN7d9vvtdttxnGazWa/XGxbZ8iNarVatVjPi8XistQYApZSUkmKapjRJkiSO4yg6MsaJIdo+SVFKyp8FAVkuTSYTWiCi/gKu1Oti+fyyYBxOJO1OcT6fn8VUOb0EkQfAtyjeHWJEU81yWlpxkIkz24JsFzJVxC0XqFIrO0Na28EPlSmfq3TNxB6kTk3NfHyu/I3tHaqQiRUHbs9Q5a381jOVILchSLK94bjksOK4FrAFPEq1E0ibPAVB5STOeiZL0r4UqhYCbpgIBWwEhsKI1xxMpF60fpjOriuV/MD2x4ihEBK4BIZmJIix4AkIhpjQEjLekJT/OJ0a2zfVatfvdjod13W9DMXd83yfLjvxXN8v2F6vR18e/Qbv8aUDLLbVEw0AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/7d7d7a16661fc26b710a3bbbc31737e5/50512/slide-077.webp" alt="Slide n&#xB0;077" width="163" height="102" layout="responsive" srcset="/static/7d7d7a16661fc26b710a3bbbc31737e5/50512/slide-077.webp 163w,
/static/7d7d7a16661fc26b710a3bbbc31737e5/aeba0/slide-077.webp 325w,
/static/7d7d7a16661fc26b710a3bbbc31737e5/001d9/slide-077.webp 650w,
/static/7d7d7a16661fc26b710a3bbbc31737e5/97fd0/slide-077.webp 975w,
/static/7d7d7a16661fc26b710a3bbbc31737e5/3cea3/slide-077.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/7d7d7a16661fc26b710a3bbbc31737e5/19bd1/slide-077.png" alt="Slide n&#xB0;077" width="163" height="102" layout="responsive" srcset="/static/7d7d7a16661fc26b710a3bbbc31737e5/19bd1/slide-077.png 163w,
/static/7d7d7a16661fc26b710a3bbbc31737e5/d3bcb/slide-077.png 325w,
/static/7d7d7a16661fc26b710a3bbbc31737e5/dbb61/slide-077.png 650w,
/static/7d7d7a16661fc26b710a3bbbc31737e5/6b691/slide-077.png 975w,
/static/7d7d7a16661fc26b710a3bbbc31737e5/e11df/slide-077.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/7d7d7a16661fc26b710a3bbbc31737e5/dbb61/slide-077.png" alt="Slide n&#xB0;077" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Juste parce que c&apos;&#xE9;tait tellement <em>magique</em> ce jour l&#xE0;, je ne peux pas m&apos;emp&#xEA;cher de partager de graphique. Il s&apos;agit du nombre de CPUs consomm&#xE9;s par une de nos applications.</p>
<p>En d&#xE9;but d&apos;apr&#xE8;s-midi, cette application consommait 6 CPU. &#xC0; 15h59, nous avons vid&#xE9; son cache, d&apos;un coup (nous avons chang&#xE9; de CDN)&#x2026;</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/d81d4ce0122c7aebcbf733d039a7fc90/e11df/slide-078.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABoUlEQVQoz51SS04jMRQMCTeBbXZMoiiKlEk4wHADQMAKLgLJXeYOSKwgdIRmAUICJD5pSEM+3W37PdtNtZ1kwqzQlJ6t8pOrXO12ofAVK99GvrtYLM7Yf6BSqRweHW3v7O7tH/za2qrX6+hUq9WNjR8owC+XUavVyuVyLu50OlmWEZHWRmMYY60FSdI0jpPpNBZComNcAcyM/ZdBgMiFbreLhW9ZFMYc0pjbh+er6wchadGEO+Z+v/9XHKfyfpD8uRvfPE5ZG+eTTYg+JvFokrDW3hrQjgdefHySxz67Cn+fPl1cfzy+Jt4eISOp2OSSr7GdeDn263vyEolBJMJ3AYXLbEOhxsSZ01j/Uf+c3HFiKZUiTawxuyuzIzZDQQNJ0qUw3gChlsX+ZNz23DoH0g5JR5LeFD9LWHAoKSKOtRkpwqbzICgtxIoI3rMfZS1OGxK/CTlUuR4FcahcpWqMO+r1VkvF2X8ex1PBSmmWTAKlKWVKlExIgeRFmFm4Jvaf93p57LX19Xar3Wg0ms3mTw9HWo625gTNBdlst/Hy8MA+AWEi/5yJmNnxAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/d81d4ce0122c7aebcbf733d039a7fc90/50512/slide-078.webp" alt="Slide n&#xB0;078" width="163" height="102" layout="responsive" srcset="/static/d81d4ce0122c7aebcbf733d039a7fc90/50512/slide-078.webp 163w,
/static/d81d4ce0122c7aebcbf733d039a7fc90/aeba0/slide-078.webp 325w,
/static/d81d4ce0122c7aebcbf733d039a7fc90/001d9/slide-078.webp 650w,
/static/d81d4ce0122c7aebcbf733d039a7fc90/97fd0/slide-078.webp 975w,
/static/d81d4ce0122c7aebcbf733d039a7fc90/3cea3/slide-078.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/d81d4ce0122c7aebcbf733d039a7fc90/19bd1/slide-078.png" alt="Slide n&#xB0;078" width="163" height="102" layout="responsive" srcset="/static/d81d4ce0122c7aebcbf733d039a7fc90/19bd1/slide-078.png 163w,
/static/d81d4ce0122c7aebcbf733d039a7fc90/d3bcb/slide-078.png 325w,
/static/d81d4ce0122c7aebcbf733d039a7fc90/dbb61/slide-078.png 650w,
/static/d81d4ce0122c7aebcbf733d039a7fc90/6b691/slide-078.png 975w,
/static/d81d4ce0122c7aebcbf733d039a7fc90/e11df/slide-078.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/d81d4ce0122c7aebcbf733d039a7fc90/dbb61/slide-078.png" alt="Slide n&#xB0;078" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>16 minutes apr&#xE8;s, l&apos;application consommait 282 CPUs.</p>
<p><strong>En 16 minutes</strong>, nous avons su <strong>multiplier par 47 le nombre de CPUs</strong> disponibles pour cette application.</p>
<p><em>On-prem</em>, la plateforme se serait instantan&#xE9;ment &#xE9;croul&#xE9;e (nous avions d&#xE9;j&#xE0; essay&#xE9; une manipulation de ce type, je parle d&apos;exp&#xE9;rience). Dans <em>Le Cloud</em> ? Et bien, nous avons suivi ce qu&apos;il se passait avec grand int&#xE9;r&#xEA;t&#x2026; Et pris des screenshots ^^</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/fa038b654f233fd98b02a152f2b1ab55/e11df/slide-079.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABH0lEQVQoz52RPW6EMBCFyVGyDS0NSQqEMFG25woUNNnzhNtEK+AWKdKliESxWvDaAzZ52IiFaPOjfRojz/h9MwYcZ62b/+nsdq5WHMfPu12aplmWJUkSBMG9ke/7d0bYPyyEFJ7bzWaEi6IYhqHve6WUfWqtu65rW875CQtFvRARwZ/n+QhXVYUEzHBJGn31qoK+Z7gsSzsZXa17wkyKa5Ba1VfwfO0JNprdf8A/TbZCVV4NY6z4Ba7KysLDJZj36kPQXNffJ5uvTWZ0p7Uae4yBt1VaCaXeuXzj8lN2ZE7F8le97vfI6qY5CHGQoiUJG4KTbIgaktgcpazFCYG0bo+AXyzseR5jURiGLGKTolVEERZ7ZCyeTqPt09Z1XbBfyT4GHeFARRAAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/fa038b654f233fd98b02a152f2b1ab55/50512/slide-079.webp" alt="Slide n&#xB0;079" width="163" height="102" layout="responsive" srcset="/static/fa038b654f233fd98b02a152f2b1ab55/50512/slide-079.webp 163w,
/static/fa038b654f233fd98b02a152f2b1ab55/aeba0/slide-079.webp 325w,
/static/fa038b654f233fd98b02a152f2b1ab55/001d9/slide-079.webp 650w,
/static/fa038b654f233fd98b02a152f2b1ab55/97fd0/slide-079.webp 975w,
/static/fa038b654f233fd98b02a152f2b1ab55/3cea3/slide-079.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/fa038b654f233fd98b02a152f2b1ab55/19bd1/slide-079.png" alt="Slide n&#xB0;079" width="163" height="102" layout="responsive" srcset="/static/fa038b654f233fd98b02a152f2b1ab55/19bd1/slide-079.png 163w,
/static/fa038b654f233fd98b02a152f2b1ab55/d3bcb/slide-079.png 325w,
/static/fa038b654f233fd98b02a152f2b1ab55/dbb61/slide-079.png 650w,
/static/fa038b654f233fd98b02a152f2b1ab55/6b691/slide-079.png 975w,
/static/fa038b654f233fd98b02a152f2b1ab55/e11df/slide-079.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/fa038b654f233fd98b02a152f2b1ab55/dbb61/slide-079.png" alt="Slide n&#xB0;079" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>L&#xE0; o&#xF9; c&apos;est vraiment <em>frappant</em> c&apos;est si on prend un peu de recul et qu&apos;on regarde sur 24 heures&#x2026; Vous vous souvenez, quand je disais qu&apos;on avait un pic de trafic sur nos applications, tous les jours &#xE0; 21h ? Vous le voyez le pic ?</p>
<p><a class="gatsby-resp-image-link" href="https://blog.pascal-martin.fr/static/cbf9a79c08a489c35b615a7e96bb50ec/e11df/slide-080.png" style="display: block" target="_blank" rel="noopener">
    <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAABSklEQVQoz52RwU4CMRCG4VW4cOWirgmSrptwx0eQRC7yOvI0RgXewoMnDxpR0N1uZ9rp+u9SyIJGjd9OJp3p/J1pt9Go0WzC/sRW0Gz8myRJLsfj8+HwYjQaDM663e4RiKKDwwDWUXQcbcAmalqtVim+m06LopAK55z4Emttlukcn9ZI+hrMjPrJZFKKZ/M5AlQU3+Gx5XcyOLcmns3WYpy6rg5WgUlYQv4b8bQa29owMJCaR5Yg3oRfxq519mVZEcQiaIcs/dB5b+w9WH4Rz7diYsmNe12Zl5VZpizO5yKPhquBwvvt3rl6bXaOnWTkNLmnN714N+TEiZDIg6Z7Tc9kGf/Se1O/8/XNLaJFmq7ILMloy9bh+WxuOWX+YNLwRAtjYBkTKiG+Wos7nU6sVO+kF6sYwClVWhysBIskjk/jCqX6/X673Yb2E+GVBPOiysxNAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/cbf9a79c08a489c35b615a7e96bb50ec/50512/slide-080.webp" alt="Slide n&#xB0;080" width="163" height="102" layout="responsive" srcset="/static/cbf9a79c08a489c35b615a7e96bb50ec/50512/slide-080.webp 163w,
/static/cbf9a79c08a489c35b615a7e96bb50ec/aeba0/slide-080.webp 325w,
/static/cbf9a79c08a489c35b615a7e96bb50ec/001d9/slide-080.webp 650w,
/static/cbf9a79c08a489c35b615a7e96bb50ec/97fd0/slide-080.webp 975w,
/static/cbf9a79c08a489c35b615a7e96bb50ec/3cea3/slide-080.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/cbf9a79c08a489c35b615a7e96bb50ec/19bd1/slide-080.png" alt="Slide n&#xB0;080" width="163" height="102" layout="responsive" srcset="/static/cbf9a79c08a489c35b615a7e96bb50ec/19bd1/slide-080.png 163w,
/static/cbf9a79c08a489c35b615a7e96bb50ec/d3bcb/slide-080.png 325w,
/static/cbf9a79c08a489c35b615a7e96bb50ec/dbb61/slide-080.png 650w,
/static/cbf9a79c08a489c35b615a7e96bb50ec/6b691/slide-080.png 975w,
/static/cbf9a79c08a489c35b615a7e96bb50ec/e11df/slide-080.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/cbf9a79c08a489c35b615a7e96bb50ec/dbb61/slide-080.png" alt="Slide n&#xB0;080" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span>
  </a></p>
<p>Notre pic de 21h habituel, c&apos;est <em>&#xE7;a</em>. Cette <em>petite bosse</em>. L&apos;application tient tr&#xE8;s bien ce pic de 21h tous les soirs. Elle a &#xE9;galement tr&#xE8;s bien tenu la purge totale de son cache -- un &#xE9;v&#xE9;nement plut&#xF4;t exceptionnel !</p>
<p><strong>Merci <em>Le Cloud</em> !</strong></p>
<p><a href="https://leanpub.com/6cloud/"><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;">
    <span class="gatsby-resp-image-background-image" style="padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAB/0lEQVQoz2NgoAQwMTFxgAErKysbGxs7OzuQZAUDoGxmZubxY8e3b9++a+eu3bt379y58+CBg/PmzmVmZgZpFhAQ0FTX1NLSkpeXNzQw1NTQ1NfTt7SwFBERAcr29/X/////6dOn7969A5LPnz1/+fLlpYuXgJaBNANtEOAX4OLkBJoiKCjIy8vLyMjIwsICMbu7u/vv378PHzx88uTp/fsPHj189PTJ0/PnzwFdB9IMpFRUVIAWqqqoamtpq6mpSUlKAcWZWUCaJ02cBLb52eVLV65cuXrnzj0g99atW0DTQZqB9gAt5+TkhJBA9wBJiOUgzZNAmn98/vj5w/vvH99/fvcWyL13+xYkRHACiLPzGruufvt/9Nnnex++H3/9Y+/NZ2tP32pZtAlqM1CRrKyspKSktJS0qKiolJSUgryCjLSMlLQsIwODhFO83YIr0VvvTD77dMm5+/MOXc2ZtM0kuZsREtrAqJKWlgaqBiIxMTFxMXGgn4EAKAaUNbMPbJu6cfHKnasPXTpy78WJy7fW7Dxb2jQLqhkXAHobSGooKNalJ8+qK9k5s+vw2qVrZk1ta2iJi0sBWolQhxUApXh4+NVU9ANd/aZWV62ePa+hsNzV0VdFUZOJkYlw+hMSktDRsbSxcPR29fP3jXJz9rW0cFFT1YcYTQAwghEuAAD7SLsKV17+2gAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;"></span>
    <amp-img src="/static/e8f97d98fd1c3038f94025a301818b35/50512/slide-081.webp" alt="Slide n&#xB0;081" width="163" height="102" layout="responsive" srcset="/static/e8f97d98fd1c3038f94025a301818b35/50512/slide-081.webp 163w,
/static/e8f97d98fd1c3038f94025a301818b35/aeba0/slide-081.webp 325w,
/static/e8f97d98fd1c3038f94025a301818b35/001d9/slide-081.webp 650w,
/static/e8f97d98fd1c3038f94025a301818b35/97fd0/slide-081.webp 975w,
/static/e8f97d98fd1c3038f94025a301818b35/3cea3/slide-081.webp 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/webp"><amp-img src="/static/e8f97d98fd1c3038f94025a301818b35/19bd1/slide-081.png" alt="Slide n&#xB0;081" width="163" height="102" layout="responsive" srcset="/static/e8f97d98fd1c3038f94025a301818b35/19bd1/slide-081.png 163w,
/static/e8f97d98fd1c3038f94025a301818b35/d3bcb/slide-081.png 325w,
/static/e8f97d98fd1c3038f94025a301818b35/dbb61/slide-081.png 650w,
/static/e8f97d98fd1c3038f94025a301818b35/6b691/slide-081.png 975w,
/static/e8f97d98fd1c3038f94025a301818b35/e11df/slide-081.png 1000w" sizes="(max-width: 650px) 100vw, 650px" type="image/png"></amp-img><amp-img src="/static/e8f97d98fd1c3038f94025a301818b35/dbb61/slide-081.png" alt="Slide n&#xB0;081" width="650" height="406" layout="responsive" fallback class="gatsby-resp-image-image" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;" title></amp-img></amp-img>
  </span></a></p>
<p>Je suis certain que vous avez des questions, et &#xE7;a tombe bien : je suis en train d&apos;&#xE9;crire <a href="https://leanpub.com/6cloud/">un livre nomm&#xE9; <strong>Le Plan Copenhague</strong></a>, dans lequel je partage notre retour d&apos;exp&#xE9;rience de cette migration dans <em>Le Cloud</em>. En mode <em>&quot;voila ce qui a foir&#xE9;, et ce qui a foir&#xE9; ailleurs, et comment on a am&#xE9;lior&#xE9;, et comment on a progress&#xE9;&quot;</em>, un format qui manquait ailleurs, je trouve.</p>
<p>Si &#xE7;a vous int&#xE9;resse, et je pense que &#xE7;a vous int&#xE9;ressera, j&apos;ai d&#xE9;j&#xE0; publi&#xE9; les 10 premiers chapitres. Il y en a d&#xE9;j&#xE0; pour 220 pages. Ce livre s&apos;appelle <a href="https://leanpub.com/6cloud/"><strong>Le Plan Copenhague</strong></a> et c&apos;est disponible depuis d&#xE9;j&#xE0; quelques mois, mis &#xE0; jour au fur et &#xE0; mesure de la publication des nouveaux chapitres.</p>
<br>
<p>Je m&apos;appelle Pascal Martin, je suis Lead DevOps chez M6 &#xE0; Lyon. J&apos;esp&#xE8;re que vous avez appris des choses pendant la petite heure que nous avons pass&#xE9;e ensemble et je vous remercie pour votre attention !</p>
<p>Pour d&apos;autres articles, n&apos;h&#xE9;sitez pas &#xE0; consulter <a href="https://blog.pascal-martin.fr/">mon blog</a>. Vous pouvez aussi me trouver sur <a href="https://twitter.com/pascal_martin">@pascal_martin</a>.</p>
<br></div></div><hr><section class="author"><amp-img src="https://avatars3.githubusercontent.com/u/193481?v=4" alt="Pascal MARTIN" width="460" height="460" layout="responsive" class="author__profile"></amp-img><div class="author__description"><h3 class="author__name">Pascal MARTIN<a href="https://github.com/pmartin">(@<!-- -->pmartin<!-- -->)</a></h3><div class="author__bio"><div>Web &amp; PHP developer, DevOps, 10+ years of XP. Author of &#xAB;&#xA0;D&#xE9;velopper une Extension PHP&#xA0;&#xBB;,  &#xAB;&#xA0;PHP&#xA0;7 avanc&#xE9;&#xA0;&#xBB; and &#xAB;&#xA0;Le Plan Copenhague&#xA0;&#xBB;.</div></div></div></section></main></div></div></div></body></html>